(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,n,t){e.exports=t(64)},29:function(e,n,t){},54:function(e,n,t){},56:function(e,n,t){},58:function(e,n,t){},60:function(e,n,t){},62:function(e,n,t){},64:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),s=t(19),c=t.n(s),i=(t(29),t(9)),o=t(2),l=t(10),u=t(4),d=t(5),m=t(8),f=t(6),h=t(7),v=t(1),p=t(20),b=t.n(p),C=t(21),y=t.n(C),E=t(22),O=t.n(E),g=t(23),j=t.n(g),N=(t(54),function(e){var n=/(\d{1,2}):(\d{2}) (a|p)m/.exec(e),t=Object(i.a)(n,4),a=t[1],r=t[2];return 60*(("p"===t[3]?12:0)+Number.parseInt(a%12))+Number.parseInt(r)}),k=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e/60|0,a=e%60;return"".concat(t>12?t-12:t,":").concat(a<10?"0"+a:a).concat(n?" ".concat(t<12?"a":"p","m"):"")},w=function(e){return e?"".concat(k(e.start,!1)," - ").concat(k(e.end)):"TBA"},x=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(function(e){return e}).join(" ")},S=(t(56),function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(m.a)(this,Object(f.a)(n).call(this,e))).state={expanded:!1},t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"handleToggleExpanded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.expanded;this.setState({expanded:e})}},{key:"render",value:function(){var e=this,n=this.props,t=n.className,a=n.course,s=n.expandable,c=n.onClick,i=n.onRemove,o=n.onTogglePinned,l=n.onToggleExcluded,u=n.onSetOverlayCrns,d=n.pinnedCrns,m=n.excludedCrns,f=this.state.expanded;return r.a.createElement("div",{className:x("Course",t),style:{backgroundColor:a.color},key:a.id,onClick:c},r.a.createElement("div",{className:"course-header",onClick:s?function(){return e.handleToggleExpanded()}:void 0},r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"course_id"},a.id),r.a.createElement("span",{className:"section_ids"},Object.values(a.sections).filter(function(e){return d.includes(e.crn)}).map(function(e){return e.id}).join(", "))),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"course_title",dangerouslySetInnerHTML:{__html:a.title}}),s&&r.a.createElement("span",{className:"toggle"},f?"-":"+"))),f&&r.a.createElement("div",{className:"sections"},Object.values(a.sections).map(function(e){var n=m.includes(e.crn),t=d.includes(e.crn);return r.a.createElement("div",{className:x("section",n&&"excluded",t&&"pinned"),key:e.id,onClick:function(){return o(e)},onMouseEnter:function(){return u([e.crn])},onMouseLeave:function(){return u([])}},r.a.createElement("div",{className:"section-header"},r.a.createElement("span",{className:"section_id"},e.id),r.a.createElement("span",{className:"instructors"},e.instructors.join(", "))),!n&&r.a.createElement("div",{className:"meetings"},e.meetings.map(function(e,n){return r.a.createElement("div",{className:"meeting",key:n},r.a.createElement("span",{className:"days"},e.days.join("")),r.a.createElement("span",{className:"period"},w(e.period)))})),r.a.createElement("div",{className:"actions"},r.a.createElement("div",{className:"exclude",onClick:function(n){n.stopPropagation(),l(e)}},n?"Include":"Exclude")))})),f&&r.a.createElement("div",{className:"actions section-actions"},r.a.createElement("div",{className:"dim",onClick:function(){return i(a)}},"Remove")))}}]),n}(a.Component)),T=(t(58),t(60),function(e){function n(){return Object(u.a)(this,n),Object(m.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,t=e.section,a=e.overlay,s=e.preview;return r.a.createElement("div",{className:x("Section",a&&"overlay",n)},t.meetings.map(function(e,n){return e.period&&e.days.map(function(t){return r.a.createElement("div",{className:"meeting ".concat(t),key:[n,t].join("-"),style:{top:(e.period.start-480)/780*100+"%",height:(e.period.end-e.period.start)/780*100+"%",backgroundColor:e.course.color}},!s&&r.a.createElement("div",{className:"meeting-wrapper"},r.a.createElement("span",{className:"course_id"},e.course.id," ",e.section.id),r.a.createElement("span",{className:"period"},w(e.period)),r.a.createElement("span",{className:"where"},e.where),r.a.createElement("span",{className:"instructors"},e.instructors.join(", "))))})}))}}]),n}(a.Component)),R=function(e){function n(){return Object(u.a)(this,n),Object(m.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,t=e.pinnedCrns,a=e.overlayCrns,s=e.crns,c=e.preview;return r.a.createElement("div",{className:x("Calendar",c&&"preview",n)},!c&&r.a.createElement("div",{className:"times"},new Array(13).fill(0).map(function(e,n){var t=480+60*n;return r.a.createElement("div",{className:"time",key:t},r.a.createElement("span",{className:"label"},k(t)))})),!c&&r.a.createElement("div",{className:"days"},["M","T","W","R","F"].map(function(e){return r.a.createElement("div",{className:"day",key:e},r.a.createElement("span",{className:"label"},e))})),r.a.createElement("div",{className:"meetings"},t.map(function(e){return r.a.createElement(T,{key:e,section:s[e],preview:c})}),a.filter(function(e){return!t.includes(e)}).map(function(e){return r.a.createElement(T,{key:e,section:s[e],overlay:!0,preview:c})})))}}]),n}(a.Component),P=t(12),L=t.n(P),M=(t(62),function(e){function n(){return Object(u.a)(this,n),Object(m.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,t=e.combinations,a=e.crns,s=e.pinnedCrns,c=e.onSetOverlayCrns,i=e.onSetPinnedCrns;return r.a.createElement("div",{className:x("Combinations",n)},t.map(function(e,n){return r.a.createElement("div",{className:"combination",key:n,onMouseEnter:function(){return c(e)},onMouseLeave:function(){return c([])},onClick:function(){return i(Object(o.a)(s).concat(Object(o.a)(e)))}},r.a.createElement("div",{className:"number"},n+1),r.a.createElement(R,{className:"preview",pinnedCrns:Object(o.a)(s).concat(Object(o.a)(e)),overlayCrns:[],crns:a,key:n,preview:!0}))}))}}]),n}(a.PureComponent)),D=function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(m.a)(this,Object(f.a)(n).call(this,e))).courses={},t.crns={},t.state=Object(l.a)({},t.loadData(),{combinations:[],overlayCrns:[],keyword:"",loaded:!1,tabIndex:0,mobile:t.isMobile()}),t.captureRef=r.a.createRef(),t.inputRef=r.a.createRef(),t.handleResize=t.handleResize.bind(Object(v.a)(Object(v.a)(t))),t.handleSetPinnedCrns=t.handleSetPinnedCrns.bind(Object(v.a)(Object(v.a)(t))),t.handleSetOverlayCrns=t.handleSetOverlayCrns.bind(Object(v.a)(Object(v.a)(t))),t.handleAddCourse=t.handleAddCourse.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeKeyword=t.handleChangeKeyword.bind(Object(v.a)(Object(v.a)(t))),t.handlePressEnter=t.handlePressEnter.bind(Object(v.a)(Object(v.a)(t))),t.handleRemoveCourse=t.handleRemoveCourse.bind(Object(v.a)(Object(v.a)(t))),t.handleToggleExcluded=t.handleToggleExcluded.bind(Object(v.a)(Object(v.a)(t))),t.handleTogglePinned=t.handleTogglePinned.bind(Object(v.a)(Object(v.a)(t))),t.handleDownload=t.handleDownload.bind(Object(v.a)(Object(v.a)(t))),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.a.get("./courses.json").then(function(n){var t={},a=n.data;Object.keys(a).forEach(function(e){var n=a[e];n.id=e,n.color=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,t="#",a=0;a<3;a++){var r=(Math.random()*(n-e)+e|0).toString(16);t+=(1===r.length?"0":"")+r}return t}(32,160),Object.keys(n.sections).forEach(function(e){var a=n.sections[e];a.id=e,a.course=n;var r=[];a.meetings.forEach(function(e){return r.push.apply(r,Object(o.a)(e.instructors))}),a.instructors=Object(o.a)(new Set(r)),t[a.crn]=a,a.meetings.forEach(function(e){e.course=n,e.section=a;var t=e.days,r=e.period;if(e.days="&nbsp;"===t?[]:Object(o.a)(t),"TBA"===r)e.period=void 0;else{var s=r.split(" - "),c=Object(i.a)(s,2),l=c[0],u=c[1];e.period={start:N(l),end:N(u)}}})});var r=Object.values(n.sections),s=r.map(function(e){return e.scheduleType});n.hasLab=s.includes("Lecture")&&s.includes("Supervised Laboratory"),n.hasLab?(n.lectures=r.filter(function(e){return"Lecture"===e.scheduleType}),n.labs=r.filter(function(e){return"Supervised Laboratory"===e.scheduleType}),n.lectures.forEach(function(e){return e.labs=n.labs.filter(function(n){return n.id.startsWith(e.id)})}),n.labs.forEach(function(e){return e.lectures=n.lectures.filter(function(n){return e.id.startsWith(n.id)})}),n.lectures.every(function(e){return!e.labs.length})&&(n.lectures.forEach(function(e){return e.labs=n.labs}),n.labs.forEach(function(e){return e.lectures=n.lectures}))):n.sectionGroups=function(e){var n={};return e.forEach(function(e){var t=e.meetings.map(function(e){return{days:e.days,period:e.period}}),a=JSON.stringify(t),r=n[a];r?r.sections.push(e):n[a]={hash:a,meetings:t,sections:[e]}}),n}(r)}),e.courses=a,e.crns=t,e.updateCombinations({loaded:!0})}),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"saveData",value:function(e){var n=e.desiredCourses,t=void 0===n?[]:n,a=e.pinnedCrns,r=void 0===a?[]:a,s=e.excludedCrns,c=void 0===s?[]:s;L.a.set("data",JSON.stringify({desiredCourses:t,pinnedCrns:r,excludedCrns:c}))}},{key:"loadData",value:function(){var e=null;try{e=JSON.parse(L.a.get("data"))}catch(i){e={}}var n=e,t=n.desiredCourses,a=void 0===t?[]:t,r=n.pinnedCrns,s=void 0===r?[]:r,c=n.excludedCrns;return{desiredCourses:a,pinnedCrns:s,excludedCrns:void 0===c?[]:c}}},{key:"updateCombinations",value:function(e){var n=this;this.setState(function(t){var a="function"===typeof e?e(t):e,r=Object(l.a)({},t,a),s=r.desiredCourses,c=r.pinnedCrns,i=r.excludedCrns;n.saveData(r);var u=[];return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t!==s.length){var r=n.courses[s[t]],l=function(e){return!i.includes(e.crn)},d=function(e){return c.includes(e.crn)},m=function(e){return Object(o.a)(c).concat(Object(o.a)(a)).some(function(t){return a=n.crns[t],r=e,a.meetings.some(function(e){return r.meetings.some(function(n){return e.period&&n.period&&["M","T","W","R","F"].some(function(t){return e.days.includes(t)&&n.days.includes(t)})&&e.period.start<n.period.end&&n.period.start<e.period.end})});var a,r})};if(r.hasLab){var f=r.lectures.filter(d),h=r.labs.filter(d);h.length?h.forEach(function(n){n.lectures.filter(l).forEach(function(n){if(d(n))e(t+1,a);else{if(m(n))return;e(t+1,Object(o.a)(a).concat([n.crn]))}})}):f.length?f.forEach(function(n){n.labs.filter(l).forEach(function(n){m(n)||e(t+1,Object(o.a)(a).concat([n.crn]))})}):r.lectures.filter(l).forEach(function(n){m(n)||n.labs.filter(l).forEach(function(r){m(r)||e(t+1,Object(o.a)(a).concat([n.crn,r.crn]))})})}else Object.values(r.sections).some(d)?e(t+1,a):Object.values(r.sectionGroups).forEach(function(n){var r=n.sections.find(l);r&&!m(r)&&e(t+1,Object(o.a)(a).concat([r.crn]))})}else u.push(a)}(),Object(l.a)({},a,{combinations:u})})}},{key:"searchCourses",value:function(e){return Object.values(this.courses).filter(function(n){return n.id.startsWith(e.toUpperCase())})}},{key:"getTotalCredits",value:function(){var e=this;return this.state.pinnedCrns.reduce(function(n,t){return n+e.crns[t].credits},0)}},{key:"isMobile",value:function(){return window.innerWidth<=1024}},{key:"handleResize",value:function(e){var n=this.isMobile();this.setState({mobile:n})}},{key:"handleRemoveCourse",value:function(e){this.updateCombinations(function(n){return{desiredCourses:n.desiredCourses.filter(function(n){return n!==e.id}),pinnedCrns:n.pinnedCrns.filter(function(n){return!Object.values(e.sections).some(function(e){return e.crn===n})}),excludedCrns:n.excludedCrns.filter(function(n){return!Object.values(e.sections).some(function(e){return e.crn===n})})}})}},{key:"handleAddCourse",value:function(e){this.updateCombinations(function(n){var t=n.desiredCourses,a=n.excludedCrns;if(!t.includes(e.id)){var r=Object.values(e.sections).filter(function(e){return e.meetings.some(function(e){return!e.days.length||!e.period})}).map(function(e){return e.crn});return{keyword:"",desiredCourses:Object(o.a)(t).concat([e.id]),excludedCrns:Object(o.a)(a).concat(Object(o.a)(r))}}return{keyword:""}}),this.inputRef.current.focus()}},{key:"handleTogglePinned",value:function(e){this.updateCombinations(function(n){var t=n.pinnedCrns,a=n.excludedCrns;return t.includes(e.crn)?{pinnedCrns:t.filter(function(n){return n!==e.crn})}:{pinnedCrns:Object(o.a)(t).concat([e.crn]),excludedCrns:a.filter(function(n){return n!==e.crn})}})}},{key:"handleToggleExcluded",value:function(e){this.updateCombinations(function(n){var t=n.pinnedCrns,a=n.excludedCrns;return a.includes(e.crn)?{excludedCrns:a.filter(function(n){return n!==e.crn})}:{excludedCrns:Object(o.a)(a).concat([e.crn]),pinnedCrns:t.filter(function(n){return n!==e.crn})}})}},{key:"handleChangeKeyword",value:function(e){var n=e.target.value;this.setState({keyword:n})}},{key:"handlePressEnter",value:function(e){if("Enter"===e.key){e.preventDefault();var n=this.searchCourses(this.state.keyword);n.length&&this.handleAddCourse(n[0])}}},{key:"handleSetPinnedCrns",value:function(e){this.updateCombinations({pinnedCrns:e})}},{key:"handleSetOverlayCrns",value:function(e){this.setState({overlayCrns:e})}},{key:"handleDownload",value:function(){var e=this.captureRef.current;O.a.toPng(e,{width:2*e.offsetWidth,height:2*e.offsetHeight,style:{left:0,transform:"scale(".concat(2,")"),"transform-origin":"top left"}}).then(function(e){return j()(e,"schedule.png")})}},{key:"handleChangeTab",value:function(e){this.setState({tabIndex:e})}},{key:"render",value:function(){var e=this,n=this.state,t=n.pinnedCrns,a=n.excludedCrns,s=n.desiredCourses,c=n.combinations,i=n.overlayCrns,o=n.keyword,l=n.loaded,u=n.tabIndex,d=n.mobile;return l&&r.a.createElement("div",{className:x("App",d&&"mobile")},!d&&r.a.createElement("div",{className:"calendar-container"},r.a.createElement(R,{pinnedCrns:t,overlayCrns:i,crns:this.crns})),r.a.createElement("div",{className:"capture-container",ref:this.captureRef},r.a.createElement(R,{className:"fake-calendar",pinnedCrns:t,overlayCrns:i,crns:this.crns})),r.a.createElement("div",{className:"sidebar"},d&&r.a.createElement("div",{className:"tab-container"},["Courses","Combinations","Calendar"].map(function(n,t){return r.a.createElement("div",{className:x("tab",u===t&&"active"),onClick:function(){return e.handleChangeTab(t)},key:t},n)})),r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"primary"},"Spring 2019"),r.a.createElement("span",{className:"secondary"},this.getTotalCredits()," Credits")),r.a.createElement("div",{className:"scroller"},r.a.createElement("div",{className:x("courses-container",0===u&&"active")},t.length>0&&r.a.createElement(y.a,{className:"button",text:t.join(", ")},r.a.createElement("span",null,t.join(", "))),r.a.createElement("div",{className:"course-list"},s.map(function(n){var s=e.courses[n];return r.a.createElement(S,{course:s,expandable:!0,key:s.id,onRemove:e.handleRemoveCourse,onTogglePinned:e.handleTogglePinned,onToggleExcluded:e.handleToggleExcluded,onSetOverlayCrns:e.handleSetOverlayCrns,pinnedCrns:t,excludedCrns:a})})),r.a.createElement("div",{className:"course-add"},r.a.createElement("input",{type:"text",ref:this.inputRef,value:o,onChange:this.handleChangeKeyword,className:"keyword",placeholder:"XX 0000",onKeyPress:this.handlePressEnter}),r.a.createElement("div",{className:"autocomplete"},o&&this.searchCourses(o).slice(0,10).map(function(n){return r.a.createElement(S,{course:n,onClick:function(){return e.handleAddCourse(n)},key:n.id,pinnedCrns:t})})))),r.a.createElement("div",{className:x("combinations-container",1===u&&"active")},t.length>0&&r.a.createElement("div",{className:"button",onClick:function(){return e.handleSetPinnedCrns([])}},"Reset Sections"),r.a.createElement(M,{className:"combinations",combinations:c,crns:this.crns,pinnedCrns:t,onSetOverlayCrns:this.handleSetOverlayCrns,onSetPinnedCrns:this.handleSetPinnedCrns})),d&&r.a.createElement("div",{className:x("mobile","calendar-container",2===u&&"active")},r.a.createElement(R,{pinnedCrns:t,overlayCrns:i,crns:this.crns}))),r.a.createElement("div",{className:"button",onClick:this.handleDownload},"Download as PNG"),r.a.createElement("a",{className:"button",href:"https://github.com/parkjs814/gt-scheduler",rel:"noopener",target:"_blank"},"Fork me on GitHub")))}}]),n}(a.Component);c.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.e76dc83a.chunk.js.map