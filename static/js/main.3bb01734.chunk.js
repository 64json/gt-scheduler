(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(84)},70:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"db",function(){return v}),n.d(r,"env",function(){return x}),n.d(r,"user",function(){return A}),n.d(r,"actions",function(){return L});var a=n(0),s=n.n(a),c=n(32),i=n.n(c),o=n(5),u=n(18),l=n(13),d=n(14),h=n(87),p=n(85),f=n(86),m=Object(h.a)("".concat("DB","/SET_OSCAR"),function(e){return{oscar:e}}),b={setOscar:m},v=Object(p.a)(Object(d.a)({},Object(f.a)(m),function(e,t){var n=t.payload;return Object(l.a)({},e,n)}),{oscar:null}),E=n(17),O=function(e){var t=/(\d{1,2}):(\d{2}) (a|p)m/.exec(e),n=Object(E.a)(t,4),r=n[1],a=n[2];return 60*(("p"===n[3]?12:0)+Number.parseInt(r%12))+Number.parseInt(a)},C=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e/60|0,r=e%60;return"".concat(n>12?n-12:n,":").concat(r<10?"0"+r:r).concat(t?" ".concat(n<12?"a":"p","m"):"")},j=function(e){return e?"".concat(C(e.start,!1)," - ").concat(C(e.end)):"TBA"},y=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n="#",r=0;r<3;r++){var a=(Math.random()*(t-e)+e|0).toString(16);n+=(1===a.length?"0":"")+a}return n},g=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")},N=function(){return window.innerWidth<768},k=Object(h.a)("".concat("ENV","/SET_MOBILE"),function(e){return{mobile:e}}),w={setMobile:k},S={mobile:N()},x=Object(p.a)(Object(d.a)({},Object(f.a)(k),function(e,t){var n=t.payload;return Object(l.a)({},e,n)}),S),R=n(23),P=n.n(R),T=Object(h.a)("".concat("USER","/SET_DESIRED_COURSES"),function(e){return{desiredCourses:e}}),M=Object(h.a)("".concat("USER","/SET_PINNED_CRNS"),function(e){return{pinnedCrns:e}}),D=Object(h.a)("".concat("USER","/SET_EXCLUDED_CRNS"),function(e){return{excludedCrns:e}}),_={setDesiredCourses:T,setPinnedCrns:M,setExcludedCrns:D},I=function(){var e=null;try{e=JSON.parse(P.a.get("data"))}catch(i){e={}}var t=e,n=t.desiredCourses,r=void 0===n?[]:n,a=t.pinnedCrns,s=void 0===a?[]:a,c=t.excludedCrns;return{desiredCourses:r,pinnedCrns:s,excludedCrns:void 0===c?[]:c}}(),A=Object(p.a)(Object(d.a)({},Object(f.a)(T,M,D),function(e,t){var n=t.payload,r=Object(l.a)({},e,n);return function(e){var t=e.desiredCourses,n=void 0===t?[]:t,r=e.pinnedCrns,a=void 0===r?[]:r,s=e.excludedCrns,c=void 0===s?[]:s;P.a.set("data",JSON.stringify({desiredCourses:n,pinnedCrns:a,excludedCrns:c}),{expires:365})}(r),r}),I),L=Object(l.a)({},b,w,_),W=n(2),z=n(3),U=n(7),B=n(4),J=n(6),K=n(8),G=n(35),F=n.n(G),H=n(36),X=n.n(H),V=n(37),Z=n.n(V),$=n(38),q=n.n($),Q=function(e){function t(){return Object(W.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(z.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.state!==t,r=!function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){return n in t&&e[n]===t[n]})}(this.props,e);return n||r}}]),t}(a.Component),Y=(n(70),function(e){function t(){return Object(W.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.overlayCrns,r=e.preview,a=this.props.env.mobile,c=this.props.user.pinnedCrns;return s.a.createElement("div",{className:g("Calendar",a&&"mobile",r&&"preview",t)},r&&s.a.createElement("img",{className:"ratio",src:"5x2.png",alt:""}),!r&&s.a.createElement("div",{className:"times"},new Array(13).fill(0).map(function(e,t){var n=480+60*t;return s.a.createElement("div",{className:"time",key:n},s.a.createElement("span",{className:"label"},function(e){var t=e/60|0;return"".concat(t>12?t-12:t).concat(t<12?"a":"p","m")}(n)))})),!r&&s.a.createElement("div",{className:"days"},["M","T","W","R","F"].map(function(e){return s.a.createElement("div",{className:"day",key:e},s.a.createElement("span",{className:"label"},e))})),s.a.createElement("div",{className:"meetings"},c.map(function(e){return s.a.createElement(ue,{key:e,crn:e,preview:r})}),n&&n.filter(function(e){return!c.includes(e)}).map(function(e){return s.a.createElement(ue,{key:e,crn:e,overlay:!r,preview:r})})))}}]),t}(Q)),ee=Object(o.b)(function(e){return{env:e.env,user:e.user}},L)(Y),te=n(1),ne=(n(72),function(e){function t(){return Object(W.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(z.a)(t,[{key:"getCombinations",value:function(){var e=this.props.db.oscar,t=this.props.user,n=t.desiredCourses,r=t.pinnedCrns,a=t.excludedCrns,s=[];return function t(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c!==n.length){var o=e.findCourse(n[c]),u=function(e){return!a.includes(e.crn)},l=function(e){return r.includes(e.crn)},d=function(t){return Object(te.a)(r).concat(Object(te.a)(i)).some(function(n){return r=e.findSection(n),a=t,r.meetings.some(function(e){return a.meetings.some(function(t){return e.period&&t.period&&["M","T","W","R","F"].some(function(n){return e.days.includes(n)&&t.days.includes(n)})&&e.period.start<t.period.end&&t.period.start<e.period.end})});var r,a})};if(o.hasLab){var h=o.lectures.filter(l),p=o.labs.filter(l);p.length?p.forEach(function(e){e.lectures.filter(u).forEach(function(e){if(l(e))t(c+1,i);else{if(d(e))return;t(c+1,Object(te.a)(i).concat([e.crn]))}})}):h.length?h.forEach(function(e){e.labs.filter(u).forEach(function(e){d(e)||t(c+1,Object(te.a)(i).concat([e.crn]))})}):o.lectures.filter(u).forEach(function(e){d(e)||e.labs.filter(u).forEach(function(n){d(n)||t(c+1,Object(te.a)(i).concat([e.crn,n.crn]))})})}else Object.values(o.sections).some(l)?t(c+1,i):Object.values(o.sectionGroups).forEach(function(e){var n=e.sections.find(u);n&&!d(n)&&t(c+1,Object(te.a)(i).concat([n.crn]))})}else s.push(i)}(),s}},{key:"handleSetPinnedCrns",value:function(e){this.props.setPinnedCrns(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.onSetOverlayCrns,a=this.props.user.pinnedCrns,c=this.getCombinations();return s.a.createElement("div",{className:g("Combinations",n)},c.map(function(t,n){return s.a.createElement("div",{className:"combination",key:n,onMouseEnter:function(){return r(t)},onMouseLeave:function(){return r([])},onClick:function(){return e.handleSetPinnedCrns(Object(te.a)(a).concat(Object(te.a)(t)))}},s.a.createElement("div",{className:"number"},n+1),s.a.createElement(ee,{className:"preview",overlayCrns:t,preview:!0}))}))}}]),t}(Q)),re=Object(o.b)(function(e){return{db:e.db,user:e.user}},L)(ne),ae=(n(74),function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(U.a)(this,Object(B.a)(t).call(this,e))).state={expanded:!1},n}return Object(J.a)(t,e),Object(z.a)(t,[{key:"handleRemoveCourse",value:function(e){var t=this.props.user,n=t.desiredCourses,r=t.pinnedCrns,a=t.excludedCrns;this.props.setDesiredCourses(n.filter(function(t){return t!==e.id})),this.props.setPinnedCrns(r.filter(function(t){return!Object.values(e.sections).some(function(e){return e.crn===t})})),this.props.setExcludedCrns(a.filter(function(t){return!Object.values(e.sections).some(function(e){return e.crn===t})}))}},{key:"handleTogglePinned",value:function(e){var t=this.props.user,n=t.pinnedCrns,r=t.excludedCrns;n.includes(e.crn)?this.props.setPinnedCrns(n.filter(function(t){return t!==e.crn})):(this.props.setPinnedCrns(Object(te.a)(n).concat([e.crn])),this.props.setExcludedCrns(r.filter(function(t){return t!==e.crn})))}},{key:"handleToggleExcluded",value:function(e){var t=this.props.user,n=t.pinnedCrns,r=t.excludedCrns;r.includes(e.crn)?this.props.setExcludedCrns(r.filter(function(t){return t!==e.crn})):(this.props.setExcludedCrns(Object(te.a)(r).concat([e.crn])),this.props.setPinnedCrns(n.filter(function(t){return t!==e.crn})))}},{key:"handleToggleExpanded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.expanded;this.setState({expanded:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.courseId,a=t.expandable,c=t.onClick,i=t.onSetOverlayCrns,o=this.props.db.oscar,u=this.props.user,l=u.pinnedCrns,d=u.excludedCrns,h=this.state.expanded,p=o.findCourse(r);return s.a.createElement("div",{className:g("Course",n),style:{backgroundColor:p.color},key:p.id,onClick:c},s.a.createElement("div",{className:"course-header",onClick:a?function(){return e.handleToggleExpanded()}:void 0},s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"course_id"},p.id),s.a.createElement("span",{className:"section_ids"},Object.values(p.sections).filter(function(e){return l.includes(e.crn)}).map(function(e){return e.id}).join(", "))),s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"course_title",dangerouslySetInnerHTML:{__html:p.title}}),a&&s.a.createElement("span",{className:"toggle"},h?"-":"+"))),h&&s.a.createElement("div",{className:"sections"},Object.values(p.sections).map(function(t){var n=d.includes(t.crn),r=l.includes(t.crn);return s.a.createElement("div",{className:g("section",n&&"excluded",r&&"pinned"),key:t.id,onClick:function(){return e.handleTogglePinned(t)},onMouseEnter:function(){return i([t.crn])},onMouseLeave:function(){return i([])}},s.a.createElement("div",{className:"section-header"},s.a.createElement("span",{className:"section_id"},t.id),s.a.createElement("span",{className:"instructors"},t.instructors.join(", "))),!n&&s.a.createElement("div",{className:"meetings"},t.meetings.map(function(e,t){return s.a.createElement("div",{className:"meeting",key:t},s.a.createElement("span",{className:"days"},e.days.join("")),s.a.createElement("span",{className:"period"},j(e.period)))})),s.a.createElement("div",{className:"actions"},s.a.createElement("div",{className:"exclude",onClick:function(n){n.stopPropagation(),e.handleToggleExcluded(t)}},n?"Include":"Exclude")))})),h&&s.a.createElement("div",{className:"actions section-actions"},s.a.createElement("div",{className:"dim",onClick:function(){return e.handleRemoveCourse(p)}},"Remove")))}}]),t}(Q)),se=Object(o.b)(function(e){return{db:e.db,user:e.user}},L)(ae),ce=(n(76),function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(U.a)(this,Object(B.a)(t).call(this,e))).state={keyword:""},n.inputRef=s.a.createRef(),n.handleChangeKeyword=n.handleChangeKeyword.bind(Object(K.a)(Object(K.a)(n))),n.handlePressEnter=n.handlePressEnter.bind(Object(K.a)(Object(K.a)(n))),n}return Object(J.a)(t,e),Object(z.a)(t,[{key:"handleChangeKeyword",value:function(e){var t=e.target.value;this.setState({keyword:t})}},{key:"handlePressEnter",value:function(e){var t=this.props.db.oscar,n=this.state.keyword;if("Enter"===e.key){e.preventDefault();var r=t.searchCourses(n);r.length&&this.handleAddCourse(r[0])}}},{key:"handleAddCourse",value:function(e){var t=this.props.user,n=t.desiredCourses,r=t.excludedCrns;if(!n.includes(e.id)){var a=Object.values(e.sections).filter(function(e){return!e.meetings.length||e.meetings.some(function(e){return!e.days.length||!e.period})}).map(function(e){return e.crn});this.props.setDesiredCourses(Object(te.a)(n).concat([e.id])),this.props.setExcludedCrns(Object(te.a)(r).concat(Object(te.a)(a))),this.setState({keyword:""}),this.inputRef.current.focus()}}},{key:"render",value:function(){var e=this,t=this.props.className,n=this.props.db.oscar,r=this.props.user.pinnedCrns,a=this.state.keyword;return s.a.createElement("div",{className:g("CourseAdd",t)},s.a.createElement("input",{type:"text",ref:this.inputRef,value:a,onChange:this.handleChangeKeyword,className:"keyword",placeholder:"XX 0000",onKeyPress:this.handlePressEnter}),s.a.createElement("div",{className:"autocomplete"},a&&n.searchCourses(a).map(function(t){return s.a.createElement(se,{courseId:t.id,onClick:function(){return e.handleAddCourse(t)},key:t.id,pinnedCrns:r})})))}}]),t}(Q)),ie=Object(o.b)(function(e){return{db:e.db,user:e.user}},L)(ce),oe=(n(78),function(e){function t(){return Object(W.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.crn,r=e.overlay,a=e.preview,c=this.props.env.mobile,i=this.props.db.oscar.findSection(n);return s.a.createElement("div",{className:g("Section",c&&"mobile",r&&"overlay",t)},i.meetings.map(function(e,t){return e.period&&e.days.map(function(n){return s.a.createElement("div",{className:"meeting ".concat(n),key:[t,n].join("-"),style:{top:(e.period.start-480)/780*100+"%",height:(e.period.end-e.period.start)/780*100+"%",backgroundColor:i.course.color}},!a&&s.a.createElement("div",{className:"meeting-wrapper"},s.a.createElement("span",{className:"course_id"},i.course.id,c?"":" ".concat(i.id)),s.a.createElement("span",{className:"period"},j(e.period)),!c&&s.a.createElement("span",{className:"where"},e.where),!c&&s.a.createElement("span",{className:"instructors"},e.instructors.join(", "))))})}))}}]),t}(Q)),ue=Object(o.b)(function(e){return{env:e.env,db:e.db}},L)(oe),le=function(){function e(t){var n=this;Object(W.a)(this,e),this.courses=Object.keys(t).map(function(e){return new de(e,t[e])}),this.courseMap={},this.crnMap={},this.courses.forEach(function(e){n.courseMap[e.id]=e,e.sections.forEach(function(e){n.crnMap[e.crn]=e})})}return Object(z.a)(e,[{key:"findCourse",value:function(e){return this.courseMap[e]}},{key:"findSection",value:function(e){return this.crnMap[e]}},{key:"searchCourses",value:function(e){var t=/^\s*([a-zA-Z]*)\s*(\d*)\s*$/.exec(e.toUpperCase())||[],n=Object(E.a)(t,3),r=n[1],a=n[2];return r&&a?this.courses.filter(function(e){return e.subject===r&&e.number.startsWith(a)}):r?this.courses.filter(function(e){return e.subject===r}):a?this.courses.filter(function(e){return e.number.startsWith(a)}):[]}}]),e}(),de=function(){function e(t,n){var r=this;Object(W.a)(this,e),this.id=t;var a=this.id.split(" "),s=Object(E.a)(a,2);this.subject=s[0],this.number=s[1],this.title=n.title,this.color=y(32,160),this.sections=Object.keys(n.sections).map(function(e){return new he(r,e,n.sections[e])});var c=this.sections.filter(function(e){return e.credits>0}),i=this.sections.filter(function(e){return 0===e.credits});this.hasLab=!this.id.startsWith("VIP")&&c.length&&i.length,this.hasLab?(this.lectures=c,this.labs=i,this.lectures.forEach(function(e){return e.labs=r.labs.filter(function(t){return t.id.startsWith(e.id)})}),this.labs.forEach(function(e){return e.lectures=r.lectures.filter(function(t){return e.id.startsWith(t.id)})}),this.lectures.every(function(e){return!e.labs.length})&&(this.lectures.forEach(function(e){return e.labs=r.labs}),this.labs.forEach(function(e){return e.lectures=r.lectures}))):this.sectionGroups=this.distinct(this.sections)}return Object(z.a)(e,[{key:"distinct",value:function(e){var t={};return e.forEach(function(e){var n=e.meetings.map(function(e){return{days:e.days,period:e.period}}),r=JSON.stringify(n),a=t[r];a?a.sections.push(e):t[r]={hash:r,meetings:n,sections:[e]}}),t}}]),e}(),he=function e(t,n,r){Object(W.a)(this,e),this.course=t,this.id=n,this.crn=r.crn,this.credits=r.credits,this.meetings=r.meetings.map(function(e){var t=e.days,n=e.period,r=e.instructors,a=e.where;return{days:"&nbsp;"===t?[]:Object(te.a)(t),period:"TBA"===n?void 0:{start:O(n.split(" - ")[0]),end:O(n.split(" - ")[1])},instructors:r,where:a}}),this.instructors=Object(te.a)(new Set(this.meetings.reduce(function(e,t){return Object(te.a)(e).concat(Object(te.a)(t.instructors))},[])))},pe=(n(80),function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(U.a)(this,Object(B.a)(t).call(this,e))).state={overlayCrns:[],tabIndex:0},n.captureRef=s.a.createRef(),n.handleResize=n.handleResize.bind(Object(K.a)(Object(K.a)(n))),n.handleSetOverlayCrns=n.handleSetOverlayCrns.bind(Object(K.a)(Object(K.a)(n))),n.handleDownload=n.handleDownload.bind(Object(K.a)(Object(K.a)(n))),n}return Object(J.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){var e=this;F.a.get("https://jasonpark.me/gt-schedule-crawler/courses.json").then(function(t){var n=new le(t.data);e.props.setOscar(n)}),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getTotalCredits",value:function(){var e=this.props.db.oscar;return this.props.user.pinnedCrns.reduce(function(t,n){return t+e.findSection(n).credits},0)}},{key:"handleResize",value:function(e){var t=this.props.env.mobile,n=N();t!==n&&this.props.setMobile(n)}},{key:"handleSetPinnedCrns",value:function(e){this.props.setPinnedCrns(e)}},{key:"handleSetOverlayCrns",value:function(e){this.setState({overlayCrns:e})}},{key:"handleDownload",value:function(){var e=this.captureRef.current;Z.a.toPng(e,{width:2*e.offsetWidth,height:2*e.offsetHeight,style:{left:0,transform:"scale(".concat(2,")"),"transform-origin":"top left"}}).then(function(e){return q()(e,"schedule.png")})}},{key:"handleChangeTab",value:function(e){this.setState({tabIndex:e})}},{key:"render",value:function(){var e=this,t=this.props.env.mobile,n=this.props.db.oscar,r=this.props.user,a=r.pinnedCrns,c=r.desiredCourses,i=this.state,o=i.overlayCrns,u=i.tabIndex;return n&&s.a.createElement("div",{className:g("App",t&&"mobile")},!t&&s.a.createElement("div",{className:"calendar-container"},s.a.createElement(ee,{overlayCrns:o})),s.a.createElement("div",{className:"capture-container",ref:this.captureRef},s.a.createElement(ee,{className:"fake-calendar"})),s.a.createElement("div",{className:"sidebar"},t&&s.a.createElement("div",{className:"tab-container"},["Courses","Combinations","Calendar"].map(function(t,n){return s.a.createElement("div",{className:g("tab",u===n&&"active"),onClick:function(){return e.handleChangeTab(n)},key:n},t)})),s.a.createElement("div",{className:"title"},s.a.createElement("span",{className:"primary"},"Spring 2019"),s.a.createElement("span",{className:"secondary"},this.getTotalCredits()," Credits")),s.a.createElement("div",{className:"scroller"},s.a.createElement("div",{className:g("courses-container",0===u&&"active")},a.length>0&&s.a.createElement(X.a,{className:"button",text:a.join(", ")},s.a.createElement("span",null,a.join(", "))),s.a.createElement("div",{className:"course-list"},c.map(function(t){return s.a.createElement(se,{courseId:t,expandable:!0,key:t,onSetOverlayCrns:e.handleSetOverlayCrns})})),s.a.createElement(ie,null)),s.a.createElement("div",{className:g("combinations-container",1===u&&"active")},a.length>0&&s.a.createElement("div",{className:"button",onClick:function(){return e.handleSetPinnedCrns([])}},"Reset Sections"),s.a.createElement(re,{className:"combinations",onSetOverlayCrns:this.handleSetOverlayCrns})),t&&s.a.createElement("div",{className:g("calendar-container",2===u&&"active")},s.a.createElement(ee,{overlayCrns:o}))),s.a.createElement("div",{className:"button",onClick:this.handleDownload},"Download as PNG"),s.a.createElement("a",{className:"button",href:"https://github.com/parkjs814/gt-scheduler",rel:"noopener noreferrer",target:"_blank"},"Fork me on GitHub")))}}]),t}(Q)),fe=Object(o.b)(function(e){return{env:e.env,db:e.db,user:e.user}},L)(pe),me=(n(82),Object(u.c)(Object(u.b)(r)));i.a.render(s.a.createElement(o.a,{store:me},s.a.createElement(fe,null)),document.getElementById("root"))}},[[39,2,1]]]);
//# sourceMappingURL=main.3bb01734.chunk.js.map