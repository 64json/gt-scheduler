{"version":3,"sources":["reducers/db.js","constants.js","utils.js","reducers/env.js","reducers/user.js","reducers/index.js","libs/ics.js","components/SemiPureComponent/index.jsx","components/ActionRow/index.jsx","components/Button/index.jsx","components/Calendar/index.jsx","components/CombinationsContainer/index.jsx","components/Course/index.jsx","components/CourseAdd/index.jsx","components/Instructor/index.jsx","components/Palette/index.jsx","components/TimeBlocks/index.jsx","beans/Oscar.js","beans/Course.js","beans/Section.js","components/App/index.jsx","index.js"],"names":["setOscar","createAction","concat","oscar","actions","handleActions","Object","defineProperty","combineActions","state","_ref","payload","objectSpread","DAYS","stringToTime","string","_$exec","exec","_$exec2","slicedToArray","hour","minute","Number","parseInt","timeToString","time","ampm","arguments","length","undefined","periodToString","period","start","end","getRandomColor","from","to","hex","i","component","Math","random","toString","getContentClassName","color","substring","classes","_len","classList","Array","_key","filter","c","join","isMobile","window","innerWidth","unique","array","toConsumableArray","Set","setMobile","mobile","defaultState","setTerm","term","loadData","setDesiredCourses","desiredCourses","setPinnedCrns","pinnedCrns","setExcludedCrns","excludedCrns","setColorMap","colorMap","Cookies","get","json","JSON","parse","e","_json","_json$desiredCourses","_json$pinnedCrns","_json$excludedCrns","_json$colorMap","forEach","courseId","deprecatedData","set","remove","_ref2","newState","_ref$desiredCourses","_ref$pinnedCrns","_ref$excludedCrns","_ref$colorMap","stringify","expires","saveData","dbActions","envActions","userActions","ics","uidDomain","prodId","navigator","userAgent","indexOf","SEPARATOR","appVersion","calendarEvents","calendarStart","calendarEnd","BYDAY_VALUES","events","calendar","addEvent","subject","description","location","begin","stop","rrule","freq","until","isNaN","Date","interval","count","byday","prototype","call","d","elem","pos","start_date","end_date","now_date","start_year","getFullYear","slice","start_month","getMonth","start_day","getDate","start_hours","getHours","start_minutes","getMinutes","start_seconds","getSeconds","end_year","end_month","end_day","end_hours","end_minutes","end_seconds","start_time","end_time","rruleString","now","uDate","toISOString","replace","calendarEvent","splice","push","download","filename","ext","blob","Blob","bb","BlobBuilder","append","getBlob","document","characterSet","saveAs","build","console","log","SemiPureComponent","nextProps","nextState","stateChanged","this","propsChanged","a","b","aKeys","keys","bKeys","every","key","shallowCompareEntries","props","Component","ActionRow","_this$props","className","children","restProps","objectWithoutProperties","react_default","createElement","assign","action","map","icon","style","backgroundColor","index_es","fixedWidth","rel","target","lib_default","Button","Calendar","overlayCrns","preview","empty","env","user","src","alt","fill","_","timeToShortString","day","crn","components_TimeBlocks","includes","overlay","connect","CombinationsContainer","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","sortingOptionIndex","sortingOptions","label","calculateFactor","combination","startMap","endMap","reduce","sum","min","ends","values","starts","db","memoizedGetCombinations","memoizeOne","getCombinations","bind","handleChangeSortingOptionIndex","assertThisInitialized","confirm","handleSetPinnedCrns","value","setState","_this2","onSetOverlayCrns","_this$props$user","combinations","sortingOption","sortedCombinations","factor","sort","components_Button","onClick","handleResetPinnedCrns","onChange","crns","onMouseEnter","onMouseLeave","components_Calendar","Course","expanded","paletteShown","handleSelectColor","course","id","sections","some","section","onAddCourse","_this$props$user2","_this$state","findCourse","textClassName","instructorMap","_section$instructors$","instructors","primaryInstructor","infoAction","faInfoCircle","href","number","components_ActionRow","faPlus","faAngleUp","faAngleDown","handleToggleExpanded","faPalette","handleTogglePaletteShown","faTrash","handleRemoveCourse","dangerouslySetInnerHTML","__html","title","components_Palette","onSelectColor","name","components_Instructor","CourseAdd","keyword","inputRef","React","createRef","handleChangeKeyword","handlePressEnter","preventDefault","courses","searchCourses","handleAddCourse","tbaCrns","meetings","meeting","days","current","focus","type","ref","placeholder","onKeyPress","components_Course","Instructor","_this$props$user3","_this$props$user4","instructorExcluded","instructorPinned","encodeURIComponent","tokens","split","shift","pop","simplifyName","faCheck","handleIncludeAll","faBan","handleExcludeAll","excluded","pinned","faTimes","faThumbtack","handleTogglePinned","handleToggleExcluded","Palette","colors","paletteColor","TimeBlocks","findSection","top","height","where","Oscar","data","dateRanges","dateRange","_dateRange$split$map","v","_dateRange$split$map2","setHours","courseMap","crnMap","toUpperCase","startsWith","crnsList","dfs","courseIndex","isIncluded","isPinned","hasConflict","section1","section2","meeting1","meeting2","hasLab","pinnedLectures","lectures","pinnedLabs","labs","lab","lecture","sectionGroups","sectionGroup","find","iterateTimeBlocks","callback","_this3","_data","_this$id$split","_this$id$split2","sectionId","Section","credits","distinct","groups","sectionGroupMeetings","sectionGroupHash","hash","dateRangeIndex","instructor","App","terms","tabIndex","captureRef","handleResize","handleSetOverlayCrns","handleExport","handleDownload","loadOscar","axios","then","res","reverse","recentTerm","handleChangeSemester","addEventListener","removeEventListener","nextMobile","cal","getDay","setDate","M","T","W","R","F","domtoimage","toPng","width","offsetWidth","offsetHeight","left","transform","transform-origin","_this4","tabTitle","handleChangeTab","year","semester","02","05","08","getTotalCredits","expandable","components_CourseAdd","components_CombinationsContainer","text","store","createStore","combineReducers","reducers","ReactDOM","render","es","components_App","getElementById"],"mappings":"omBAIMA,EAAWC,YAAY,GAAAC,OAFd,KAEc,cAAwB,SAAAC,GAAK,MAAK,CAAEA,WAEpDC,EAAU,CACrBJ,YAOaK,cAAcC,OAAAC,EAAA,EAAAD,CAAA,GAC1BE,YACCR,GACE,SAACS,EAADC,GAAA,IAAUC,EAAVD,EAAUC,QAAV,OAAAL,OAAAM,EAAA,EAAAN,CAAA,GACCG,EACAE,KATc,CACnBR,MAAO,sBCTHU,EAAO,CAAC,IAAK,IAAK,IAAK,IAAK,KCA5BC,EAAe,SAAAC,GAAU,IAAAC,EACE,2BAA2BC,KAAKF,GADlCG,EAAAZ,OAAAa,EAAA,EAAAb,CAAAU,EAAA,GACpBI,EADoBF,EAAA,GACdG,EADcH,EAAA,GAE7B,OAAgE,KAA9C,MAFWA,EAAA,GAEL,GAAK,GAAKI,OAAOC,SAASH,EAAO,KAAYE,OAAOC,SAASF,IAGjFG,EAAe,SAACC,GAAsB,IAAhBC,IAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GACpCP,EAAOK,EAAO,GAAK,EACnBJ,EAASI,EAAO,GACtB,SAAAvB,OAAUkB,EAAO,GAAKA,EAAO,GAAKA,EAAlC,KAAAlB,OAA0CmB,EAAS,GAAK,IAAMA,EAASA,GAAvEnB,OAAgFwB,EAAI,IAAAxB,OAAOkB,EAAO,GAAK,IAAM,IAAzB,KAAkC,KAQlHU,EAAiB,SAAAC,GAAM,OAAIA,EAAM,GAAA7B,OAAMsB,EAAaO,EAAOC,OAAO,GAAjC,OAAA9B,OAA6CsB,EAAaO,EAAOE,MAAS,OAE3GC,EAAiB,WAErB,IAF6C,IAAvBC,EAAuBR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAhB,EAAGS,EAAaT,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAR,IACjCU,EAAM,IACDC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMC,GAAaC,KAAKC,UAAYL,EAAKD,GAAQA,EAAO,GAAGO,SAAS,IACpEL,IAA6B,IAArBE,EAAUX,OAAe,IAAM,IAAMW,EAE/C,OAAOF,GAGHM,EAAsB,WAAuB,IAAtBC,EAAsBjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAd,UAInC,MAAW,KAHDJ,SAASqB,EAAMC,UAAU,EAAG,GAAI,IAGpB,KAFZtB,SAASqB,EAAMC,UAAU,EAAG,GAAI,IAET,KADvBtB,SAASqB,EAAMC,UAAU,EAAG,GAAI,IACF,IAAM,eAAiB,iBAU3DC,EAAU,mBAAAC,EAAApB,UAAAC,OAAIoB,EAAJ,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAIF,EAAJE,GAAAvB,UAAAuB,GAAA,OAAkBF,EAAUG,OAAO,SAAAC,GAAC,OAAIA,IAAGC,KAAK,MAE1DC,EAAW,kBAAMC,OAAOC,WAAa,KAerCC,EAAS,SAAAC,GAAK,OAAApD,OAAAqD,EAAA,EAAArD,CAAQ,IAAIsD,IAAIF,KCvD9BG,EAAY5D,YAAY,GAAAC,OAFf,MAEe,eAAyB,SAAA4D,GAAM,MAAK,CAAEA,YAEvD1D,EAAU,CACrByD,aAGIE,EAAe,CACnBD,OAAQR,KAGKjD,cAAcC,OAAAC,EAAA,EAAAD,CAAA,GAC1BE,YACCqD,GACE,SAACpD,EAADC,GAAA,IAAUC,EAAVD,EAAUC,QAAV,OAAAL,OAAAM,EAAA,EAAAN,CAAA,GACCG,EACAE,KAEJoD,oBChBGC,EAAU/D,YAAY,GAAAC,OAFb,OAEa,aAAuB,SAAA+D,GAAI,OAAIC,EAASD,KAC9DE,EAAoBlE,YAAY,GAAAC,OAHvB,OAGuB,wBAAkC,SAAAkE,GAAc,MAAK,CAAEA,oBACvFC,EAAgBpE,YAAY,GAAAC,OAJnB,OAImB,oBAA8B,SAAAoE,GAAU,MAAK,CAAEA,gBAC3EC,EAAkBtE,YAAY,GAAAC,OALrB,OAKqB,sBAAgC,SAAAsE,GAAY,MAAK,CAAEA,kBACjFC,EAAcxE,YAAY,GAAAC,OANjB,OAMiB,kBAA4B,SAAAwE,GAAQ,MAAK,CAAEA,cAE9DtE,EAAU,CACrB4D,UACAG,oBACAE,gBACAE,kBACAE,eAQIP,EAAW,WAAgC,IAA/BD,EAA+BtC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxBgD,IAAQC,IAAI,QAC/BC,EAAO,KACX,IACEA,EAAOC,KAAKC,MAAMJ,IAAQC,IAAIX,IAC9B,MAAOe,GACPH,EAAO,GALsC,IAAAI,EAOoCJ,EAPpCK,EAAAD,EAOvCb,sBAPuC,IAAAc,EAOtB,GAPsBA,EAAAC,EAAAF,EAOlBX,kBAPkB,IAAAa,EAOL,GAPKA,EAAAC,EAAAH,EAODT,oBAPC,IAAAY,EAOc,GAPdA,EAAAC,EAAAJ,EAOkBP,gBAPlB,IAAAW,EAO6B,GAP7BA,EAa/C,OALAjB,EAAekB,QAAQ,SAAAC,GACfA,KAAYb,IAChBA,EAASa,GAAYrD,OAGlB,CAAE+B,OAAMG,iBAAgBE,aAAYE,eAAcE,cAG3D,WACE,IAAMc,EAAiBb,IAAQC,IAAI,QAC/BY,IACFb,IAAQc,IAAI,OAAQ,UACpBd,IAAQc,IAAI,SAAUD,GACtBb,IAAQe,OAAO,SALnB,GAQA,IAAM3B,EAAeG,IAEN7D,cAAcC,OAAAC,EAAA,EAAAD,CAAA,GAC1BE,YACCwD,EACAG,EACAE,EACAE,EACAE,GACE,SAAChE,EAADkF,GAAwB,IAAdhF,EAAcgF,EAAdhF,QACNiF,EAAQtF,OAAAM,EAAA,EAAAN,CAAA,GACTG,EACAE,GAGL,OA5Ca,SAAAD,GAAsF,IAAnFuD,EAAmFvD,EAAnFuD,KAAmF4B,EAAAnF,EAA7E0D,sBAA6E,IAAAyB,EAA5D,GAA4DA,EAAAC,EAAApF,EAAxD4D,kBAAwD,IAAAwB,EAA3C,GAA2CA,EAAAC,EAAArF,EAAvC8D,oBAAuC,IAAAuB,EAAxB,GAAwBA,EAAAC,EAAAtF,EAApBgE,gBAAoB,IAAAsB,EAAT,GAASA,EACrGrB,IAAQc,IAAI,OAAQxB,GACpBU,IAAQc,IAAIxB,EAAMa,KAAKmB,UAAU,CAAE7B,iBAAgBE,aAAYE,eAAcE,aAAa,CAAEwB,QAAS,MAyCnGC,CAASP,GACFA,IAER7B,GC1DU3D,EAAOE,OAAAM,EAAA,EAAAN,CAAA,GACf8F,EACAC,EACAC,oGC0OUC,GAlPH,SAAUC,EAAWC,GAG/B,KAAIC,UAAUC,UAAUC,QAAQ,SAAW,IAAgD,GAA3CF,UAAUC,UAAUC,QAAQ,YAA5E,CAKyB,qBAAdJ,IACTA,EAAY,WAEQ,qBAAXC,IACTA,EAAS,YAGX,IAAII,GAAsD,IAAzCH,UAAUI,WAAWF,QAAQ,OAAiB,OAAS,KACpEG,EAAiB,GACjBC,EAAgB,CAClB,kBACA,UAAYP,EACZ,eACApD,KAAKwD,GACHI,EAAcJ,EAAY,gBAC1BK,EAAe,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAExD,MAAO,CAKLC,OAAU,WACR,OAAOJ,GAOTK,SAAY,WACV,OAAOJ,EAAgBH,EAAYE,EAAe1D,KAAKwD,GAAaI,GAWtEI,SAAY,SAAUC,EAASC,EAAaC,EAAUC,EAAOC,EAAMC,GAEjE,GAAuB,qBAAZL,GACc,qBAAhBC,GACa,qBAAbC,GACU,qBAAVC,GACS,qBAATC,EAEP,OAAO,EAIT,GAAIC,IACGA,EAAMA,MAAO,CAChB,GAAmB,WAAfA,EAAMC,MAAoC,YAAfD,EAAMC,MAAqC,WAAfD,EAAMC,MAAoC,UAAfD,EAAMC,KAC1F,KAAM,qHAGR,GAAID,EAAME,OACJC,MAAMC,KAAKhD,MAAM4C,EAAME,QACzB,KAAM,uDAIV,GAAIF,EAAMK,UACJF,MAAMvG,SAASoG,EAAMK,WACvB,KAAM,iDAIV,GAAIL,EAAMM,OACJH,MAAMvG,SAASoG,EAAMM,QACvB,KAAM,8CAIV,GAA2B,qBAAhBN,EAAMO,MAAuB,CACtC,GAAqD,mBAAhD5H,OAAO6H,UAAUzF,SAAS0F,KAAKT,EAAMO,OACxC,KAAM,4CAGR,GAAIP,EAAMO,MAAMtG,OAAS,EACvB,KAAM,8EAQR,IAAK,IAAIyG,KAJTV,EAAMO,MAAQP,EAAMO,MAAM/E,OAAO,SAAUmF,EAAMC,GAC/C,OAAOZ,EAAMO,MAAMtB,QAAQ0B,IAASC,IAGxBZ,EAAMO,MAClB,GAAIhB,EAAaN,QAAQe,EAAMO,MAAMG,IAAM,EACzC,KAAM,6GAQhB,IAAIG,EAAa,IAAIT,KAAKN,GACtBgB,EAAW,IAAIV,KAAKL,GACpBgB,EAAW,IAAIX,KAEfY,GAAc,OAAUH,EAAWI,cAAclG,YAAamG,OAAO,GACrEC,GAAe,MAASN,EAAWO,WAAa,GAAGrG,YAAamG,OAAO,GACvEG,GAAa,KAASR,EAAWS,UAAWvG,YAAamG,OAAO,GAChEK,GAAe,KAAQV,EAAWW,WAAWzG,YAAamG,OAAO,GACjEO,GAAiB,KAAQZ,EAAWa,aAAa3G,YAAamG,OAAO,GACrES,GAAiB,KAAQd,EAAWe,aAAa7G,YAAamG,OAAO,GAErEW,GAAY,OAAUf,EAASG,cAAclG,YAAamG,OAAO,GACjEY,GAAa,MAAShB,EAASM,WAAa,GAAGrG,YAAamG,OAAO,GACnEa,GAAW,KAASjB,EAASQ,UAAWvG,YAAamG,OAAO,GAC5Dc,GAAa,KAAQlB,EAASU,WAAWzG,YAAamG,OAAO,GAC7De,GAAe,KAAQnB,EAASY,aAAa3G,YAAamG,OAAO,GACjEgB,GAAe,KAAQpB,EAASc,aAAa7G,YAAamG,OAAO,GAUjEiB,EAAa,GACbC,EAAW,GACXb,EAAcE,EAAgBE,EAAgBK,EAAYC,EAAcC,GAAe,IACzFC,EAAa,IAAMZ,EAAcE,EAAgBE,EACjDS,EAAW,IAAMJ,EAAYC,EAAcC,GAE7C,IAOIG,EALAhI,EAAQ2G,EAAaG,EAAcE,EAAYc,EAC/C7H,EAAMuH,EAAWC,EAAYC,EAAUK,EACvCE,GAlBY,OAAUvB,EAASE,cAAclG,YAAamG,OAAO,IACpD,MAASH,EAASK,WAAa,GAAGrG,YAAamG,OAAO,IACxD,KAASH,EAASO,UAAWvG,YAAamG,OAAO,GAYjD,KAXE,KAAQH,EAASS,WAAWzG,YAAamG,OAAO,IAC9C,KAAQH,EAASW,aAAa3G,YAAamG,OAAO,IAClD,KAAQH,EAASa,aAAa7G,YAAamG,OAAO,GAiBrE,GAAIlB,EACF,GAAIA,EAAMA,MACRqC,EAAcrC,EAAMA,UACf,CAGL,GAFAqC,EAAc,cAAgBrC,EAAMC,KAEhCD,EAAME,MAAO,CACf,IAAIqC,EAAQ,IAAInC,KAAKA,KAAKhD,MAAM4C,EAAME,QAAQsC,cAC9CH,GAAe,UAAYE,EAAMrH,UAAU,EAAGqH,EAAMtI,OAAS,IAAIwI,QAAQ,OAAQ,IAAM,UAGrFzC,EAAMK,WACRgC,GAAe,aAAerC,EAAMK,UAGlCL,EAAMM,QACR+B,GAAe,UAAYrC,EAAMM,OAG/BN,EAAMO,OAASP,EAAMO,MAAMtG,OAAS,IACtCoI,GAAe,UAAYrC,EAAMO,MAAM7E,KAAK,OAKtC,IAAI0E,MAAOoC,cAAvB,IAEIE,EAAgB,CAClB,eACA,OAAStD,EAAenF,OAAS,IAAM4E,EACvC,eACA,eAAiBe,EACjB,2BAA6B0C,EAC7B,2BAA6BjI,EAC7B,yBAA2BC,EAC3B,YAAcuF,EACd,0BAA4BF,EAC5B,qBACA,cAUF,OAPI0C,GACFK,EAAcC,OAAO,EAAG,EAAGN,GAG7BK,EAAgBA,EAAchH,KAAKwD,GAEnCE,EAAewD,KAAKF,GACbA,GAQTG,SAAY,SAAUC,EAAUC,GAC9B,GAAI3D,EAAenF,OAAS,EAC1B,OAAO,EAGT8I,EAAsB,qBAARA,EAAuBA,EAAM,OAC3CD,EAAgC,qBAAbA,EAA4BA,EAAW,WAC1D,IAEIE,EAFAvD,EAAWJ,EAAgBH,EAAYE,EAAe1D,KAAKwD,GAAaI,EAG5E,IAAgD,IAA5CP,UAAUC,UAAUC,QAAQ,WAC9B+D,EAAO,IAAIC,KAAK,CAACxD,QACZ,CACL,IAAIyD,EAAK,IAAIC,YACbD,EAAGE,OAAO3D,GACVuD,EAAOE,EAAGG,QAAQ,4BAA8BC,SAASC,cAG3D,OADAC,OAAOR,EAAMF,EAAWC,GACjBtD,GAMTgE,MAAS,WACP,QAAIrE,EAAenF,OAAS,IAIboF,EAAgBH,EAAYE,EAAe1D,KAAKwD,GAAaI,IAvO9EoE,QAAQC,IAAI,wBCIDC,iMAPSC,EAAWC,GAC/B,IAAMC,EAAeC,KAAKlL,QAAUgL,EAC9BG,GLyCoB,SAACC,EAAGC,GAChC,IAAMC,EAAQzL,OAAO0L,KAAKH,GACpBI,EAAQ3L,OAAO0L,KAAKF,GAC1B,OAAOC,EAAMnK,SAAWqK,EAAMrK,QAAUmK,EAAMG,MAAM,SAAAC,GAAG,OAAIA,KAAOL,GAAKD,EAAEM,KAASL,EAAEK,KK5C5DC,CAAsBT,KAAKU,MAAOb,GACxD,OAAOE,GAAgBE,SAJKU,2DCuCjBC,oLAnCJ,IAAAC,EACuDb,KAAKU,MAA3DI,EADDD,EACCC,UAAWC,EADZF,EACYE,SAAUtM,EADtBoM,EACsBpM,QAASwC,EAD/B4J,EAC+B5J,MAAU+J,EADzCrM,OAAAsM,GAAA,EAAAtM,CAAAkM,EAAA,4CAGP,OACEK,EAAAhB,EAAAiB,cAAA,MAAAxM,OAAAyM,OAAA,CAAKN,UAAW3J,EAAQ,YAAa2J,IAAgBE,GAClDD,EACDG,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,UAAW,YAE/B1C,EAAQ+C,OAAO,SAAA6J,GAAM,OAAIA,IAAQC,IAAI,SAAAvM,EAAoC4B,GAAM,IAAvCmK,EAAuC/L,EAAvC+L,UAAWS,EAA4BxM,EAA5BwM,KAASP,EAAmBrM,OAAAsM,GAAA,EAAAtM,CAAAI,EAAA,sBACvE2L,EAAK/L,OAAAM,EAAA,EAAAN,CAAA,CACT6L,IAAK7J,EACLmK,UAAW3J,EAAQ,SAAU2J,GAC7BC,SACEG,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,OAAOU,MAAO,CAAEC,gBAAiBxK,IAC9CiK,EAAAhB,EAAAiB,cAACO,GAAA,EAAD,CAAiBC,YAAU,EAACJ,KAAMA,MAGnCP,GAEL,MAAO,SAAUN,EACfQ,EAAAhB,EAAAiB,cAAA,IAAAxM,OAAAyM,OAAA,GAAOV,EAAP,CAAckB,IAAI,sBAAsBC,OAAO,YAC7C,SAAUnB,EACZQ,EAAAhB,EAAAiB,cAACW,GAAA5B,EAAoBQ,GAErBQ,EAAAhB,EAAAiB,cAAA,MAAST,cAzBDC,aCmBToB,2LAnBJ,IAAAlB,EAC6Bb,KAAKU,MAAjCI,EADDD,EACCC,UAAcE,EADfrM,OAAAsM,GAAA,EAAAtM,CAAAkM,EAAA,eAGDH,EAAK/L,OAAAM,EAAA,EAAAN,CAAA,CACTmM,UAAW3J,EAAQ,SAAU2J,IAC1BE,GAGL,MAAO,SAAUN,EACfQ,EAAAhB,EAAAiB,cAAA,IAAAxM,OAAAyM,OAAA,GAAOV,EAAP,CAAckB,IAAI,sBAAsBC,OAAO,YAC7C,SAAUnB,EACZQ,EAAAhB,EAAAiB,cAACW,GAAA5B,EAAoBQ,GAErBQ,EAAAhB,EAAAiB,cAAA,MAAST,UAdMC,cCGfqB,2LACK,IAAAnB,EAC4Cb,KAAKU,MAAhDI,EADDD,EACCC,UAAWmB,EADZpB,EACYoB,YAAaC,EADzBrB,EACyBqB,QAASC,EADlCtB,EACkCsB,MACjChK,EAAW6H,KAAKU,MAAM0B,IAAtBjK,OACAQ,EAAeqH,KAAKU,MAAM2B,KAA1B1J,WAER,OACEuI,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,WAAYgB,GAAU,SAAU+J,GAAW,UAAWpB,IAE1EoB,GACAhB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,QAAQwB,IAAI,UAAUC,IAAI,MAGxCL,GACDhB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,SAEX,IAAIxJ,MAAM,IAAqBkL,KAAK,GAAGlB,IAAI,SAACmB,EAAG9L,GAC7C,IAAMb,ETzBT,ISyB2B,GAAJa,EACpB,OACEuK,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,OAAON,IAAK1K,GACzBoL,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,SRfV,SAAAhL,GACxB,IAAML,EAAOK,EAAO,GAAK,EACzB,SAAAvB,OAAUkB,EAAO,GAAKA,EAAO,GAAKA,GAAlClB,OAAyCkB,EAAO,GAAK,IAAM,IAA3D,KQcqBiN,CAAkB5M,SAS9BoM,GACDhB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,QAEX5L,EAAKoM,IAAI,SAAAqB,GAAG,OACVzB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,MAAMN,IAAKmC,GACtBzB,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,SACb6B,QAQZR,GACDjB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,YAEXnI,EAAW2I,IAAI,SAAAsB,GAAG,OAChB1B,EAAAhB,EAAAiB,cAAC0B,GAAD,CAAYrC,IAAKoC,EAAKA,IAAKA,EAAKV,QAASA,MAI3CD,GACAA,EAAYzK,OAAO,SAAAoL,GAAG,OAAKjK,EAAWmK,SAASF,KAAMtB,IAAI,SAAAsB,GAAG,OAC1D1B,EAAAhB,EAAAiB,cAAC0B,GAAD,CAAYrC,IAAKoC,EAAKA,IAAKA,EAAKG,SAAUb,EAASA,QAASA,eAtDrDtC,KAiERoD,eAAQ,SAAAjO,GAAA,MAAoB,CAAEqN,IAAtBrN,EAAGqN,IAAwBC,KAA3BtN,EAAQsN,OAA4B5N,EAA5CuO,CAAqDhB,aCjE9DiB,sBACJ,SAAAA,EAAYvC,GAAO,IAAAwC,EAAAvO,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAAiD,IACjBC,EAAAvO,OAAAyO,EAAA,EAAAzO,CAAAqL,KAAArL,OAAA0O,EAAA,EAAA1O,CAAAsO,GAAAxG,KAAAuD,KAAMU,KAED5L,MAAQ,CACXwO,mBAAoB,GAGtBJ,EAAKK,eAAiB,CAAC,CACrBC,MAAO,eACPC,gBAAiB,SAAAC,GAAe,IACtBC,EAAqBD,EAArBC,SAAUC,EAAWF,EAAXE,OAGlB,OAFcjP,OAAO0L,KAAKsD,GAAUrC,IAAI,SAAAqB,GAAG,OAAIiB,EAAOjB,GAAOgB,EAAShB,KACpDkB,OAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,GAAK,KAGnD,CACDP,MAAO,kBACPC,gBAAiB,SAAAC,GAAe,IACtBE,EAAWF,EAAXE,OACFI,EAAOrP,OAAOsP,OAAOL,GAG3B,QAFYI,EAAKH,OAAO,SAACC,EAAKxN,GAAN,OAAcwN,EAAMxN,GAAK,GAC/B0N,EAAK/N,UAGxB,CACDuN,MAAO,mBACPC,gBAAiB,SAAAC,GAAe,IACtBC,EAAaD,EAAbC,SACFO,EAASvP,OAAOsP,OAAON,GAG7B,QAFYO,EAAOL,OAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,GAAK,GACjCG,EAAOjO,WA9BZ,IAmCTzB,EAAU0O,EAAKxC,MAAMyD,GAArB3P,MAnCS,OAqCjB0O,EAAKkB,wBAA0BC,aAAW7P,EAAM8P,gBAAgBC,KAAK/P,IACrE0O,EAAKsB,+BAAiCtB,EAAKsB,+BAA+BD,KAApC5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KAtCrBA,mFAyCCvK,GAClBqH,KAAKU,MAAMhI,cAAcC,mDAIrBf,OAAO8M,QAAQ,iDACjB1E,KAAK2E,oBAAoB,2DAIEtL,GAC7B,IAAMiK,EAAqBjK,EAAEwI,OAAO+C,MACpC5E,KAAK6E,SAAS,CAAEvB,wDAGT,IAAAwB,EAAA9E,KAAAa,EACiCb,KAAKU,MAArCI,EADDD,EACCC,UAAWiE,EADZlE,EACYkE,iBADZC,EAE8ChF,KAAKU,MAAM2B,KAAxD5J,EAFDuM,EAECvM,eAAgBE,EAFjBqM,EAEiBrM,WAAYE,EAF7BmM,EAE6BnM,aAC5ByK,EAAuBtD,KAAKlL,MAA5BwO,mBAEF2B,EAAejF,KAAKoE,wBAAwB3L,EAAgBE,EAAYE,GACxEqM,EAAgBlF,KAAKuD,eAAeD,GACpC6B,EAAqBF,EAAa3D,IAAI,SAAAoC,GAAW,OAAA/O,OAAAM,EAAA,EAAAN,CAAA,GAClD+O,EADkD,CAErD0B,OAAQF,EAAczB,gBAAgBC,OACpC2B,KAAK,SAACnF,EAAGC,GAAJ,OAAUD,EAAEkF,OAASjF,EAAEiF,SAEhC,OACElE,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,wBAAyB2J,IAE7CnI,EAAW1C,OAAS,GACpBiL,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQC,QAAS,kBAAMT,EAAKU,0BAA5B,kBAIFtE,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQxE,UAAU,kBAChBI,EAAAhB,EAAAiB,cAAA,UAAQsE,SAAUzF,KAAKwE,+BAAgCI,MAAOtB,GAE1DtD,KAAKuD,eAAejC,IAAI,SAAC4D,EAAevO,GAAhB,OACtBuK,EAAAhB,EAAAiB,cAAA,UAAQX,IAAK7J,EAAGiO,MAAOjO,GAAIuO,EAAc1B,WAKjDtC,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,gBAEXqE,EAAmB7D,IAAI,SAAAvM,EAAW4B,GAAX,IAAG+O,EAAH3Q,EAAG2Q,KAAH,OACrBxE,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,cAAcN,IAAK7J,EAC7BgP,aAAc,kBAAMZ,EAAiBW,IACrCE,aAAc,kBAAMb,EAAiB,KACrCQ,QAAS,kBAAMT,EAAKH,oBAALhQ,OAAAqD,EAAA,EAAArD,CAA6BgE,GAA7BpE,OAAAI,OAAAqD,EAAA,EAAArD,CAA4C+Q,OAC9DxE,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,UAAUnK,EAAI,GAC7BuK,EAAAhB,EAAAiB,cAAC0E,GAAD,CAAU/E,UAAU,UAAUmB,YAAayD,EAAMxD,SAAO,gBA9FpCtC,KAyGrBoD,eAAQ,SAAAhJ,GAAA,MAAmB,CAAEmK,GAArBnK,EAAGmK,GAAsB9B,KAAzBrI,EAAOqI,OAA2B5N,EAA1CuO,CAAmDC,aCzG5D6C,sBACJ,SAAAA,EAAYpF,GAAO,IAAAwC,EAAA,OAAAvO,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAA8F,IACjB5C,EAAAvO,OAAAyO,EAAA,EAAAzO,CAAAqL,KAAArL,OAAA0O,EAAA,EAAA1O,CAAAmR,GAAArJ,KAAAuD,KAAMU,KAED5L,MAAQ,CACXiR,UAAU,EACVC,cAAc,GAGhB9C,EAAK+C,kBAAoB/C,EAAK+C,kBAAkB1B,KAAvB5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KARRA,kFAWAgD,GAAQ,IAAAlB,EACsChF,KAAKU,MAAM2B,KAAlE5J,EADiBuM,EACjBvM,eAAgBE,EADCqM,EACDrM,WAAYE,EADXmM,EACWnM,aAAcE,EADzBiM,EACyBjM,SAClDiH,KAAKU,MAAMlI,kBAAkBC,EAAejB,OAAO,SAAAoC,GAAQ,OAAIA,IAAasM,EAAOC,MACnFnG,KAAKU,MAAMhI,cAAcC,EAAWnB,OAAO,SAAAoL,GAAG,OAAKsD,EAAOE,SAASC,KAAK,SAAAC,GAAO,OAAIA,EAAQ1D,MAAQA,OACnG5C,KAAKU,MAAM9H,gBAAgBC,EAAarB,OAAO,SAAAoL,GAAG,OAAKsD,EAAOE,SAASC,KAAK,SAAAC,GAAO,OAAIA,EAAQ1D,MAAQA,OACvG5C,KAAKU,MAAM5H,YAAXnE,OAAAM,EAAA,EAAAN,CAAA,GAA4BoE,EAA5BpE,OAAAC,EAAA,EAAAD,CAAA,GAAuCuR,EAAOC,QAAKjQ,oDAGC,IAAjC6P,EAAiC/P,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAArBgK,KAAKlL,MAAMiR,SAC1C/F,KAAK6E,SAAS,CAAEkB,uDAGA9O,GAAO,IACf2C,EAAaoG,KAAKU,MAAlB9G,SACAb,EAAaiH,KAAKU,MAAM2B,KAAxBtJ,SACRiH,KAAKU,MAAM5H,YAAXnE,OAAAM,EAAA,EAAAN,CAAA,GAA4BoE,EAA5BpE,OAAAC,EAAA,EAAAD,CAAA,GAAuCiF,EAAW3C,wDAGc,IAAzC+O,EAAyChQ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAAzBgK,KAAKlL,MAAMkR,aAClDhG,KAAK6E,SAAS,CAAEmB,kDAGT,IAAAlB,EAAA9E,KAAAa,EACwDb,KAAKU,MAA5DI,EADDD,EACCC,UAAWlH,EADZiH,EACYjH,SAAU2M,EADtB1F,EACsB0F,YAAaxB,EADnClE,EACmCkE,iBAClCvQ,EAAUwL,KAAKU,MAAMyD,GAArB3P,MAFDgS,EAGgCxG,KAAKU,MAAM2B,KAA1C/J,EAHDkO,EAGClO,KAAMK,EAHP6N,EAGO7N,WAAYI,EAHnByN,EAGmBzN,SAHnB0N,EAI4BzG,KAAKlL,MAAhCiR,EAJDU,EAICV,SAAUC,EAJXS,EAIWT,aAEZE,EAAS1R,EAAMkS,WAAW9M,GAC1B3C,EAAQ8B,EAASmN,EAAOC,IACxBQ,EAAgB3P,EAAoBC,GAEpC2P,EAAgB,GACtBV,EAAOE,SAASzM,QAAQ,SAAA2M,GAAW,IAAAO,EAAAlS,OAAAa,EAAA,EAAAb,CACY2R,EAAQQ,YADpB,MAC1BC,OAD0B,IAAAF,EACN,eADMA,EAE3BE,KAAqBH,IACzBA,EAAcG,GAAqB,IAErCH,EAAcG,GAAmBnI,KAAK0H,KAGxC,IAAMU,EAAa,CACjBzF,KAAM0F,KACNC,KAAI,gFAAA3S,OAAkF+D,EAAlF,kBAAA/D,OAAuG2R,EAAOvK,QAA9G,kBAAApH,OAAsI2R,EAAOiB,SAInJ,OACEjG,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,SAAUwP,EAAe,UAAW7F,GAAYU,MAAO,CAAEC,gBAAiBxK,GAC7FuJ,IAAK0F,EAAOC,IACfjF,EAAAhB,EAAAiB,cAACiG,GAAD,CAAWtG,UAAW3J,EAAQ,gBAAiB4O,GAAY,kBAAmBtR,QAAS8R,EAAc,CACnG,CAAEhF,KAAM8F,KAAQ9B,QAASgB,GACzBS,GACE,CACF,CAAEzF,KAAMwE,EAAWuB,KAAYC,KAAahC,QAAS,kBAAMT,EAAK0C,yBAChER,EACA,CAAEzF,KAAMkG,KAAWlC,QAAS,kBAAMT,EAAK4C,6BACvC,CAAEnG,KAAMoG,KAASpC,QAAS,kBAAMT,EAAK8C,mBAAmB1B,MACvDjP,MAAOA,GACRiK,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,OACbI,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,aAAaoF,EAAOC,IACpCjF,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,eACboF,EAAOE,SAAS5O,OAAO,SAAA8O,GAAO,OAAI3N,EAAWmK,SAASwD,EAAQ1D,OAAMtB,IAAI,SAAAgF,GAAO,OAAIA,EAAQH,KAAIzO,KAAK,QAGzGwJ,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,OACbI,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,eAAe+G,wBAAyB,CAAEC,OAAQ5B,EAAO6B,SACzE7G,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,gBACboF,EAAOE,SAAS5O,OAAO,SAAA8O,GAAO,OAAI3N,EAAWmK,SAASwD,EAAQ1D,OAAMtB,IAAI,SAAAgF,GAAO,OAAIA,EAAQ1D,MAAKlL,KAAK,QAIxGsO,GACA9E,EAAAhB,EAAAiB,cAAC6G,GAAD,CAASlH,UAAU,UAAUmH,cAAejI,KAAKiG,kBAAmBhP,MAAOA,EAClE2O,aAAc,kBAAMd,EAAK4C,0BAAyB,OAI7D3B,GACA7E,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,eAEXnM,OAAO0L,KAAKuG,GAAetF,IAAI,SAAA4G,GAAI,OACjChH,EAAAhB,EAAAiB,cAACgH,GAAD,CAAY3H,IAAK0H,EAAMjR,MAAOA,EAAOiR,KAAMA,EAAM9B,SAAUQ,EAAcsB,GAC7DnD,iBAAkBA,eA/FzBnF,KA0GNoD,eAAQ,SAAAjO,GAAA,MAAmB,CAAEoP,GAArBpP,EAAGoP,GAAsB9B,KAAzBtN,EAAOsN,OAA2B5N,EAA1CuO,CAAmD8C,IC3G5DsC,sBACJ,SAAAA,EAAY1H,GAAO,IAAAwC,EAAA,OAAAvO,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAAoI,IACjBlF,EAAAvO,OAAAyO,EAAA,EAAAzO,CAAAqL,KAAArL,OAAA0O,EAAA,EAAA1O,CAAAyT,GAAA3L,KAAAuD,KAAMU,KAED5L,MAAQ,CACXuT,QAAS,IAGXnF,EAAKoF,SAAWC,IAAMC,YAEtBtF,EAAKuF,oBAAsBvF,EAAKuF,oBAAoBlE,KAAzB5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KAC3BA,EAAKwF,iBAAmBxF,EAAKwF,iBAAiBnE,KAAtB5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KAVPA,mFAaC7J,GAClB,IAAMgP,EAAUhP,EAAEwI,OAAO+C,MACzB5E,KAAK6E,SAAS,CAAEwD,qDAGDhP,GAAG,IACV7E,EAAUwL,KAAKU,MAAMyD,GAArB3P,MACA6T,EAAYrI,KAAKlL,MAAjBuT,QAER,GAAc,UAAVhP,EAAEmH,IAAiB,CACrBnH,EAAEsP,iBACF,IAAMC,EAAUpU,EAAMqU,cAAcR,GAChCO,EAAQ3S,QAAQ+J,KAAK8I,gBAAgBF,EAAQ,6CAIrC1C,GAAQ,IAAAlB,EAC6BhF,KAAKU,MAAM2B,KAAtD5J,EADcuM,EACdvM,eAAgBI,EADFmM,EACEnM,aAAcE,EADhBiM,EACgBjM,SACtC,IAAIN,EAAeqK,SAASoD,EAAOC,IAAnC,CACA,IAAM4C,EAAU7C,EAAOE,SACpB5O,OAAO,SAAA8O,GAAO,OAAKA,EAAQ0C,SAAS/S,QAAUqQ,EAAQ0C,SAAS3C,KAAK,SAAA4C,GAAO,OAAKA,EAAQC,KAAKjT,SAAWgT,EAAQ7S,WAChHkL,IAAI,SAAAgF,GAAO,OAAIA,EAAQ1D,MAC1B5C,KAAKU,MAAMlI,kBAAX7D,OAAAqD,EAAA,EAAArD,CAAiC8D,GAAjClE,OAAA,CAAiD2R,EAAOC,MACxDnG,KAAKU,MAAM9H,gBAAXjE,OAAAqD,EAAA,EAAArD,CAA+BkE,GAA/BtE,OAAAI,OAAAqD,EAAA,EAAArD,CAAgDoU,KAChD/I,KAAKU,MAAM5H,YAAXnE,OAAAM,EAAA,EAAAN,CAAA,GAA4BoE,EAA5BpE,OAAAC,EAAA,EAAAD,CAAA,GAAuCuR,EAAOC,GAAK5P,OAEnDyJ,KAAK6E,SAAS,CAAEwD,QAAS,KACzBrI,KAAKsI,SAASa,QAAQC,0CAGf,IAAAtE,EAAA9E,KACCc,EAAcd,KAAKU,MAAnBI,UACAtM,EAAUwL,KAAKU,MAAMyD,GAArB3P,MAFDgS,EAGgCxG,KAAKU,MAAM2B,KAA1C5J,EAHD+N,EAGC/N,eAAgBE,EAHjB6N,EAGiB7N,WAChB0P,EAAYrI,KAAKlL,MAAjBuT,QAER,OACEnH,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,YAAa2J,IACnCI,EAAAhB,EAAAiB,cAAA,SAAOkI,KAAK,OAAOC,IAAKtJ,KAAKsI,SAAU1D,MAAOyD,EAAS5C,SAAUzF,KAAKyI,oBAC/D3H,UAAU,UACVyI,YAAY,UAAUC,WAAYxJ,KAAK0I,mBAC9CxH,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,gBAEXtM,EAAMqU,cAAcR,GAAS7Q,OAAO,SAAA0O,GAAM,OAAKzN,EAAeqK,SAASoD,EAAOC,MAAK7E,IAAI,SAAA4E,GAAM,OAC3FhF,EAAAhB,EAAAiB,cAACsI,GAAD,CAAQjJ,IAAK0F,EAAOC,GAAIvM,SAAUsM,EAAOC,GAAIxN,WAAYA,EACjD4N,YAAa,kBAAMzB,EAAKgE,gBAAgB5C,iBA3DtCtG,KAqEToD,eAAQ,SAAAjO,GAAA,MAAmB,CAAEoP,GAArBpP,EAAGoP,GAAsB9B,KAAzBtN,EAAOsN,OAA2B5N,EAA1CuO,CAAmDoF,IC5D5DsB,sBACJ,SAAAA,EAAYhJ,GAAO,IAAAwC,EAAA,OAAAvO,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAA0J,IACjBxG,EAAAvO,OAAAyO,EAAA,EAAAzO,CAAAqL,KAAArL,OAAA0O,EAAA,EAAA1O,CAAA+U,GAAAjN,KAAAuD,KAAMU,KAED5L,MAAQ,CACXiR,UAAU,GAJK7C,kFAQAoD,GAAS,IAAAtB,EACWhF,KAAKU,MAAM2B,KAAxC1J,EADkBqM,EAClBrM,WAAYE,EADMmM,EACNnM,aAChBF,EAAWmK,SAASwD,EAAQ1D,KAC9B5C,KAAKU,MAAMhI,cAAcC,EAAWnB,OAAO,SAAAoL,GAAG,OAAIA,IAAQ0D,EAAQ1D,QAElE5C,KAAKU,MAAMhI,cAAX/D,OAAAqD,EAAA,EAAArD,CAA6BgE,GAA7BpE,OAAA,CAAyC+R,EAAQ1D,OACjD5C,KAAKU,MAAM9H,gBAAgBC,EAAarB,OAAO,SAAAoL,GAAG,OAAIA,IAAQ0D,EAAQ1D,qDAIrD0D,GAAS,IAAAE,EACSxG,KAAKU,MAAM2B,KAAxC1J,EADoB6N,EACpB7N,WAAYE,EADQ2N,EACR3N,aAChBA,EAAaiK,SAASwD,EAAQ1D,KAChC5C,KAAKU,MAAM9H,gBAAgBC,EAAarB,OAAO,SAAAoL,GAAG,OAAIA,IAAQ0D,EAAQ1D,QAEtE5C,KAAKU,MAAM9H,gBAAXjE,OAAAqD,EAAA,EAAArD,CAA+BkE,GAA/BtE,OAAA,CAA6C+R,EAAQ1D,OACrD5C,KAAKU,MAAMhI,cAAcC,EAAWnB,OAAO,SAAAoL,GAAG,OAAIA,IAAQ0D,EAAQ1D,mDAInD,IACTwD,EAAapG,KAAKU,MAAlB0F,SADSuD,EAEoB3J,KAAKU,MAAM2B,KAAxC1J,EAFSgR,EAEThR,WAAYE,EAFH8Q,EAEG9Q,aACd6M,EAAOU,EAAS9E,IAAI,SAAAgF,GAAO,OAAIA,EAAQ1D,MAC7C5C,KAAKU,MAAM9H,gBAAgBd,EAAOnD,OAAAqD,EAAA,EAAArD,CAAIkE,GAALtE,OAAAI,OAAAqD,EAAA,EAAArD,CAAsB+Q,MACvD1F,KAAKU,MAAMhI,cAAcC,EAAWnB,OAAO,SAAAoL,GAAG,OAAK8C,EAAK5C,SAASF,iDAGhD,IACTwD,EAAapG,KAAKU,MAAlB0F,SACAvN,EAAiBmH,KAAKU,MAAM2B,KAA5BxJ,aACF6M,EAAOU,EAAS9E,IAAI,SAAAgF,GAAO,OAAIA,EAAQ1D,MAC7C5C,KAAKU,MAAM9H,gBAAgBC,EAAarB,OAAO,SAAAoL,GAAG,OAAK8C,EAAK5C,SAASF,qDAGjB,IAAjCmD,EAAiC/P,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAArBgK,KAAKlL,MAAMiR,SAC1C/F,KAAK6E,SAAS,CAAEkB,8CAGT,IAAAjB,EAAA9E,KAAAa,EACwDb,KAAKU,MAA5DI,EADDD,EACCC,UAAW7J,EADZ4J,EACY5J,MAAOiR,EADnBrH,EACmBqH,KAAM9B,EADzBvF,EACyBuF,SAAUrB,EADnClE,EACmCkE,iBADnC6E,EAEoC5J,KAAKU,MAAM2B,KAA9C/J,EAFDsR,EAECtR,KAAMK,EAFPiR,EAEOjR,WAAYE,EAFnB+Q,EAEmB/Q,aAClBkN,EAAa/F,KAAKlL,MAAlBiR,SAEF8D,EAAqBzD,EAAS7F,MAAM,SAAA+F,GAAO,OAAIzN,EAAaiK,SAASwD,EAAQ1D,OAC7EkH,EAAmB1D,EAASC,KAAK,SAAAC,GAAO,OAAI3N,EAAWmK,SAASwD,EAAQ1D,OAE9E,OACE1B,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,aAAc2J,IACpCI,EAAAhB,EAAAiB,cAACiG,GAAD,CACEtG,UAAW3J,EAAQ,OAAQ,iBAAkB0S,GAAsB,iBAAkBC,GAAoB,YACzGrV,QAAS,CACP,CAAE8M,KAAMwE,EAAWuB,KAAYC,KAAahC,QAAS,kBAAMT,EAAK0C,0BAC/D,CAAC,MAAO,gBAAgB1E,SAASoF,IAAS,CACzC3G,KAAM0F,KACNC,KAAI,mHAAA3S,OAAqHwV,mBZ3BlH,SAAA7B,GACnB,IAAM8B,EAAS9B,EAAK+B,MAAM,KAG1B,MAAO,CAFWD,EAAOE,QACRF,EAAOG,OACKzS,KAAK,KYuBsH0S,CAAalC,MAE3J2B,EACE,CAAEtI,KAAM8I,KAAS9E,QAAS,kBAAMT,EAAKwF,qBACrC,CAAE/I,KAAMgJ,KAAOhF,QAAS,kBAAMT,EAAK0F,sBACpCvT,MAAOA,GACTiR,GAAQ,gBAGTnC,GACA7E,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,YAEXsF,EAAS9E,IAAI,SAAAgF,GACX,IAAMmE,EAAW5R,EAAaiK,SAASwD,EAAQ1D,KACzC8H,EAAS/R,EAAWmK,SAASwD,EAAQ1D,KAC3C,OACE1B,EAAAhB,EAAAiB,cAACiG,GAAD,CACEtG,UAAW3J,EAAQ,UAAW,iBAAkBsT,GAAY,iBAAkBC,GAAU,YACxF/E,aAAc,kBAAMZ,EAAiB,CAACuB,EAAQ1D,OAC9CgD,aAAc,kBAAMb,EAAiB,KAAKtQ,QAAS,CACnD,CAAE8M,KAAMmJ,EAASC,KAAUC,KAAarF,QAAS,kBAAMT,EAAK+F,mBAAmBvE,KAC/E,CACE/E,KAAM0F,KACNC,KAAI,2EAAA3S,OAA6E+D,EAA7E,YAAA/D,OAA4F+R,EAAQ1D,MAE1G,CAAErB,KAAMkJ,EAAWJ,KAAUE,KAAOhF,QAAS,kBAAMT,EAAKgG,qBAAqBxE,MAC5ErP,MAAOA,EAAOuJ,IAAK8F,EAAQH,IAC5BjF,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,kBACbI,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,cAAcwF,EAAQH,KAExCjF,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,YAEXwF,EAAQ0C,SAAS1H,IAAI,SAAC2H,EAAStS,GAC7B,OACEuK,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,UAAUN,IAAK7J,GAC5BuK,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,QAAQmI,EAAQC,KAAKxR,KAAK,KAC1CwJ,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,UAAU3K,EAAe8S,EAAQ7S,yBApGtDwJ,KAsHVoD,eAAQ,SAAAjO,GAAA,MAAe,CAAEsN,KAAjBtN,EAAGsN,OAAuB5N,EAAlCuO,CAA2C0G,ICtG3CqB,2LA3BJ,IAAAlK,EACmDb,KAAKU,MAAvDI,EADDD,EACCC,UAAW7J,EADZ4J,EACY5J,MAAOgR,EADnBpH,EACmBoH,cAAkBjH,EADrCrM,OAAAsM,GAAA,EAAAtM,CAAAkM,EAAA,uCAGP,OACEK,EAAAhB,EAAAiB,cAAA,MAAAxM,OAAAyM,OAAA,CAAKN,UAAW3J,EAAQ,UAAW2J,IAAgBE,GAE/C,CACE,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAC1H,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAC1H,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,YAC1HM,IAAI,SAAC0J,EAAQrU,GAAT,OACJuK,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,cAAcN,IAAK7J,GAE9BqU,EAAO1J,IAAI,SAAA2J,GAAY,OACrB/J,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,QAAS8T,IAAiBhU,GAAS,SAAUuJ,IAAKyK,EACrEzJ,MAAO,CAAEC,gBAAiBwJ,GAAgB1F,QAAS,kBAAM0C,EAAcgD,mBAhBxEtK,cCIhBuK,2LACK,IAAArK,EACsCb,KAAKU,MAA1CI,EADDD,EACCC,UAAW8B,EADZ/B,EACY+B,IAAKG,EADjBlC,EACiBkC,QAASb,EAD1BrB,EAC0BqB,QACzB1N,EAAUwL,KAAKU,MAAMyD,GAArB3P,MACA2D,EAAW6H,KAAKU,MAAM0B,IAAtBjK,OACAY,EAAaiH,KAAKU,MAAM2B,KAAxBtJ,SAEFuN,EAAU9R,EAAM2W,YAAYvI,GAC5B3L,EAAQ8B,EAASuN,EAAQJ,OAAOC,IAChCQ,EAAgB3P,EAAoBC,GAE1C,OACEiK,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,aAAcgB,GAAU,SAAU4K,GAAW,UAAWjC,IAE5EwF,EAAQ0C,SAAS1H,IAAI,SAAC2H,EAAStS,GAAV,OAAgBsS,EAAQ7S,QAC3C6S,EAAQC,KAAK5H,IAAI,SAAAqB,GAAG,OAClBzB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,UAAWwP,EAAe,UAAWhE,GAAMnC,IAAK,CAAC7J,EAAGgM,GAAKjL,KAAK,KACjF8J,MAAO,CACL4J,KAAMnC,EAAQ7S,OAAOC,Mf1B7B,Ke0Ba,IAAiD,IAAM,IAC5DgV,QAASpC,EAAQ7S,OAAOE,IAAM2S,EAAQ7S,OAAOC,OAArC,IAA+D,IAAM,IAC7EoL,gBAAiBxK,KAGnBiL,GACDhB,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,mBACbI,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,aAAawF,EAAQJ,OAAOC,GAAIhO,EAAS,GAAH,IAAA5D,OAAY+R,EAAQH,KAC1EjF,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,UAAU3K,EAAe8S,EAAQ7S,UAE9C+B,GACD+I,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,SAASmI,EAAQqC,QAGhCnT,GACD+I,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,eAAemI,EAAQnC,YAAYpP,KAAK,qBAjCrDkI,KA+CVoD,eAAQ,SAAAjO,GAAA,MAAwB,CAAEqN,IAA1BrN,EAAGqN,IAA4B+B,GAA/BpP,EAAQoP,GAA2B9B,KAAnCtN,EAAYsN,OAAgC5N,EAApDuO,CAA6DkI,ICsE7DK,cAzHb,SAAAA,EAAYC,GAAM,IAAAtI,EAAAlD,KAAArL,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAAuL,GAAA,IACR3C,EAAwB4C,EAAxB5C,QAAS6C,EAAeD,EAAfC,WAEjBzL,KAAK4I,QAAUjU,OAAO0L,KAAKuI,GAAStH,IAAI,SAAA1H,GAAQ,OAAI,IAAIkM,GAAOlM,EAAUgP,EAAQhP,MACjFoG,KAAKyL,WAAaA,EAAWnK,IAAI,SAAAoK,GAAa,IAAAC,EACzBD,EAAUzB,MAAM,OAAO3I,IAAI,SAAAsK,GAAC,OAAI,IAAIxP,KAAKwP,KADhBC,EAAAlX,OAAAa,EAAA,EAAAb,CAAAgX,EAAA,GACrCnV,EADqCqV,EAAA,GAC/BpV,EAD+BoV,EAAA,GAI5C,OAFArV,EAAKsV,SAAS,GACdrV,EAAGqV,SAAS,GAAI,GAAI,GAAI,KACjB,CAAEtV,OAAMC,QAEjBuJ,KAAK+L,UAAY,GACjB/L,KAAKgM,OAAS,GACdhM,KAAK4I,QAAQjP,QAAQ,SAAAuM,GACnBhD,EAAK6I,UAAU7F,EAAOC,IAAMD,EAC5BA,EAAOE,SAASzM,QAAQ,SAAA2M,GACtBpD,EAAK8I,OAAO1F,EAAQ1D,KAAO0D,6DAKtB1M,GACT,OAAOoG,KAAK+L,UAAUnS,uCAGZgJ,GACV,OAAO5C,KAAKgM,OAAOpJ,yCAGPyF,GAAS,IAAAtT,EACO,8BAA8BO,KAAK+S,EAAQ4D,gBAAkB,GADpEjS,EAAArF,OAAAa,EAAA,EAAAb,CAAAI,EAAA,GACZ4G,EADY3B,EAAA,GACHmN,EADGnN,EAAA,GAErB,OAAI2B,GAAWwL,EACNnH,KAAK4I,QAAQpR,OAAO,SAAA0O,GAAM,OAAIA,EAAOvK,UAAYA,GAAWuK,EAAOiB,OAAO+E,WAAW/E,KACnFxL,EACFqE,KAAK4I,QAAQpR,OAAO,SAAA0O,GAAM,OAAIA,EAAOvK,UAAYA,IAC/CwL,EACFnH,KAAK4I,QAAQpR,OAAO,SAAA0O,GAAM,OAAIA,EAAOiB,OAAO+E,WAAW/E,KAEvD,2CAIK1O,EAAgBE,EAAYE,GAAc,IAAAiM,EAAA9E,KAClDmM,EAAW,GAqDjB,OApDY,SAANC,IAAsC,IAA/BC,EAA+BrW,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,EAAG0P,EAAc1P,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,GACnC,GAAIqW,IAAgB5T,EAAexC,OAAnC,CAIA,IAAMiQ,EAASpB,EAAK4B,WAAWjO,EAAe4T,IACxCC,EAAa,SAAAhG,GAAO,OAAKzN,EAAaiK,SAASwD,EAAQ1D,MACvD2J,EAAW,SAAAjG,GAAO,OAAI3N,EAAWmK,SAASwD,EAAQ1D,MAClD4J,EAAc,SAAAlG,GAAO,OAAI3R,OAAAqD,EAAA,EAAArD,CAAIgE,GAAJpE,OAAAI,OAAAqD,EAAA,EAAArD,CAAmB+Q,IAAMW,KAAK,SAAAzD,GAAG,OfnB1C6J,EemBiE3H,EAAKqG,YAAYvI,GfnBxE8J,EemB8EpG,EflBlHmG,EAASzD,SAAS3C,KAAK,SAAAsG,GAAQ,OAC7BD,EAAS1D,SAAS3C,KAAK,SAAAuG,GAAQ,OAC7BD,EAASvW,QAAUwW,EAASxW,QAC5BlB,EAAKmR,KAAK,SAAA1D,GAAG,OAAIgK,EAASzD,KAAKpG,SAASH,IAAQiK,EAAS1D,KAAKpG,SAASH,MACvEgK,EAASvW,OAAOC,MAAQuW,EAASxW,OAAOE,KAAOsW,EAASxW,OAAOC,MAAQsW,EAASvW,OAAOE,QALlE,IAACmW,EAAUC,KeoBhC,GAAIxG,EAAO2G,OAAQ,CACjB,IAAMC,EAAiB5G,EAAO6G,SAASvV,OAAO+U,GACxCS,EAAa9G,EAAO+G,KAAKzV,OAAO+U,GAClCS,EAAW/W,OACb+W,EAAWrT,QAAQ,SAAAuT,GACjBA,EAAIH,SAASvV,OAAO8U,GAAY3S,QAAQ,SAAAwT,GACtC,GAAIZ,EAASY,GACXf,EAAIC,EAAc,EAAG3G,OAChB,CACL,GAAI8G,EAAYW,GAAU,OAC1Bf,EAAIC,EAAc,EAAf1X,OAAAqD,EAAA,EAAArD,CAAsB+Q,GAAtBnR,OAAA,CAA4B4Y,EAAQvK,YAIpCkK,EAAe7W,OACxB6W,EAAenT,QAAQ,SAAAwT,GACrBA,EAAQF,KAAKzV,OAAO8U,GAAY3S,QAAQ,SAAAuT,GAClCV,EAAYU,IAChBd,EAAIC,EAAc,EAAf1X,OAAAqD,EAAA,EAAArD,CAAsB+Q,GAAtBnR,OAAA,CAA4B2Y,EAAItK,WAIvCsD,EAAO6G,SAASvV,OAAO8U,GAAY3S,QAAQ,SAAAwT,GACrCX,EAAYW,IAChBA,EAAQF,KAAKzV,OAAO8U,GAAY3S,QAAQ,SAAAuT,GAClCV,EAAYU,IAChBd,EAAIC,EAAc,EAAf1X,OAAAqD,EAAA,EAAArD,CAAsB+Q,GAAtBnR,OAAA,CAA4B4Y,EAAQvK,IAAKsK,EAAItK,gBAKlDsD,EAAOE,SAASC,KAAKkG,GACvBH,EAAIC,EAAc,EAAG3G,GAErB/Q,OAAOsP,OAAOiC,EAAOkH,eAAezT,QAAQ,SAAA0T,GAC1C,IAAM/G,EAAU+G,EAAajH,SAASkH,KAAKhB,GACtChG,IAAWkG,EAAYlG,IAC5B8F,EAAIC,EAAc,EAAf1X,OAAAqD,EAAA,EAAArD,CAAsB+Q,GAAtBnR,OAAA,CAA4B+R,EAAQ1D,cA5C3CuJ,EAASvN,KAAK8G,GAiDlB0G,GACOD,EAAS7K,IAAI,SAAAoE,GAClB,IAAM/B,EAAW,GACXC,EAAS,GAKf,OAJAkB,EAAKyI,kBAAL5Y,OAAAqD,EAAA,EAAArD,CAA2BgE,GAA3BpE,OAAAI,OAAAqD,EAAA,EAAArD,CAA0C+Q,IAAO,SAAC/C,EAAKvM,GAC/CuM,KAAOgB,KAAaA,EAAShB,GAAOvM,EAAOC,SAAOsN,EAAShB,GAAOvM,EAAOC,OACzEsM,KAAOiB,KAAWA,EAAOjB,GAAOvM,EAAOE,OAAKsN,EAAOjB,GAAOvM,EAAOE,OAElE,CACLoP,OACA/B,WACAC,sDAKY8B,EAAM8H,GAAU,IAAAC,EAAAzN,KAChC0F,EAAK/L,QAAQ,SAAAiJ,GACX6K,EAAKtC,YAAYvI,GAAKoG,SAASrP,QAAQ,SAAAsP,GAAO,OAAIA,EAAQ7S,QACxD6S,EAAQC,KAAKvP,QAAQ,SAAAgJ,GACnB6K,EAAS7K,EAAKsG,EAAQ7S,uBCtEjB0P,cA7Cb,SAAAA,EAAYlM,EAAU4R,GAAM,IAAAtI,EAAAlD,KAAArL,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAA8F,GAAA,IAAA4H,EAAA/Y,OAAAa,EAAA,EAAAb,CACA6W,EADA,GACnBzD,EADmB2F,EAAA,GACZtH,EADYsH,EAAA,GAG1B1N,KAAKmG,GAAKvM,EAHgB,IAAA+T,EAII3N,KAAKmG,GAAG8D,MAAM,KAJlB2D,EAAAjZ,OAAAa,EAAA,EAAAb,CAAAgZ,EAAA,GAIzB3N,KAAKrE,QAJoBiS,EAAA,GAIX5N,KAAKmH,OAJMyG,EAAA,GAK1B5N,KAAK+H,MAAQA,EACb/H,KAAKoG,SAAWzR,OAAO0L,KAAK+F,GAAU9E,IAAI,SAAAuM,GAAS,OAAI,IAAIC,GAAQ5K,EAAM2K,EAAWzH,EAASyH,MAE7F,IAAMd,EAAW/M,KAAKoG,SAAS5O,OAAO,SAAA8O,GAAO,OAAIA,EAAQyH,QAAU,IAC7Dd,EAAOjN,KAAKoG,SAAS5O,OAAO,SAAA8O,GAAO,OAAwB,IAApBA,EAAQyH,UACrD/N,KAAK6M,QAAU7M,KAAKmG,GAAG+F,WAAW,QAAUa,EAAS9W,QAAUgX,EAAKhX,OAChE+J,KAAK6M,QACP7M,KAAK+M,SAAWA,EAChB/M,KAAKiN,KAAOA,EACZjN,KAAK+M,SAASpT,QAAQ,SAAAwT,GAAO,OAAIA,EAAQF,KAAO/J,EAAK+J,KAAKzV,OAAO,SAAA0V,GAAG,OAAIA,EAAI/G,GAAG+F,WAAWiB,EAAQhH,QAClGnG,KAAKiN,KAAKtT,QAAQ,SAAAuT,GAAG,OAAIA,EAAIH,SAAW7J,EAAK6J,SAASvV,OAAO,SAAA2V,GAAO,OAAID,EAAI/G,GAAG+F,WAAWiB,EAAQhH,QAC9FnG,KAAK+M,SAASxM,MAAM,SAAA4M,GAAO,OAAKA,EAAQF,KAAKhX,WAC/C+J,KAAK+M,SAASpT,QAAQ,SAAAwT,GAAO,OAAIA,EAAQF,KAAO/J,EAAK+J,OACrDjN,KAAKiN,KAAKtT,QAAQ,SAAAuT,GAAG,OAAIA,EAAIH,SAAW7J,EAAK6J,aAG/C/M,KAAKoN,cAAgBpN,KAAKgO,SAAShO,KAAKoG,+DAInCA,GACP,IAAI6H,EAAS,GAeb,OAdA7H,EAASzM,QAAQ,SAAA2M,GACf,IAAM4H,EAAuB5H,EAAQ0C,SAAS1H,IAAI,SAAAvM,GAAA,MAAuB,CAAEmU,KAAzBnU,EAAGmU,KAA4B9S,OAA/BrB,EAASqB,UACrD+X,EAAmBhV,KAAKmB,UAAU4T,GAClCb,EAAeY,EAAOE,GACxBd,EACFA,EAAajH,SAASxH,KAAK0H,GAE3B2H,EAAOE,GAAoB,CACzBC,KAAMD,EACNnF,SAAUkF,EACV9H,SAAU,CAACE,MAIV2H,WCpBIH,GArBb,SAAAA,EAAY5H,EAAQ2H,EAAWrC,GAAO7W,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAA8N,GAAA,IAAAJ,EAAA/Y,OAAAa,EAAA,EAAAb,CACH6W,EADE,GAC5B5I,EAD4B8K,EAAA,GACvB1E,EADuB0E,EAAA,GACbK,EADaL,EAAA,GAGnC1N,KAAKkG,OAASA,EACdlG,KAAKmG,GAAK0H,EACV7N,KAAK4C,IAAMA,EACX5C,KAAK+N,QAAUA,EACf/N,KAAKgJ,SAAWA,EAAS1H,IAAI,SAAAvM,GAAA,IAAAiF,EAAArF,OAAAa,EAAA,EAAAb,CAAAI,EAAA,GAAEqB,EAAF4D,EAAA,GAAUkP,EAAVlP,EAAA,GAAgBsR,EAAhBtR,EAAA,GAAuB8M,EAAvB9M,EAAA,GAAoCqU,EAApCrU,EAAA,SAAyD,CACpF5D,OAAmB,QAAXA,OAAmBF,EAAY,CACrCG,MAAOlB,EAAaiB,EAAO6T,MAAM,OAAO,IACxC3T,IAAKnB,EAAaiB,EAAO6T,MAAM,OAAO,KAExCf,KAAe,WAATA,EAAoB,GAApBvU,OAAAqD,EAAA,EAAArD,CAA6BuU,GACnCoC,QACAxE,YAAaA,EAAYxF,IAAI,SAAAgN,GAAU,OAAIA,EAAW7P,QAAQ,UAAW,MACzE4P,oBAEFrO,KAAK8G,YAAchP,EAAOkI,KAAKgJ,SAASnF,OAAO,SAACiD,EAAamC,GAAd,OAAAtU,OAAAqD,EAAA,EAAArD,CAA8BmS,GAA9BvS,OAAAI,OAAAqD,EAAA,EAAArD,CAA8CsU,EAAQnC,eAAc,MCPjHyH,sBACJ,SAAAA,EAAY7N,GAAO,IAAAwC,EAAA,OAAAvO,OAAAwO,EAAA,EAAAxO,CAAAqL,KAAAuO,IACjBrL,EAAAvO,OAAAyO,EAAA,EAAAzO,CAAAqL,KAAArL,OAAA0O,EAAA,EAAA1O,CAAA4Z,GAAA9R,KAAAuD,KAAMU,KAED5L,MAAQ,CACX0Z,MAAO,GACPvM,YAAa,GACbwM,SAAU,GAGZvL,EAAKwL,WAAanG,IAAMC,YAExBtF,EAAKyL,aAAezL,EAAKyL,aAAapK,KAAlB5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KACpBA,EAAK0L,qBAAuB1L,EAAK0L,qBAAqBrK,KAA1B5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KAC5BA,EAAK2L,aAAe3L,EAAK2L,aAAatK,KAAlB5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KACpBA,EAAK4L,eAAiB5L,EAAK4L,eAAevK,KAApB5P,OAAA8P,EAAA,EAAA9P,QAAA8P,EAAA,EAAA9P,CAAAuO,KAdLA,mFAiBC,IAAA4B,EAAA9E,KACV1H,EAAS0H,KAAKU,MAAM2B,KAApB/J,KACJA,GAAM0H,KAAK+O,UAAUzW,GACzB0W,IAAM/V,IAAI,uDACPgW,KAAK,SAAAC,GACJ,IAAMV,EAAQU,EAAI1D,KAAK2D,UACvB,IAAK7W,EAAM,CACT,IAAM8W,EAAaZ,EAAM,GACzB1J,EAAKuK,qBAAqBD,GAE5BtK,EAAKD,SAAS,CAAE2J,YAGpB5W,OAAO0X,iBAAiB,SAAUtP,KAAK2O,6DAIvC/W,OAAO2X,oBAAoB,SAAUvP,KAAK2O,gDAGlCrW,GAAM,IAAAmV,EAAAzN,KACdA,KAAKU,MAAMrM,SAAS,MACpB2a,IAAM/V,IAAN,4CAAA1E,OAAsD+D,EAAtD,UACG2W,KAAK,SAAAC,GACJ,IAAM1a,EAAQ,IAAI+W,GAAM2D,EAAI1D,MAC5BiC,EAAK/M,MAAMrM,SAASG,+CAIR,IACRA,EAAUwL,KAAKU,MAAMyD,GAArB3P,MAER,OADuBwL,KAAKU,MAAM2B,KAA1B1J,WACUkL,OAAO,SAACkK,EAASnL,GAAV,OAAkBmL,EAAUvZ,EAAM2W,YAAYvI,GAAKmL,SAAS,wCAG1E1U,GAAG,IACNlB,EAAW6H,KAAKU,MAAM0B,IAAtBjK,OACFqX,EAAa7X,IACfQ,IAAWqX,GACbxP,KAAKU,MAAMxI,UAAUsX,gDAIJvN,GACnBjC,KAAK6E,SAAS,CAAE5C,uDAGH,IACLzN,EAAUwL,KAAKU,MAAMyD,GAArB3P,MACAmE,EAAeqH,KAAKU,MAAM2B,KAA1B1J,WACF8W,EAAM7U,KACZjC,EAAWgB,QAAQ,SAAAiJ,GACjB,IAAM0D,EAAU9R,EAAM2W,YAAYvI,GAClC0D,EAAQ0C,SAASrP,QAAQ,SAAAsP,GACvB,GAAKA,EAAQ7S,QAAW6S,EAAQC,KAAKjT,OAArC,CAMA,IALA,IAAMyV,EAAYlX,EAAMiX,WAAWxC,EAAQoF,gBACrC1S,EAAU2K,EAAQJ,OAAOC,GACzBvK,EAAc0K,EAAQJ,OAAO6B,MAC7BlM,EAAWoN,EAAQqC,MACnBxP,EAAQ,IAAIM,KAAKsP,EAAUlV,OACzByS,EAAQC,KAAKpG,SAAS,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKhH,EAAM4T,YACtE5T,EAAM6T,QAAQ7T,EAAMwB,UAAY,GAElCxB,EAAMgQ,SAAS7C,EAAQ7S,OAAOC,MAAQ,GAAK,EAAG4S,EAAQ7S,OAAOC,MAAQ,IACrE,IAAMC,EAAM,IAAI8F,KAAKN,GACrBxF,EAAIwV,SAAS7C,EAAQ7S,OAAOE,IAAM,GAAK,EAAG2S,EAAQ7S,OAAOE,IAAM,IAC/D,IAAM0F,EAAQ,CACZC,KAAM,SACNC,MAAOwP,EAAUjV,GACjB8F,MAAO0M,EAAQC,KAAK5H,IAAI,SAAAqB,GAAG,MAAK,CAAEiN,EAAG,KAAMC,EAAG,KAAMC,EAAG,KAAMC,EAAG,KAAMC,EAAG,MAAOrN,MAElF8M,EAAI/T,SAASC,EAASC,EAAaC,EAAUC,EAAOxF,EAAK0F,QAG7DyT,EAAI5Q,SAAS,yDAGE,IACPsK,EAAYnJ,KAAK0O,WAAjBvF,QACR8G,KAAWC,MAAM/G,EAAS,CACxBgH,MnB3GmB,EmB2GZhH,EAAQiH,YACf/E,OnB5GmB,EmB4GXlC,EAAQkH,aAChB7O,MAAO,CACL8O,KAAQ,EACRC,UAAA,SAAAhc,OnB/GiB,EmB+GjB,KACAic,mBAAoB,cAErBvB,KAAK,SAAAjQ,GAAI,OAAIQ,KAAOR,EAAM,0DAGfyP,GACdzO,KAAK6E,SAAS,CAAE4J,0DAGGnW,GACnB0H,KAAKU,MAAMrI,QAAQC,GACnB0H,KAAK+O,UAAUzW,oCAGR,IAAAmY,EAAAzQ,KACC7H,EAAW6H,KAAKU,MAAM0B,IAAtBjK,OACA3D,EAAUwL,KAAKU,MAAMyD,GAArB3P,MAFDwQ,EAGsChF,KAAKU,MAAM2B,KAAhD/J,EAHD0M,EAGC1M,KAAMK,EAHPqM,EAGOrM,WAAYF,EAHnBuM,EAGmBvM,eAHnBgO,EAIkCzG,KAAKlL,MAAtC0Z,EAJD/H,EAIC+H,MAAOvM,EAJRwE,EAIQxE,YAAawM,EAJrBhI,EAIqBgI,SAE5B,OACEvN,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,MAAOgB,GAAU,YAEpCA,GACD+I,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,sBACbI,EAAAhB,EAAAiB,cAAC0E,GAAD,CAAU5D,YAAaA,EAAaE,OAAQ3N,KAI9CA,GACA0M,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,oBAAoBwI,IAAKtJ,KAAK0O,YAC3CxN,EAAAhB,EAAAiB,cAAC0E,GAAD,CAAU/E,UAAU,mBAGxBI,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,WAEX3I,GACA+I,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,iBAEX,CAAC,UAAW,eAAgB,YAAYQ,IAAI,SAACoP,EAAU/Z,GAAX,OAC1CuK,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,MAAOsX,IAAa9X,GAAK,UAAW4O,QAAS,kBAAMkL,EAAKE,gBAAgBha,IAC3F6J,IAAK7J,GACP+Z,MAMXxP,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,SACbI,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQxE,UAAU,QAChBI,EAAAhB,EAAAiB,cAAA,UAAQsE,SAAU,SAAApM,GAAC,OAAIoX,EAAKpB,qBAAqBhW,EAAEwI,OAAO+C,QAAQA,MAAOtM,GAErEkW,EAAMlN,IAAI,SAAAhJ,GACR,IAAMsY,EAAOtY,EAAKpB,UAAU,EAAG,GACzB2Z,EAAW,CAAEC,KAAM,SAAUC,KAAM,SAAUC,KAAM,QAAS1Y,EAAKpB,UAAU,IACjF,OACEgK,EAAAhB,EAAAiB,cAAA,UAAQX,IAAKlI,EAAMsM,MAAOtM,GAAOuY,EAAjC,IAA4CD,OAOpDpc,GACA0M,EAAAhB,EAAAiB,cAAA,QAAML,UAAU,aACbd,KAAKiR,kBADR,aAKJ/P,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,YAEXtM,GACA0M,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,oBAAkC,IAAbsX,GAAkB,WAC7DvN,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,eAEXrI,EAAe6I,IAAI,SAAA1H,GACjB,OACEsH,EAAAhB,EAAAiB,cAACsI,GAAD,CAAQ7P,SAAUA,EAAUsX,YAAU,EAAC1Q,IAAK5G,EACpCmL,iBAAkB0L,EAAK7B,0BAKvC1N,EAAAhB,EAAAiB,cAACgQ,GAAD,OAIF3c,GACA0M,EAAAhB,EAAAiB,cAACiQ,GAAD,CAAuBtQ,UAAW3J,EAAQ,yBAAuC,IAAbsX,GAAkB,UAC/D1J,iBAAkB/E,KAAK4O,uBAG9CzW,GACA+I,EAAAhB,EAAAiB,cAAA,OAAKL,UAAW3J,EAAQ,qBAAmC,IAAbsX,GAAkB,WAC9DvN,EAAAhB,EAAAiB,cAAC0E,GAAD,CAAU5D,YAAaA,EAAaE,OAAQ3N,MAKhDA,GACA0M,EAAAhB,EAAAiB,cAAA,OAAKL,UAAU,oBAEXnI,EAAW1C,OAAS,GACpBiL,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQ+L,KAAM1Y,EAAWjB,KAAK,OAC5BwJ,EAAAhB,EAAAiB,cAAA,0BAGJD,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQC,QAASvF,KAAK6O,cAAtB,mBAGA3N,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQC,QAASvF,KAAK8O,gBAAtB,mBAGA5N,EAAAhB,EAAAiB,cAACmE,GAAD,CAAQ4B,KAAK,6CAAb,+BAxNItH,KAmOHoD,eAAQ,SAAAjO,GAAA,MAAwB,CAAEqN,IAA1BrN,EAAGqN,IAA4B+B,GAA/BpP,EAAQoP,GAA2B9B,KAAnCtN,EAAYsN,OAAgC5N,EAApDuO,CAA6DuL,ICxOtE+C,UAAQC,YAAYC,YAAgBC,KAE1CC,IAASC,OAAOzQ,EAAAhB,EAAAiB,cAACyQ,EAAA,EAAD,CAAUN,MAAOA,IAAOpQ,EAAAhB,EAAAiB,cAAC0Q,GAAD,OAAmBvS,SAASwS,eAAe","file":"static/js/main.25bb5bf7.chunk.js","sourcesContent":["import { combineActions, createAction, handleActions } from 'redux-actions';\n\nconst prefix = 'DB';\n\nconst setOscar = createAction(`${prefix}/SET_OSCAR`, oscar => ({ oscar }));\n\nexport const actions = {\n  setOscar,\n};\n\nconst defaultState = {\n  oscar: null,\n};\n\nexport default handleActions({\n  [combineActions(\n    setOscar,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\nconst DAYS = ['M', 'T', 'W', 'R', 'F'];\n\nconst PNG_SCALE_FACTOR = 2;\n\nexport {\n  OPEN,\n  CLOSE,\n  DAYS,\n  PNG_SCALE_FACTOR,\n};\n","import { DAYS } from './constants';\n\nconst stringToTime = string => {\n  const [, hour, minute, ampm] = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  return ((ampm === 'p' ? 12 : 0) + Number.parseInt(hour % 12)) * 60 + Number.parseInt(minute);\n};\n\nconst timeToString = (time, ampm = true) => {\n  const hour = time / 60 | 0;\n  const minute = time % 60;\n  return `${hour > 12 ? hour - 12 : hour}:${minute < 10 ? '0' + minute : minute}${ampm ? ` ${hour < 12 ? 'a' : 'p'}m` : ''}`;\n};\n\nconst timeToShortString = time => {\n  const hour = time / 60 | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nconst periodToString = period => period ? `${timeToString(period.start, false)} - ${timeToString(period.end)}` : 'TBA';\n\nconst getRandomColor = (from = 0, to = 256) => {\n  let hex = '#';\n  for (let i = 0; i < 3; i++) {\n    const component = (Math.random() * (to - from) + from | 0).toString(16);\n    hex += (component.length === 1 ? '0' : '') + component;\n  }\n  return hex;\n};\n\nconst getContentClassName = (color = '#BBBBBB') => {\n  const r = parseInt(color.substring(1, 3), 16);\n  const g = parseInt(color.substring(3, 5), 16);\n  const b = parseInt(color.substring(5, 7), 16);\n  return r * .299 + g * .587 + b * .114 > 128 ? 'dark-content' : 'light-content';\n};\n\nconst hasConflictBetween = (section1, section2) =>\n  section1.meetings.some(meeting1 =>\n    section2.meetings.some(meeting2 =>\n      meeting1.period && meeting2.period &&\n      DAYS.some(day => meeting1.days.includes(day) && meeting2.days.includes(day)) &&\n      meeting1.period.start < meeting2.period.end && meeting2.period.start < meeting1.period.end));\n\nconst classes = (...classList) => classList.filter(c => c).join(' ');\n\nconst isMobile = () => window.innerWidth < 768;\n\nconst shallowCompareEntries = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(key => key in b && a[key] === b[key]);\n};\n\nconst simplifyName = name => {\n  const tokens = name.split(' ');\n  const firstName = tokens.shift();\n  const lastName = tokens.pop();\n  return [firstName, lastName].join(' ');\n};\n\nconst unique = array => [...new Set(array)];\n\nexport {\n  stringToTime,\n  timeToString,\n  timeToShortString,\n  periodToString,\n  getRandomColor,\n  getContentClassName,\n  hasConflictBetween,\n  classes,\n  isMobile,\n  shallowCompareEntries,\n  simplifyName,\n  unique,\n};\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport { isMobile } from '../utils';\n\nconst prefix = 'ENV';\n\nconst setMobile = createAction(`${prefix}/SET_MOBILE`, mobile => ({ mobile }));\n\nexport const actions = {\n  setMobile,\n};\n\nconst defaultState = {\n  mobile: isMobile(),\n};\n\nexport default handleActions({\n  [combineActions(\n    setMobile,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport Cookies from 'js-cookie';\nimport { getRandomColor } from '../utils';\n\nconst prefix = 'USER';\n\nconst setTerm = createAction(`${prefix}/SET_TERM`, term => loadData(term));\nconst setDesiredCourses = createAction(`${prefix}/SET_DESIRED_COURSES`, desiredCourses => ({ desiredCourses }));\nconst setPinnedCrns = createAction(`${prefix}/SET_PINNED_CRNS`, pinnedCrns => ({ pinnedCrns }));\nconst setExcludedCrns = createAction(`${prefix}/SET_EXCLUDED_CRNS`, excludedCrns => ({ excludedCrns }));\nconst setColorMap = createAction(`${prefix}/SET_COLOR_MAP`, colorMap => ({ colorMap }));\n\nexport const actions = {\n  setTerm,\n  setDesiredCourses,\n  setPinnedCrns,\n  setExcludedCrns,\n  setColorMap,\n};\n\nconst saveData = ({ term, desiredCourses = [], pinnedCrns = [], excludedCrns = [], colorMap = {} }) => {\n  Cookies.set('term', term);\n  Cookies.set(term, JSON.stringify({ desiredCourses, pinnedCrns, excludedCrns, colorMap }), { expires: 365 });\n};\n\nconst loadData = (term = Cookies.get('term')) => {\n  let json = null;\n  try {\n    json = JSON.parse(Cookies.get(term));\n  } catch (e) {\n    json = {};\n  }\n  const { desiredCourses = [], pinnedCrns = [], excludedCrns = [], colorMap = {} } = json;\n  desiredCourses.forEach(courseId => {\n    if (!(courseId in colorMap)) {\n      colorMap[courseId] = getRandomColor();\n    }\n  });\n  return { term, desiredCourses, pinnedCrns, excludedCrns, colorMap };\n};\n\n(function migrate201902() {\n  const deprecatedData = Cookies.get('data');\n  if (deprecatedData) {\n    Cookies.set('term', '201902');\n    Cookies.set('201902', deprecatedData);\n    Cookies.remove('data');\n  }\n})();\nconst defaultState = loadData();\n\nexport default handleActions({\n  [combineActions(\n    setTerm,\n    setDesiredCourses,\n    setPinnedCrns,\n    setExcludedCrns,\n    setColorMap,\n  )]: (state, { payload }) => {\n    const newState = {\n      ...state,\n      ...payload,\n    };\n    saveData(newState);\n    return newState;\n  },\n}, defaultState);\n","import { actions as dbActions } from './db';\nimport { actions as envActions } from './env';\nimport { actions as userActions } from './user';\n\nexport { default as db } from './db';\nexport { default as env } from './env';\nexport { default as user } from './user';\n\nexport const actions = {\n  ...dbActions,\n  ...envActions,\n  ...userActions,\n};\n","/* global saveAs, Blob, BlobBuilder, console */\n/* exported ics */\n\nconst ics = function (uidDomain, prodId) {\n  'use strict';\n\n  if (navigator.userAgent.indexOf('MSIE') > -1 && navigator.userAgent.indexOf('MSIE 10') == -1) {\n    console.log('Unsupported Browser');\n    return;\n  }\n\n  if (typeof uidDomain === 'undefined') {\n    uidDomain = 'default';\n  }\n  if (typeof prodId === 'undefined') {\n    prodId = 'Calendar';\n  }\n\n  var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n  var calendarEvents = [];\n  var calendarStart = [\n    'BEGIN:VCALENDAR',\n    'PRODID:' + prodId,\n    'VERSION:2.0',\n  ].join(SEPARATOR);\n  var calendarEnd = SEPARATOR + 'END:VCALENDAR';\n  var BYDAY_VALUES = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n\n  return {\n    /**\n     * Returns events array\n     * @return {array} Events\n     */\n    'events': function () {\n      return calendarEvents;\n    },\n\n    /**\n     * Returns calendar\n     * @return {string} Calendar in iCalendar format\n     */\n    'calendar': function () {\n      return calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n    },\n\n    /**\n     * Add event to the calendar\n     * @param  {string} subject     Subject/Title of event\n     * @param  {string} description Description of event\n     * @param  {string} location    Location of event\n     * @param  {string} begin       Beginning date of event\n     * @param  {string} stop        Ending date of event\n     */\n    'addEvent': function (subject, description, location, begin, stop, rrule) {\n      // I'm not in the mood to make these optional... So they are all required\n      if (typeof subject === 'undefined' ||\n        typeof description === 'undefined' ||\n        typeof location === 'undefined' ||\n        typeof begin === 'undefined' ||\n        typeof stop === 'undefined'\n      ) {\n        return false;\n      }\n\n      // validate rrule\n      if (rrule) {\n        if (!rrule.rrule) {\n          if (rrule.freq !== 'YEARLY' && rrule.freq !== 'MONTHLY' && rrule.freq !== 'WEEKLY' && rrule.freq !== 'DAILY') {\n            throw 'Recurrence rrule frequency must be provided and be one of the following: \\'YEARLY\\', \\'MONTHLY\\', \\'WEEKLY\\', or \\'DAILY\\'';\n          }\n\n          if (rrule.until) {\n            if (isNaN(Date.parse(rrule.until))) {\n              throw 'Recurrence rrule \\'until\\' must be a valid date string';\n            }\n          }\n\n          if (rrule.interval) {\n            if (isNaN(parseInt(rrule.interval))) {\n              throw 'Recurrence rrule \\'interval\\' must be an integer';\n            }\n          }\n\n          if (rrule.count) {\n            if (isNaN(parseInt(rrule.count))) {\n              throw 'Recurrence rrule \\'count\\' must be an integer';\n            }\n          }\n\n          if (typeof rrule.byday !== 'undefined') {\n            if ((Object.prototype.toString.call(rrule.byday) !== '[object Array]')) {\n              throw 'Recurrence rrule \\'byday\\' must be an array';\n            }\n\n            if (rrule.byday.length > 7) {\n              throw 'Recurrence rrule \\'byday\\' array must not be longer than the 7 days in a week';\n            }\n\n            // Filter any possible repeats\n            rrule.byday = rrule.byday.filter(function (elem, pos) {\n              return rrule.byday.indexOf(elem) == pos;\n            });\n\n            for (var d in rrule.byday) {\n              if (BYDAY_VALUES.indexOf(rrule.byday[d]) < 0) {\n                throw 'Recurrence rrule \\'byday\\' values must include only the following: \\'SU\\', \\'MO\\', \\'TU\\', \\'WE\\', \\'TH\\', \\'FR\\', \\'SA\\'';\n              }\n            }\n          }\n        }\n      }\n\n      //TODO add time and time zone? use moment to format?\n      var start_date = new Date(begin);\n      var end_date = new Date(stop);\n      var now_date = new Date();\n\n      var start_year = ('0000' + (start_date.getFullYear().toString())).slice(-4);\n      var start_month = ('00' + ((start_date.getMonth() + 1).toString())).slice(-2);\n      var start_day = ('00' + ((start_date.getDate()).toString())).slice(-2);\n      var start_hours = ('00' + (start_date.getHours().toString())).slice(-2);\n      var start_minutes = ('00' + (start_date.getMinutes().toString())).slice(-2);\n      var start_seconds = ('00' + (start_date.getSeconds().toString())).slice(-2);\n\n      var end_year = ('0000' + (end_date.getFullYear().toString())).slice(-4);\n      var end_month = ('00' + ((end_date.getMonth() + 1).toString())).slice(-2);\n      var end_day = ('00' + ((end_date.getDate()).toString())).slice(-2);\n      var end_hours = ('00' + (end_date.getHours().toString())).slice(-2);\n      var end_minutes = ('00' + (end_date.getMinutes().toString())).slice(-2);\n      var end_seconds = ('00' + (end_date.getSeconds().toString())).slice(-2);\n\n      var now_year = ('0000' + (now_date.getFullYear().toString())).slice(-4);\n      var now_month = ('00' + ((now_date.getMonth() + 1).toString())).slice(-2);\n      var now_day = ('00' + ((now_date.getDate()).toString())).slice(-2);\n      var now_hours = ('00' + (now_date.getHours().toString())).slice(-2);\n      var now_minutes = ('00' + (now_date.getMinutes().toString())).slice(-2);\n      var now_seconds = ('00' + (now_date.getSeconds().toString())).slice(-2);\n\n      // Since some calendars don't add 0 second events, we need to remove time if there is none...\n      var start_time = '';\n      var end_time = '';\n      if (start_hours + start_minutes + start_seconds + end_hours + end_minutes + end_seconds != 0) {\n        start_time = 'T' + start_hours + start_minutes + start_seconds;\n        end_time = 'T' + end_hours + end_minutes + end_seconds;\n      }\n      var now_time = 'T' + now_hours + now_minutes + now_seconds;\n\n      var start = start_year + start_month + start_day + start_time;\n      var end = end_year + end_month + end_day + end_time;\n      var now = now_year + now_month + now_day + now_time;\n\n      // recurrence rrule vars\n      var rruleString;\n      if (rrule) {\n        if (rrule.rrule) {\n          rruleString = rrule.rrule;\n        } else {\n          rruleString = 'RRULE:FREQ=' + rrule.freq;\n\n          if (rrule.until) {\n            var uDate = new Date(Date.parse(rrule.until)).toISOString();\n            rruleString += ';UNTIL=' + uDate.substring(0, uDate.length - 13).replace(/[-]/g, '') + '000000Z';\n          }\n\n          if (rrule.interval) {\n            rruleString += ';INTERVAL=' + rrule.interval;\n          }\n\n          if (rrule.count) {\n            rruleString += ';COUNT=' + rrule.count;\n          }\n\n          if (rrule.byday && rrule.byday.length > 0) {\n            rruleString += ';BYDAY=' + rrule.byday.join(',');\n          }\n        }\n      }\n\n      var stamp = new Date().toISOString();\n\n      var calendarEvent = [\n        'BEGIN:VEVENT',\n        'UID:' + calendarEvents.length + '@' + uidDomain,\n        'CLASS:PUBLIC',\n        'DESCRIPTION:' + description,\n        'DTSTAMP;VALUE=DATE-TIME:' + now,\n        'DTSTART;VALUE=DATE-TIME:' + start,\n        'DTEND;VALUE=DATE-TIME:' + end,\n        'LOCATION:' + location,\n        'SUMMARY;LANGUAGE=en-us:' + subject,\n        'TRANSP:TRANSPARENT',\n        'END:VEVENT',\n      ];\n\n      if (rruleString) {\n        calendarEvent.splice(4, 0, rruleString);\n      }\n\n      calendarEvent = calendarEvent.join(SEPARATOR);\n\n      calendarEvents.push(calendarEvent);\n      return calendarEvent;\n    },\n\n    /**\n     * Download calendar using the saveAs function from filesave.js\n     * @param  {string} filename Filename\n     * @param  {string} ext      Extention\n     */\n    'download': function (filename, ext) {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      ext = (typeof ext !== 'undefined') ? ext : '.ics';\n      filename = (typeof filename !== 'undefined') ? filename : 'calendar';\n      var calendar = calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n\n      var blob;\n      if (navigator.userAgent.indexOf('MSIE 10') === -1) { // chrome or firefox\n        blob = new Blob([calendar]);\n      } else { // ie\n        var bb = new BlobBuilder();\n        bb.append(calendar);\n        blob = bb.getBlob('text/x-vCalendar;charset=' + document.characterSet);\n      }\n      saveAs(blob, filename + ext);\n      return calendar;\n    },\n\n    /**\n     * Build and return the ical contents\n     */\n    'build': function () {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      var calendar = calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n\n      return calendar;\n    },\n  };\n};\n\nexport default ics;\n","import { Component } from 'react';\nimport { shallowCompareEntries } from '../../utils';\n\nclass SemiPureComponent extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    const stateChanged = this.state !== nextState;\n    const propsChanged = !shallowCompareEntries(this.props, nextProps);\n    return stateChanged || propsChanged;\n  }\n}\n\nexport default SemiPureComponent;\n","import React, { Component } from 'react';\nimport { classes } from '../../utils';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport './stylesheet.scss';\nimport CopyToClipboard from 'react-copy-to-clipboard';\n\nclass ActionRow extends Component {\n  render() {\n    const { className, children, actions, color, ...restProps } = this.props;\n\n    return (\n      <div className={classes('ActionRow', className)} {...restProps}>\n        {children}\n        <div className={classes('actions', 'default')}>\n          {\n            actions.filter(action => action).map(({ className, icon, ...restProps }, i) => {\n              const props = {\n                key: i,\n                className: classes('action', className),\n                children: (\n                  <div className=\"icon\" style={{ backgroundColor: color }}>\n                    <FontAwesomeIcon fixedWidth icon={icon}/>\n                  </div>\n                ),\n                ...restProps,\n              };\n              return 'href' in props ? (\n                <a {...props} rel=\"noopener noreferrer\" target=\"_blank\"/>\n              ) : 'text' in props ? (\n                <CopyToClipboard {...props}/>\n              ) : (\n                <div {...props}/>\n              );\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default ActionRow;\n","import React, { Component } from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Button extends Component {\n  render() {\n    const { className, ...restProps } = this.props;\n\n    const props = {\n      className: classes('Button', className),\n      ...restProps,\n    };\n\n    return 'href' in props ? (\n      <a {...props} rel=\"noopener noreferrer\" target=\"_blank\"/>\n    ) : 'text' in props ? (\n      <CopyToClipboard {...props}/>\n    ) : (\n      <div {...props}/>\n    );\n  }\n}\n\n\nexport default Button;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { CLOSE, DAYS, OPEN } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { SemiPureComponent, TimeBlocks } from '../';\nimport './stylesheet.scss';\n\nclass Calendar extends SemiPureComponent {\n  render() {\n    const { className, overlayCrns, preview, empty } = this.props;\n    const { mobile } = this.props.env;\n    const { pinnedCrns } = this.props.user;\n\n    return (\n      <div className={classes('Calendar', mobile && 'mobile', preview && 'preview', className)}>\n        {\n          preview &&\n          <img className=\"ratio\" src=\"5x2.png\" alt=\"\"/>\n        }\n        {\n          !preview &&\n          <div className=\"times\">\n            {\n              new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n                const time = OPEN + i * 60;\n                return (\n                  <div className=\"time\" key={time}>\n                    <span className=\"label\">\n                      {timeToShortString(time)}\n                    </span>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          !preview &&\n          <div className=\"days\">\n            {\n              DAYS.map(day => (\n                <div className=\"day\" key={day}>\n                    <span className=\"label\">\n                      {day}\n                    </span>\n                </div>\n              ))\n            }\n          </div>\n        }\n        {\n          !empty &&\n          <div className=\"meetings\">\n            {\n              pinnedCrns.map(crn => (\n                <TimeBlocks key={crn} crn={crn} preview={preview}/>\n              ))\n            }\n            {\n              overlayCrns &&\n              overlayCrns.filter(crn => !pinnedCrns.includes(crn)).map(crn => (\n                <TimeBlocks key={crn} crn={crn} overlay={!preview} preview={preview}/>\n              ))\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ env, user }) => ({ env, user }), actions)(Calendar);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport memoizeOne from 'memoize-one';\nimport { Button, Calendar, SemiPureComponent } from '../';\nimport { classes } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass CombinationsContainer extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortingOptionIndex: 0,\n    };\n\n    this.sortingOptions = [{\n      label: 'Most Compact',\n      calculateFactor: combination => {\n        const { startMap, endMap } = combination;\n        const diffs = Object.keys(startMap).map(day => endMap[day] - startMap[day]);\n        const sum = diffs.reduce((sum, min) => sum + min, 0);\n        return +sum;\n      },\n    }, {\n      label: 'Earliest Ending',\n      calculateFactor: combination => {\n        const { endMap } = combination;\n        const ends = Object.values(endMap);\n        const sum = ends.reduce((sum, end) => sum + end, 0);\n        const avg = sum / ends.length;\n        return +avg;\n      },\n    }, {\n      label: 'Latest Beginning',\n      calculateFactor: combination => {\n        const { startMap } = combination;\n        const starts = Object.values(startMap);\n        const sum = starts.reduce((sum, min) => sum + min, 0);\n        const avg = sum / starts.length;\n        return -avg;\n      },\n    }];\n\n    const { oscar } = this.props.db;\n\n    this.memoizedGetCombinations = memoizeOne(oscar.getCombinations.bind(oscar));\n    this.handleChangeSortingOptionIndex = this.handleChangeSortingOptionIndex.bind(this);\n  }\n\n  handleSetPinnedCrns(pinnedCrns) {\n    this.props.setPinnedCrns(pinnedCrns);\n  }\n\n  handleResetPinnedCrns() {\n    if (window.confirm('Are you sure to reset sections you selected?')) {\n      this.handleSetPinnedCrns([]);\n    }\n  }\n\n  handleChangeSortingOptionIndex(e) {\n    const sortingOptionIndex = e.target.value;\n    this.setState({ sortingOptionIndex });\n  }\n\n  render() {\n    const { className, onSetOverlayCrns } = this.props;\n    const { desiredCourses, pinnedCrns, excludedCrns } = this.props.user;\n    const { sortingOptionIndex } = this.state;\n\n    const combinations = this.memoizedGetCombinations(desiredCourses, pinnedCrns, excludedCrns);\n    const sortingOption = this.sortingOptions[sortingOptionIndex];\n    const sortedCombinations = combinations.map(combination => ({\n      ...combination,\n      factor: sortingOption.calculateFactor(combination),\n    })).sort((a, b) => a.factor - b.factor);\n\n    return (\n      <div className={classes('CombinationsContainer', className)}>\n        {\n          pinnedCrns.length > 0 &&\n          <Button onClick={() => this.handleResetPinnedCrns()}>\n            Reset Sections\n          </Button>\n        }\n        <Button className=\"sorting-option\">\n          <select onChange={this.handleChangeSortingOptionIndex} value={sortingOptionIndex}>\n            {\n              this.sortingOptions.map((sortingOption, i) => (\n                <option key={i} value={i}>{sortingOption.label}</option>\n              ))\n            }\n          </select>\n        </Button>\n        <div className=\"combinations\">\n          {\n            sortedCombinations.map(({ crns }, i) => (\n              <div className=\"combination\" key={i}\n                   onMouseEnter={() => onSetOverlayCrns(crns)}\n                   onMouseLeave={() => onSetOverlayCrns([])}\n                   onClick={() => this.handleSetPinnedCrns([...pinnedCrns, ...crns])}>\n                <div className=\"number\">{i + 1}</div>\n                <Calendar className=\"preview\" overlayCrns={crns} preview/>\n              </div>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(CombinationsContainer);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { faAngleDown, faAngleUp, faInfoCircle, faPalette, faPlus, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { classes, getContentClassName } from '../../utils';\nimport { actions } from '../../reducers';\nimport { ActionRow, Instructor, Palette, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Course extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false,\n      paletteShown: false,\n    };\n\n    this.handleSelectColor = this.handleSelectColor.bind(this);\n  }\n\n  handleRemoveCourse(course) {\n    const { desiredCourses, pinnedCrns, excludedCrns, colorMap } = this.props.user;\n    this.props.setDesiredCourses(desiredCourses.filter(courseId => courseId !== course.id));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !course.sections.some(section => section.crn === crn)));\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !course.sections.some(section => section.crn === crn)));\n    this.props.setColorMap({ ...colorMap, [course.id]: undefined });\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  handleSelectColor(color) {\n    const { courseId } = this.props;\n    const { colorMap } = this.props.user;\n    this.props.setColorMap({ ...colorMap, [courseId]: color });\n  }\n\n  handleTogglePaletteShown(paletteShown = !this.state.paletteShown) {\n    this.setState({ paletteShown });\n  }\n\n  render() {\n    const { className, courseId, onAddCourse, onSetOverlayCrns } = this.props;\n    const { oscar } = this.props.db;\n    const { term, pinnedCrns, colorMap } = this.props.user;\n    const { expanded, paletteShown } = this.state;\n\n    const course = oscar.findCourse(courseId);\n    const color = colorMap[course.id];\n    const textClassName = getContentClassName(color);\n\n    const instructorMap = {};\n    course.sections.forEach(section => {\n      const [primaryInstructor = 'Not Assigned'] = section.instructors;\n      if (!(primaryInstructor in instructorMap)) {\n        instructorMap[primaryInstructor] = [];\n      }\n      instructorMap[primaryInstructor].push(section);\n    });\n\n    const infoAction = {\n      icon: faInfoCircle,\n      href: `https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_course_detail?cat_term_in=${term}&subj_code_in=${course.subject}&crse_numb_in=${course.number}`,\n    };\n\n\n    return (\n      <div className={classes('Course', textClassName, 'default', className)} style={{ backgroundColor: color }}\n           key={course.id}>\n        <ActionRow className={classes('course-header', expanded && 'divider-bottom')} actions={onAddCourse ? [\n          { icon: faPlus, onClick: onAddCourse },\n          infoAction,\n        ] : [\n          { icon: expanded ? faAngleUp : faAngleDown, onClick: () => this.handleToggleExpanded() },\n          infoAction,\n          { icon: faPalette, onClick: () => this.handleTogglePaletteShown() },\n          { icon: faTrash, onClick: () => this.handleRemoveCourse(course) },\n        ]} color={color}>\n          <div className=\"row\">\n            <span className=\"course_id\">{course.id}</span>\n            <span className=\"section_ids\">\n              {course.sections.filter(section => pinnedCrns.includes(section.crn)).map(section => section.id).join(', ')}\n            </span>\n          </div>\n          <div className=\"row\">\n            <span className=\"course_title\" dangerouslySetInnerHTML={{ __html: course.title }}/>\n            <span className=\"section_crns\">\n              {course.sections.filter(section => pinnedCrns.includes(section.crn)).map(section => section.crn).join(', ')}\n            </span>\n          </div>\n          {\n            paletteShown &&\n            <Palette className=\"palette\" onSelectColor={this.handleSelectColor} color={color}\n                     onMouseLeave={() => this.handleTogglePaletteShown(false)}/>\n          }\n        </ActionRow>\n        {\n          expanded &&\n          <div className=\"course-body\">\n            {\n              Object.keys(instructorMap).map(name => (\n                <Instructor key={name} color={color} name={name} sections={instructorMap[name]}\n                            onSetOverlayCrns={onSetOverlayCrns}/>\n              ))\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(Course);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Course, SemiPureComponent } from '../';\nimport { classes, getRandomColor } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass CourseAdd extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      keyword: '',\n    };\n\n    this.inputRef = React.createRef();\n\n    this.handleChangeKeyword = this.handleChangeKeyword.bind(this);\n    this.handlePressEnter = this.handlePressEnter.bind(this);\n  }\n\n  handleChangeKeyword(e) {\n    const keyword = e.target.value;\n    this.setState({ keyword });\n  }\n\n  handlePressEnter(e) {\n    const { oscar } = this.props.db;\n    const { keyword } = this.state;\n\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      const courses = oscar.searchCourses(keyword);\n      if (courses.length) this.handleAddCourse(courses[0]);\n    }\n  }\n\n  handleAddCourse(course) {\n    const { desiredCourses, excludedCrns, colorMap } = this.props.user;\n    if (desiredCourses.includes(course.id)) return;\n    const tbaCrns = course.sections\n      .filter(section => !section.meetings.length || section.meetings.some(meeting => !meeting.days.length || !meeting.period))\n      .map(section => section.crn);\n    this.props.setDesiredCourses([...desiredCourses, course.id]);\n    this.props.setExcludedCrns([...excludedCrns, ...tbaCrns]);\n    this.props.setColorMap({ ...colorMap, [course.id]: getRandomColor() });\n\n    this.setState({ keyword: '' });\n    this.inputRef.current.focus();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { oscar } = this.props.db;\n    const { desiredCourses, pinnedCrns } = this.props.user;\n    const { keyword } = this.state;\n\n    return (\n      <div className={classes('CourseAdd', className)}>\n        <input type=\"text\" ref={this.inputRef} value={keyword} onChange={this.handleChangeKeyword}\n               className=\"keyword\"\n               placeholder=\"XX 0000\" onKeyPress={this.handlePressEnter}/>\n        <div className=\"autocomplete\">\n          {\n            oscar.searchCourses(keyword).filter(course => !desiredCourses.includes(course.id)).map(course => (\n              <Course key={course.id} courseId={course.id} pinnedCrns={pinnedCrns}\n                      onAddCourse={() => this.handleAddCourse(course)}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(CourseAdd);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  faAngleDown,\n  faAngleUp,\n  faBan,\n  faCheck,\n  faInfoCircle,\n  faThumbtack,\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons';\nimport { classes, periodToString, simplifyName, unique } from '../../utils';\nimport { actions } from '../../reducers';\nimport { ActionRow, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Instructor extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: true,\n    };\n  }\n\n  handleTogglePinned(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (pinnedCrns.includes(section.crn)) {\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setPinnedCrns([...pinnedCrns, section.crn]);\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExcluded(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (excludedCrns.includes(section.crn)) {\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setExcludedCrns([...excludedCrns, section.crn]);\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleExcludeAll() {\n    const { sections } = this.props;\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    const crns = sections.map(section => section.crn);\n    this.props.setExcludedCrns(unique([...excludedCrns, ...crns]));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !crns.includes(crn)));\n  }\n\n  handleIncludeAll() {\n    const { sections } = this.props;\n    const { excludedCrns } = this.props.user;\n    const crns = sections.map(section => section.crn);\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !crns.includes(crn)));\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  render() {\n    const { className, color, name, sections, onSetOverlayCrns } = this.props;\n    const { term, pinnedCrns, excludedCrns } = this.props.user;\n    const { expanded } = this.state;\n\n    const instructorExcluded = sections.every(section => excludedCrns.includes(section.crn));\n    const instructorPinned = sections.some(section => pinnedCrns.includes(section.crn));\n\n    return (\n      <div className={classes('Instructor', className)}>\n        <ActionRow\n          className={classes('name', 'divider-bottom', instructorExcluded && 'strikethrough', !instructorPinned && 'inactive')}\n          actions={[\n            { icon: expanded ? faAngleUp : faAngleDown, onClick: () => this.handleToggleExpanded() },\n            !['TBA', 'Not Assigned'].includes(name) && {\n              icon: faInfoCircle,\n              href: `http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=${encodeURIComponent(simplifyName(name))}`,\n            },\n            instructorExcluded ?\n              { icon: faCheck, onClick: () => this.handleIncludeAll() } :\n              { icon: faBan, onClick: () => this.handleExcludeAll() },\n          ]} color={color}>\n          {name || 'Not Assigned'}\n        </ActionRow>\n        {\n          expanded &&\n          <div className=\"sections\">\n            {\n              sections.map(section => {\n                const excluded = excludedCrns.includes(section.crn);\n                const pinned = pinnedCrns.includes(section.crn);\n                return (\n                  <ActionRow\n                    className={classes('section', 'divider-bottom', excluded && 'strikethrough', !pinned && 'inactive')}\n                    onMouseEnter={() => onSetOverlayCrns([section.crn])}\n                    onMouseLeave={() => onSetOverlayCrns([])} actions={[\n                    { icon: pinned ? faTimes : faThumbtack, onClick: () => this.handleTogglePinned(section) },\n                    {\n                      icon: faInfoCircle,\n                      href: `https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=${term}&crn_in=${section.crn}`,\n                    },\n                    { icon: excluded ? faCheck : faBan, onClick: () => this.handleToggleExcluded(section) },\n                  ]} color={color} key={section.id}>\n                    <div className=\"section-header\">\n                      <span className=\"section_id\">{section.id}</span>\n                    </div>\n                    <div className=\"meetings\">\n                      {\n                        section.meetings.map((meeting, i) => {\n                          return (\n                            <div className=\"meeting\" key={i}>\n                              <span className=\"days\">{meeting.days.join('')}</span>\n                              <span className=\"period\">{periodToString(meeting.period)}</span>\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </ActionRow>\n                );\n              })\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ user }) => ({ user }), actions)(Instructor);\n","import React, { Component } from 'react';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Palette extends Component {\n  render() {\n    const { className, color, onSelectColor, ...restProps } = this.props;\n\n    return (\n      <div className={classes('Palette', className)} {...restProps}>\n        {\n          [\n            ['#4D4D4D', '#999999', '#FFFFFF', '#F44E3B', '#FE9200', '#FCDC00', '#DBDF00', '#A4DD00', '#68CCCA', '#73D8FF', '#AEA1FF', '#FDA1FF'],\n            ['#333333', '#808080', '#CCCCCC', '#D33115', '#E27300', '#FCC400', '#B0BC00', '#68BC00', '#16A5A5', '#009CE0', '#7B64FF', '#FA28FF'],\n            ['#000000', '#666666', '#B3B3B3', '#9F0500', '#C45100', '#FB9E00', '#808900', '#194D33', '#0C797D', '#0062B1', '#653294', '#AB149E'],\n          ].map((colors, i) => (\n            <div className=\"palette-row\" key={i}>\n              {\n                colors.map(paletteColor => (\n                  <div className={classes('color', paletteColor === color && 'frame')} key={paletteColor}\n                       style={{ backgroundColor: paletteColor }} onClick={() => onSelectColor(paletteColor)}/>),\n                )\n              }\n            </div>\n          ))\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default Palette;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, getContentClassName, periodToString } from '../../utils';\nimport { CLOSE, OPEN } from '../../constants';\nimport { SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass TimeBlocks extends SemiPureComponent {\n  render() {\n    const { className, crn, overlay, preview } = this.props;\n    const { oscar } = this.props.db;\n    const { mobile } = this.props.env;\n    const { colorMap } = this.props.user;\n\n    const section = oscar.findSection(crn);\n    const color = colorMap[section.course.id];\n    const textClassName = getContentClassName(color);\n\n    return (\n      <div className={classes('TimeBlocks', mobile && 'mobile', overlay && 'overlay', className)}>\n        {\n          section.meetings.map((meeting, i) => meeting.period && (\n            meeting.days.map(day => (\n              <div className={classes('meeting', textClassName, 'default', day)} key={[i, day].join('-')}\n                   style={{\n                     top: (meeting.period.start - OPEN) / (CLOSE - OPEN) * 100 + '%',\n                     height: (meeting.period.end - meeting.period.start) / (CLOSE - OPEN) * 100 + '%',\n                     backgroundColor: color,\n                   }}>\n                {\n                  !preview &&\n                  <div className=\"meeting-wrapper\">\n                    <span className=\"course_id\">{section.course.id}{mobile ? '' : ` ${section.id}`}</span>\n                    <span className=\"period\">{periodToString(meeting.period)}</span>\n                    {\n                      !mobile &&\n                      <span className=\"where\">{meeting.where}</span>\n                    }\n                    {\n                      !mobile &&\n                      <span className=\"instructors\">{meeting.instructors.join(', ')}</span>\n                    }\n                  </div>\n                }\n              </div>\n            ))\n          ))\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(TimeBlocks);\n","import { Course } from './';\nimport { hasConflictBetween } from '../utils';\n\nclass Oscar {\n  constructor(data) {\n    const { courses, dateRanges } = data;\n\n    this.courses = Object.keys(courses).map(courseId => new Course(courseId, courses[courseId]));\n    this.dateRanges = dateRanges.map(dateRange => {\n      const [from, to] = dateRange.split(' - ').map(v => new Date(v));\n      from.setHours(0);\n      to.setHours(23, 59, 59, 999);\n      return { from, to };\n    });\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach(course => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach(section => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n  }\n\n  findCourse(courseId) {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn) {\n    return this.crnMap[crn];\n  }\n\n  searchCourses(keyword) {\n    const [, subject, number] = /^\\s*([a-zA-Z]*)\\s*(\\d*)\\s*$/.exec(keyword.toUpperCase()) || [];\n    if (subject && number) {\n      return this.courses.filter(course => course.subject === subject && course.number.startsWith(number));\n    } else if (subject) {\n      return this.courses.filter(course => course.subject === subject);\n    } else if (number) {\n      return this.courses.filter(course => course.number.startsWith(number));\n    } else {\n      return [];\n    }\n  }\n\n  getCombinations(desiredCourses, pinnedCrns, excludedCrns) {\n    const crnsList = [];\n    const dfs = (courseIndex = 0, crns = []) => {\n      if (courseIndex === desiredCourses.length) {\n        crnsList.push(crns);\n        return;\n      }\n      const course = this.findCourse(desiredCourses[courseIndex]);\n      const isIncluded = section => !excludedCrns.includes(section.crn);\n      const isPinned = section => pinnedCrns.includes(section.crn);\n      const hasConflict = section => [...pinnedCrns, ...crns].some(crn => hasConflictBetween(this.findSection(crn), section));\n      if (course.hasLab) {\n        const pinnedLectures = course.lectures.filter(isPinned);\n        const pinnedLabs = course.labs.filter(isPinned);\n        if (pinnedLabs.length) {\n          pinnedLabs.forEach(lab => {\n            lab.lectures.filter(isIncluded).forEach(lecture => {\n              if (isPinned(lecture)) {\n                dfs(courseIndex + 1, crns);\n              } else {\n                if (hasConflict(lecture)) return;\n                dfs(courseIndex + 1, [...crns, lecture.crn]);\n              }\n            });\n          });\n        } else if (pinnedLectures.length) {\n          pinnedLectures.forEach(lecture => {\n            lecture.labs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lab.crn]);\n            });\n          });\n        } else {\n          course.lectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            lecture.labs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn, lab.crn]);\n            });\n          });\n        }\n      } else {\n        if (course.sections.some(isPinned)) {\n          dfs(courseIndex + 1, crns);\n        } else {\n          Object.values(course.sectionGroups).forEach(sectionGroup => {\n            const section = sectionGroup.sections.find(isIncluded);\n            if (!section || hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      }\n    };\n    dfs();\n    return crnsList.map(crns => {\n      const startMap = {};\n      const endMap = {};\n      this.iterateTimeBlocks([...pinnedCrns, ...crns], (day, period) => {\n        if (!(day in startMap) || startMap[day] > period.start) startMap[day] = period.start;\n        if (!(day in endMap) || endMap[day] < period.end) endMap[day] = period.end;\n      });\n      return {\n        crns,\n        startMap,\n        endMap,\n      };\n    });\n  }\n\n  iterateTimeBlocks(crns, callback) {\n    crns.forEach(crn => {\n      this.findSection(crn).meetings.forEach(meeting => meeting.period && (\n        meeting.days.forEach(day => {\n          callback(day, meeting.period);\n        })\n      ));\n    });\n  }\n}\n\nexport default Oscar;\n","import { Section } from './';\n\nclass Course {\n  constructor(courseId, data) {\n    const [title, sections] = data;\n\n    this.id = courseId;\n    [this.subject, this.number] = this.id.split(' ');\n    this.title = title;\n    this.sections = Object.keys(sections).map(sectionId => new Section(this, sectionId, sections[sectionId]));\n\n    const lectures = this.sections.filter(section => section.credits > 0);\n    const labs = this.sections.filter(section => section.credits === 0);\n    this.hasLab = !this.id.startsWith('VIP') && lectures.length && labs.length;\n    if (this.hasLab) {\n      this.lectures = lectures;\n      this.labs = labs;\n      this.lectures.forEach(lecture => lecture.labs = this.labs.filter(lab => lab.id.startsWith(lecture.id)));\n      this.labs.forEach(lab => lab.lectures = this.lectures.filter(lecture => lab.id.startsWith(lecture.id)));\n      if (this.lectures.every(lecture => !lecture.labs.length)) {\n        this.lectures.forEach(lecture => lecture.labs = this.labs);\n        this.labs.forEach(lab => lab.lectures = this.lectures);\n      }\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections) {\n    let groups = {};\n    sections.forEach(section => {\n      const sectionGroupMeetings = section.meetings.map(({ days, period }) => ({ days, period }));\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section],\n        };\n      }\n    });\n    return groups;\n  };\n}\n\nexport default Course;\n","import { stringToTime, unique } from '../utils';\n\nclass Section {\n  constructor(course, sectionId, data) {\n    const [crn, meetings, credits] = data;\n\n    this.course = course;\n    this.id = sectionId;\n    this.crn = crn;\n    this.credits = credits;\n    this.meetings = meetings.map(([period, days, where, instructors, dateRangeIndex]) => ({\n      period: period === 'TBA' ? undefined : {\n        start: stringToTime(period.split(' - ')[0]),\n        end: stringToTime(period.split(' - ')[1]),\n      },\n      days: days === '&nbsp;' ? [] : [...days],\n      where,\n      instructors: instructors.map(instructor => instructor.replace(/ \\(P\\)$/, '')),\n      dateRangeIndex,\n    }));\n    this.instructors = unique(this.meetings.reduce((instructors, meeting) => [...instructors, ...meeting.instructors], []));\n  }\n}\n\nexport default Section;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport domtoimage from 'dom-to-image';\nimport saveAs from 'file-saver';\nimport ics from '../../libs/ics';\nimport { classes, isMobile } from '../../utils';\nimport { PNG_SCALE_FACTOR } from '../../constants';\nimport { Button, Calendar, CombinationsContainer, Course, CourseAdd, SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport { Oscar } from '../../beans';\nimport './stylesheet.scss';\n\nclass App extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      terms: [],\n      overlayCrns: [],\n      tabIndex: 0,\n    };\n\n    this.captureRef = React.createRef();\n\n    this.handleResize = this.handleResize.bind(this);\n    this.handleSetOverlayCrns = this.handleSetOverlayCrns.bind(this);\n    this.handleExport = this.handleExport.bind(this);\n    this.handleDownload = this.handleDownload.bind(this);\n  }\n\n  componentDidMount() {\n    const { term } = this.props.user;\n    if (term) this.loadOscar(term);\n    axios.get('https://jasonpark.me/gt-schedule-crawler/terms.json')\n      .then(res => {\n        const terms = res.data.reverse();\n        if (!term) {\n          const recentTerm = terms[0];\n          this.handleChangeSemester(recentTerm);\n        }\n        this.setState({ terms });\n      });\n\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  loadOscar(term) {\n    this.props.setOscar(null);\n    axios.get(`https://jasonpark.me/gt-schedule-crawler/${term}.json`)\n      .then(res => {\n        const oscar = new Oscar(res.data);\n        this.props.setOscar(oscar);\n      });\n  }\n\n  getTotalCredits() {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    return pinnedCrns.reduce((credits, crn) => credits + oscar.findSection(crn).credits, 0);\n  }\n\n  handleResize(e) {\n    const { mobile } = this.props.env;\n    const nextMobile = isMobile();\n    if (mobile !== nextMobile) {\n      this.props.setMobile(nextMobile);\n    }\n  }\n\n  handleSetOverlayCrns(overlayCrns) {\n    this.setState({ overlayCrns });\n  }\n\n  handleExport() {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    const cal = ics();\n    pinnedCrns.forEach(crn => {\n      const section = oscar.findSection(crn);\n      section.meetings.forEach(meeting => {\n        if (!meeting.period || !meeting.days.length) return;\n        const dateRange = oscar.dateRanges[meeting.dateRangeIndex];\n        const subject = section.course.id;\n        const description = section.course.title;\n        const location = meeting.where;\n        const begin = new Date(dateRange.from);\n        while (!meeting.days.includes(['-', 'M', 'T', 'W', 'R', 'F', '-'][begin.getDay()])) {\n          begin.setDate(begin.getDate() + 1);\n        }\n        begin.setHours(meeting.period.start / 60 | 0, meeting.period.start % 60);\n        const end = new Date(begin);\n        end.setHours(meeting.period.end / 60 | 0, meeting.period.end % 60);\n        const rrule = {\n          freq: 'WEEKLY',\n          until: dateRange.to,\n          byday: meeting.days.map(day => ({ M: 'MO', T: 'TU', W: 'WE', R: 'TH', F: 'FR' }[day])),\n        };\n        cal.addEvent(subject, description, location, begin, end, rrule);\n      });\n    });\n    cal.download('gt-scheduler');\n  }\n\n  handleDownload() {\n    const { current } = this.captureRef;\n    domtoimage.toPng(current, {\n      width: current.offsetWidth * PNG_SCALE_FACTOR,\n      height: current.offsetHeight * PNG_SCALE_FACTOR,\n      style: {\n        'left': 0,\n        'transform': `scale(${PNG_SCALE_FACTOR})`,\n        'transform-origin': 'top left',\n      },\n    }).then(blob => saveAs(blob, 'schedule.png'));\n  }\n\n  handleChangeTab(tabIndex) {\n    this.setState({ tabIndex });\n  }\n\n  handleChangeSemester(term) {\n    this.props.setTerm(term);\n    this.loadOscar(term);\n  };\n\n  render() {\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n    const { term, pinnedCrns, desiredCourses } = this.props.user;\n    const { terms, overlayCrns, tabIndex } = this.state;\n\n    return (\n      <div className={classes('App', mobile && 'mobile')}>\n        {\n          !mobile &&\n          <div className=\"calendar-container\">\n            <Calendar overlayCrns={overlayCrns} empty={!oscar}/>\n          </div>\n        }\n        {\n          oscar &&\n          <div className=\"capture-container\" ref={this.captureRef}>\n            <Calendar className=\"fake-calendar\"/>\n          </div>\n        }\n        <div className=\"sidebar\">\n          {\n            mobile &&\n            <div className=\"tab-container\">\n              {\n                ['Courses', 'Combinations', 'Calendar'].map((tabTitle, i) => (\n                  <div className={classes('tab', tabIndex === i && 'active')} onClick={() => this.handleChangeTab(i)}\n                       key={i}>\n                    {tabTitle}\n                  </div>\n                ))\n              }\n            </div>\n          }\n          <div className=\"title\">\n            <Button className=\"term\">\n              <select onChange={e => this.handleChangeSemester(e.target.value)} value={term}>\n                {\n                  terms.map(term => {\n                    const year = term.substring(0, 4);\n                    const semester = { '02': 'Spring', '05': 'Summer', '08': 'Fall' }[term.substring(4)];\n                    return (\n                      <option key={term} value={term}>{semester} {year}</option>\n                    );\n                  })\n                }\n              </select>\n            </Button>\n            {\n              oscar &&\n              <span className=\"secondary\">\n                {this.getTotalCredits()} Credits\n              </span>\n            }\n          </div>\n          <div className=\"scroller\">\n            {\n              oscar &&\n              <div className={classes('courses-container', tabIndex === 0 && 'active')}>\n                <div className=\"course-list\">\n                  {\n                    desiredCourses.map(courseId => {\n                      return (\n                        <Course courseId={courseId} expandable key={courseId}\n                                onSetOverlayCrns={this.handleSetOverlayCrns}/>\n                      );\n                    })\n                  }\n                </div>\n                <CourseAdd/>\n              </div>\n            }\n            {\n              oscar &&\n              <CombinationsContainer className={classes('combinations-container', tabIndex === 1 && 'active')}\n                                     onSetOverlayCrns={this.handleSetOverlayCrns}/>\n            }\n            {\n              mobile &&\n              <div className={classes('calendar-container', tabIndex === 2 && 'active')}>\n                <Calendar overlayCrns={overlayCrns} empty={!oscar}/>\n              </div>\n            }\n          </div>\n          {\n            oscar &&\n            <div className=\"button-container\">\n              {\n                pinnedCrns.length > 0 &&\n                <Button text={pinnedCrns.join(', ')}>\n                  <span>Copy CRNs</span>\n                </Button>\n              }\n              <Button onClick={this.handleExport}>\n                Export Calendar\n              </Button>\n              <Button onClick={this.handleDownload}>\n                Download as PNG\n              </Button>\n              <Button href=\"https://github.com/parkjs814/gt-scheduler\">\n                Fork me on GitHub\n              </Button>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { combineReducers, createStore } from 'redux';\nimport * as reducers from './reducers';\nimport App from './components/App';\nimport './stylesheet.scss';\n\nconst store = createStore(combineReducers(reducers));\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}