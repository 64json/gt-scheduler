{"version":3,"sources":["reducers/db.js","utils.js","reducers/env.js","reducers/user.js","reducers/index.js","components/SemiPureComponent/index.jsx","components/Calendar/index.jsx","constants.js","components/Combinations/index.jsx","components/Course/index.jsx","components/CourseAdd/index.jsx","components/Section/index.jsx","beans/Oscar.js","beans/Course.js","beans/Section.js","components/App/index.jsx","index.js"],"names":["setOscar","createAction","concat","oscar","actions","handleActions","Object","defineProperty","combineActions","state","_ref","payload","objectSpread","stringToTime","string","_$exec","exec","_$exec2","slicedToArray","hour","minute","Number","parseInt","timeToString","time","ampm","arguments","length","undefined","periodToString","period","start","end","getRandomColor","from","to","hex","i","component","Math","random","toString","classes","_len","classList","Array","_key","filter","c","join","isMobile","window","innerWidth","setMobile","mobile","defaultState","setDesiredCourses","desiredCourses","setPinnedCrns","pinnedCrns","setExcludedCrns","excludedCrns","json","JSON","parse","Cookies","get","e","_json","_json$desiredCourses","_json$pinnedCrns","_json$excludedCrns","loadData","_ref2","newState","_ref$desiredCourses","_ref$pinnedCrns","_ref$excludedCrns","set","stringify","expires","saveData","dbActions","envActions","userActions","SemiPureComponent","nextProps","nextState","stateChanged","this","propsChanged","a","b","aKeys","keys","bKeys","every","key","shallowCompareEntries","props","Component","Calendar","_this$props","className","overlayCrns","preview","env","user","react_default","createElement","src","alt","fill","map","_","timeToShortString","day","crn","components_Section","includes","overlay","connect","Combinations","db","_this$props$user","combinations","dfs","courseIndex","combination","course","findCourse","isIncluded","section","isPinned","hasConflict","toConsumableArray","some","section1","findSection","section2","meetings","meeting1","meeting2","days","hasLab","pinnedLectures","lectures","pinnedLabs","labs","forEach","lab","lecture","values","sections","sectionGroups","sectionGroup","find","push","_this","onSetOverlayCrns","getCombinations","onMouseEnter","onMouseLeave","onClick","handleSetPinnedCrns","components_Calendar","Course","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","expanded","courseId","id","_this$props$user2","_this$props$user3","setState","_this2","expandable","_this$props$user4","style","backgroundColor","color","handleToggleExpanded","dangerouslySetInnerHTML","__html","title","excluded","pinned","handleTogglePinned","instructors","meeting","stopPropagation","handleToggleExcluded","handleRemoveCourse","CourseAdd","keyword","inputRef","React","createRef","handleChangeKeyword","bind","assertThisInitialized","handlePressEnter","target","value","preventDefault","courses","searchCourses","handleAddCourse","tbaCrns","current","focus","type","ref","onChange","placeholder","onKeyPress","components_Course","Section","top","height","where","Oscar","data","courseMap","crnMap","toUpperCase","subject","number","startsWith","_this$id$split","split","_this$id$split2","sectionId","credits","distinct","groups","sectionGroupMeetings","sectionGroupHash","hash","Set","reduce","App","tabIndex","captureRef","handleResize","handleSetOverlayCrns","handleDownload","axios","then","res","addEventListener","removeEventListener","nextMobile","domtoimage","toPng","width","offsetWidth","offsetHeight","left","transform","transform-origin","blob","saveAs","_this3","_this$state","tabTitle","handleChangeTab","getTotalCredits","lib_default","text","components_CourseAdd","components_Combinations","href","rel","store","createStore","combineReducers","reducers","ReactDOM","render","es","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.3bb01734.chunk.js","sourcesContent":["import { combineActions, createAction, handleActions } from 'redux-actions';\n\nconst prefix = 'DB';\n\nconst setOscar = createAction(`${prefix}/SET_OSCAR`, oscar => ({ oscar }));\n\nexport const actions = {\n  setOscar,\n};\n\nconst defaultState = {\n  oscar: null,\n};\n\nexport default handleActions({\n  [combineActions(\n    setOscar,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","const stringToTime = string => {\n  const [, hour, minute, ampm] = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  return ((ampm === 'p' ? 12 : 0) + Number.parseInt(hour % 12)) * 60 + Number.parseInt(minute);\n};\n\nconst timeToString = (time, ampm = true) => {\n  const hour = time / 60 | 0;\n  const minute = time % 60;\n  return `${hour > 12 ? hour - 12 : hour}:${minute < 10 ? '0' + minute : minute}${ampm ? ` ${hour < 12 ? 'a' : 'p'}m` : ''}`;\n};\n\nconst timeToShortString = time => {\n  const hour = time / 60 | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nconst periodToString = period => period ? `${timeToString(period.start, false)} - ${timeToString(period.end)}` : 'TBA';\n\nconst getRandomColor = (from = 0, to = 256) => {\n  let hex = '#';\n  for (let i = 0; i < 3; i++) {\n    const component = (Math.random() * (to - from) + from | 0).toString(16);\n    hex += (component.length === 1 ? '0' : '') + component;\n  }\n  return hex;\n};\n\nconst hasConflictBetween = (section1, section2) =>\n  section1.meetings.some(meeting1 =>\n    section2.meetings.some(meeting2 =>\n      meeting1.period && meeting2.period &&\n      ['M', 'T', 'W', 'R', 'F'].some(day => meeting1.days.includes(day) && meeting2.days.includes(day)) &&\n      meeting1.period.start < meeting2.period.end && meeting2.period.start < meeting1.period.end));\n\nconst classes = (...classList) => classList.filter(c => c).join(' ');\n\nconst isMobile = () => window.innerWidth < 768;\n\nconst shallowCompareEntries = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(key => key in b && a[key] === b[key]);\n};\n\nexport {\n  stringToTime,\n  timeToString,\n  timeToShortString,\n  periodToString,\n  getRandomColor,\n  hasConflictBetween,\n  classes,\n  isMobile,\n  shallowCompareEntries,\n};\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport { isMobile } from '../utils';\n\nconst prefix = 'ENV';\n\nconst setMobile = createAction(`${prefix}/SET_MOBILE`, mobile => ({ mobile }));\n\nexport const actions = {\n  setMobile,\n};\n\nconst defaultState = {\n  mobile: isMobile(),\n};\n\nexport default handleActions({\n  [combineActions(\n    setMobile,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport Cookies from 'js-cookie';\n\nconst prefix = 'USER';\n\nconst setDesiredCourses = createAction(`${prefix}/SET_DESIRED_COURSES`, desiredCourses => ({ desiredCourses }));\nconst setPinnedCrns = createAction(`${prefix}/SET_PINNED_CRNS`, pinnedCrns => ({ pinnedCrns }));\nconst setExcludedCrns = createAction(`${prefix}/SET_EXCLUDED_CRNS`, excludedCrns => ({ excludedCrns }));\n\nexport const actions = {\n  setDesiredCourses,\n  setPinnedCrns,\n  setExcludedCrns,\n};\n\nconst saveData = ({ desiredCourses = [], pinnedCrns = [], excludedCrns = [] }) => {\n  Cookies.set('data', JSON.stringify({ desiredCourses, pinnedCrns, excludedCrns }), { expires: 365 });\n};\n\nconst loadData = () => {\n  let json = null;\n  try {\n    json = JSON.parse(Cookies.get('data'));\n  } catch (e) {\n    json = {};\n  }\n  const { desiredCourses = [], pinnedCrns = [], excludedCrns = [] } = json;\n  return { desiredCourses, pinnedCrns, excludedCrns };\n};\n\nconst defaultState = loadData();\n\nexport default handleActions({\n  [combineActions(\n    setDesiredCourses,\n    setPinnedCrns,\n    setExcludedCrns,\n  )]: (state, { payload }) => {\n    const newState = {\n      ...state,\n      ...payload,\n    };\n    saveData(newState);\n    return newState;\n  },\n}, defaultState);\n","import { actions as dbActions } from './db';\nimport { actions as envActions } from './env';\nimport { actions as userActions } from './user';\n\nexport { default as db } from './db';\nexport { default as env } from './env';\nexport { default as user } from './user';\n\nexport const actions = {\n  ...dbActions,\n  ...envActions,\n  ...userActions,\n};\n","import { Component } from 'react';\nimport { shallowCompareEntries } from '../../utils';\n\nclass SemiPureComponent extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    const stateChanged = this.state !== nextState;\n    const propsChanged = !shallowCompareEntries(this.props, nextProps);\n    return stateChanged || propsChanged;\n  }\n}\n\nexport default SemiPureComponent;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { CLOSE, OPEN } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { Section, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Calendar extends SemiPureComponent {\n  render() {\n    const { className, overlayCrns, preview } = this.props;\n    const { mobile } = this.props.env;\n    const { pinnedCrns } = this.props.user;\n\n    return (\n      <div className={classes('Calendar', mobile && 'mobile', preview && 'preview', className)}>\n        {\n          preview &&\n          <img className=\"ratio\" src=\"5x2.png\" alt=\"\"/>\n        }\n        {\n          !preview &&\n          <div className=\"times\">\n            {\n              new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n                const time = OPEN + i * 60;\n                return (\n                  <div className=\"time\" key={time}>\n                    <span className=\"label\">\n                      {timeToShortString(time)}\n                    </span>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          !preview &&\n          <div className=\"days\">\n            {\n              ['M', 'T', 'W', 'R', 'F'].map(day => (\n                <div className=\"day\" key={day}>\n                    <span className=\"label\">\n                      {day}\n                    </span>\n                </div>\n              ))\n            }\n          </div>\n        }\n        <div className=\"meetings\">\n          {\n            pinnedCrns.map(crn => (\n              <Section key={crn} crn={crn} preview={preview}/>\n            ))\n          }\n          {\n            overlayCrns &&\n            overlayCrns.filter(crn => !pinnedCrns.includes(crn)).map(crn => (\n              <Section key={crn} crn={crn} overlay={!preview} preview={preview}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ env, user }) => ({ env, user }), actions)(Calendar);\n","const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\n\nconst PNG_SCALE_FACTOR = 2;\n\nexport {\n  OPEN,\n  CLOSE,\n  PNG_SCALE_FACTOR,\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Calendar, SemiPureComponent } from '../';\nimport { classes, hasConflictBetween } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass Combinations extends SemiPureComponent {\n  getCombinations() {\n    const { oscar } = this.props.db;\n    const { desiredCourses, pinnedCrns, excludedCrns } = this.props.user;\n\n    const combinations = [];\n    const dfs = (courseIndex = 0, combination = []) => {\n      if (courseIndex === desiredCourses.length) {\n        combinations.push(combination);\n        return;\n      }\n      const course = oscar.findCourse(desiredCourses[courseIndex]);\n      const isIncluded = section => !excludedCrns.includes(section.crn);\n      const isPinned = section => pinnedCrns.includes(section.crn);\n      const hasConflict = section => [...pinnedCrns, ...combination].some(crn => hasConflictBetween(oscar.findSection(crn), section));\n      if (course.hasLab) {\n        const pinnedLectures = course.lectures.filter(isPinned);\n        const pinnedLabs = course.labs.filter(isPinned);\n        if (pinnedLabs.length) {\n          pinnedLabs.forEach(lab => {\n            lab.lectures.filter(isIncluded).forEach(lecture => {\n              if (isPinned(lecture)) {\n                dfs(courseIndex + 1, combination);\n              } else {\n                if (hasConflict(lecture)) return;\n                dfs(courseIndex + 1, [...combination, lecture.crn]);\n              }\n            });\n          });\n        } else if (pinnedLectures.length) {\n          pinnedLectures.forEach(lecture => {\n            lecture.labs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...combination, lab.crn]);\n            });\n          });\n        } else {\n          course.lectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            lecture.labs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...combination, lecture.crn, lab.crn]);\n            });\n          });\n        }\n      } else {\n        const sections = Object.values(course.sections);\n        if (sections.some(isPinned)) {\n          dfs(courseIndex + 1, combination);\n        } else {\n          Object.values(course.sectionGroups).forEach(sectionGroup => {\n            const section = sectionGroup.sections.find(isIncluded);\n            if (!section || hasConflict(section)) return;\n            dfs(courseIndex + 1, [...combination, section.crn]);\n          });\n        }\n      }\n    };\n    dfs();\n    return combinations;\n  }\n\n  handleSetPinnedCrns(pinnedCrns) {\n    this.props.setPinnedCrns(pinnedCrns);\n  }\n\n  render() {\n    const { className, onSetOverlayCrns } = this.props;\n    const { pinnedCrns } = this.props.user;\n\n    const combinations = this.getCombinations();\n\n    return (\n      <div className={classes('Combinations', className)}>\n        {\n          combinations.map((combination, i) => (\n            <div className=\"combination\" key={i}\n                 onMouseEnter={() => onSetOverlayCrns(combination)}\n                 onMouseLeave={() => onSetOverlayCrns([])}\n                 onClick={() => this.handleSetPinnedCrns([...pinnedCrns, ...combination])}>\n              <div className=\"number\">{i + 1}</div>\n              <Calendar className=\"preview\" overlayCrns={combination} preview/>\n            </div>\n          ))\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(Combinations);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, periodToString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Course extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false,\n    };\n  }\n\n  handleRemoveCourse(course) {\n    const { desiredCourses, pinnedCrns, excludedCrns } = this.props.user;\n    this.props.setDesiredCourses(desiredCourses.filter(courseId => courseId !== course.id));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !Object.values(course.sections).some(section => section.crn === crn)));\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !Object.values(course.sections).some(section => section.crn === crn)));\n  }\n\n  handleTogglePinned(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (pinnedCrns.includes(section.crn)) {\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setPinnedCrns([...pinnedCrns, section.crn]);\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExcluded(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (excludedCrns.includes(section.crn)) {\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setExcludedCrns([...excludedCrns, section.crn]);\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  render() {\n    const { className, courseId, expandable, onClick, onSetOverlayCrns } = this.props;\n    const { oscar } = this.props.db;\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    const { expanded } = this.state;\n\n    const course = oscar.findCourse(courseId);\n\n    return (\n      <div className={classes('Course', className)} style={{ backgroundColor: course.color }} key={course.id}\n           onClick={onClick}>\n        <div className=\"course-header\" onClick={expandable ? () => this.handleToggleExpanded() : undefined}>\n          <div className=\"row\">\n            <span className=\"course_id\">{course.id}</span>\n            <span className=\"section_ids\">\n              {Object.values(course.sections).filter(section => pinnedCrns.includes(section.crn)).map(section => section.id).join(', ')}\n            </span>\n          </div>\n          <div className=\"row\">\n            <span className=\"course_title\" dangerouslySetInnerHTML={{ __html: course.title }}/>\n            {\n              expandable &&\n              <span className=\"toggle\">{expanded ? '-' : '+'}</span>\n            }\n          </div>\n        </div>\n        {\n          expanded &&\n          <div className=\"sections\">\n            {\n              Object.values(course.sections).map(section => {\n                const excluded = excludedCrns.includes(section.crn);\n                const pinned = pinnedCrns.includes(section.crn);\n                return (\n                  <div className={classes('section', excluded && 'excluded', pinned && 'pinned')}\n                       key={section.id} onClick={() => this.handleTogglePinned(section)}\n                       onMouseEnter={() => onSetOverlayCrns([section.crn])}\n                       onMouseLeave={() => onSetOverlayCrns([])}>\n                    <div className=\"section-header\">\n                      <span className=\"section_id\">{section.id}</span>\n                      <span className=\"instructors\">{section.instructors.join(', ')}</span>\n                    </div>\n                    {\n                      !excluded &&\n                      <div className=\"meetings\">\n                        {\n                          section.meetings.map((meeting, i) => {\n                            return (\n                              <div className=\"meeting\" key={i}>\n                                <span className=\"days\">{meeting.days.join('')}</span>\n                                <span className=\"period\">{periodToString(meeting.period)}</span>\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    }\n                    <div className=\"actions\">\n                      <div className=\"exclude\"\n                           onClick={e => {\n                             e.stopPropagation();\n                             this.handleToggleExcluded(section);\n                           }}>{excluded ? 'Include' : 'Exclude'}</div>\n                    </div>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          expanded &&\n          <div className=\"actions section-actions\">\n            <div className=\"dim\" onClick={() => this.handleRemoveCourse(course)}>Remove</div>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(Course);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Course, SemiPureComponent } from '../';\nimport { classes } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass CourseAdd extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      keyword: '',\n    };\n\n    this.inputRef = React.createRef();\n\n    this.handleChangeKeyword = this.handleChangeKeyword.bind(this);\n    this.handlePressEnter = this.handlePressEnter.bind(this);\n  }\n\n  handleChangeKeyword(e) {\n    const keyword = e.target.value;\n    this.setState({ keyword });\n  }\n\n  handlePressEnter(e) {\n    const { oscar } = this.props.db;\n    const { keyword } = this.state;\n\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      const courses = oscar.searchCourses(keyword);\n      if (courses.length) this.handleAddCourse(courses[0]);\n    }\n  }\n\n  handleAddCourse(course) {\n    const { desiredCourses, excludedCrns } = this.props.user;\n    if (desiredCourses.includes(course.id)) return;\n    const tbaCrns = Object.values(course.sections)\n      .filter(section => !section.meetings.length || section.meetings.some(meeting => !meeting.days.length || !meeting.period))\n      .map(section => section.crn);\n    this.props.setDesiredCourses([...desiredCourses, course.id]);\n    this.props.setExcludedCrns([...excludedCrns, ...tbaCrns]);\n\n    this.setState({ keyword: '' });\n    this.inputRef.current.focus();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    const { keyword } = this.state;\n\n    return (\n      <div className={classes('CourseAdd', className)}>\n        <input type=\"text\" ref={this.inputRef} value={keyword} onChange={this.handleChangeKeyword}\n               className=\"keyword\"\n               placeholder=\"XX 0000\" onKeyPress={this.handlePressEnter}/>\n        <div className=\"autocomplete\">\n          {\n            keyword &&\n            oscar.searchCourses(keyword).map(course => (\n              <Course courseId={course.id} onClick={() => this.handleAddCourse(course)} key={course.id}\n                      pinnedCrns={pinnedCrns}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(CourseAdd);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, periodToString } from '../../utils';\nimport { CLOSE, OPEN } from '../../constants';\nimport { SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass Section extends SemiPureComponent {\n  render() {\n    const { className, crn, overlay, preview } = this.props;\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n\n    const section = oscar.findSection(crn);\n\n    return (\n      <div className={classes('Section', mobile && 'mobile', overlay && 'overlay', className)}>\n        {\n          section.meetings.map((meeting, i) => meeting.period && (\n            meeting.days.map(day => (\n              <div className={`meeting ${day}`} key={[i, day].join('-')}\n                   style={{\n                     top: (meeting.period.start - OPEN) / (CLOSE - OPEN) * 100 + '%',\n                     height: (meeting.period.end - meeting.period.start) / (CLOSE - OPEN) * 100 + '%',\n                     backgroundColor: section.course.color,\n                   }}>\n                {\n                  !preview &&\n                  <div className=\"meeting-wrapper\">\n                    <span className=\"course_id\">{section.course.id}{mobile ? '' : ` ${section.id}`}</span>\n                    <span className=\"period\">{periodToString(meeting.period)}</span>\n                    {\n                      !mobile &&\n                      <span className=\"where\">{meeting.where}</span>\n                    }\n                    {\n                      !mobile &&\n                      <span className=\"instructors\">{meeting.instructors.join(', ')}</span>\n                    }\n                  </div>\n                }\n              </div>\n            ))\n          ))\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ env, db }) => ({ env, db }), actions)(Section);\n","import { Course } from './';\n\nclass Oscar {\n  constructor(data) {\n    this.courses = Object.keys(data).map(courseId => new Course(courseId, data[courseId]));\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach(course => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach(section => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n  }\n\n  findCourse(courseId) {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn) {\n    return this.crnMap[crn];\n  }\n\n  searchCourses(keyword) {\n    const [, subject, number] = /^\\s*([a-zA-Z]*)\\s*(\\d*)\\s*$/.exec(keyword.toUpperCase()) || [];\n    if (subject && number) {\n      return this.courses.filter(course => course.subject === subject && course.number.startsWith(number));\n    } else if (subject) {\n      return this.courses.filter(course => course.subject === subject);\n    } else if (number) {\n      return this.courses.filter(course => course.number.startsWith(number));\n    } else {\n      return [];\n    }\n  }\n}\n\nexport default Oscar;\n","import { getRandomColor } from '../utils';\nimport { Section } from './';\n\nclass Course {\n  constructor(courseId, data) {\n    this.id = courseId;\n    [this.subject, this.number] = this.id.split(' ');\n    this.title = data.title;\n    this.color = getRandomColor(32, 160);\n    this.sections = Object.keys(data.sections).map(sectionId => new Section(this, sectionId, data.sections[sectionId]));\n\n    const lectures = this.sections.filter(section => section.credits > 0);\n    const labs = this.sections.filter(section => section.credits === 0);\n    this.hasLab = !this.id.startsWith('VIP') && lectures.length && labs.length;\n    if (this.hasLab) {\n      this.lectures = lectures;\n      this.labs = labs;\n      this.lectures.forEach(lecture => lecture.labs = this.labs.filter(lab => lab.id.startsWith(lecture.id)));\n      this.labs.forEach(lab => lab.lectures = this.lectures.filter(lecture => lab.id.startsWith(lecture.id)));\n      if (this.lectures.every(lecture => !lecture.labs.length)) {\n        this.lectures.forEach(lecture => lecture.labs = this.labs);\n        this.labs.forEach(lab => lab.lectures = this.lectures);\n      }\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections) {\n    let groups = {};\n    sections.forEach(section => {\n      const sectionGroupMeetings = section.meetings.map(({ days, period }) => ({ days, period }));\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section],\n        };\n      }\n    });\n    return groups;\n  };\n}\n\nexport default Course;\n","import { stringToTime } from '../utils';\n\nclass Section {\n  constructor(course, sectionId, data) {\n    this.course = course;\n    this.id = sectionId;\n    this.crn = data.crn;\n    this.credits = data.credits;\n    this.meetings = data.meetings.map(({ days, period, instructors, where }) => ({\n      days: days === '&nbsp;' ? [] : [...days],\n      period: period === 'TBA' ? undefined : {\n        start: stringToTime(period.split(' - ')[0]),\n        end: stringToTime(period.split(' - ')[1]),\n      },\n      instructors,\n      where,\n    }));\n    this.instructors = [...new Set(this.meetings.reduce((instructors, meeting) => [...instructors, ...meeting.instructors], []))];\n  }\n}\n\nexport default Section;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport domtoimage from 'dom-to-image';\nimport saveAs from 'file-saver';\nimport { classes, isMobile } from '../../utils';\nimport { PNG_SCALE_FACTOR } from '../../constants';\nimport { Calendar, Combinations, Course, CourseAdd, SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport { Oscar } from '../../beans';\nimport './stylesheet.scss';\n\nclass App extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      overlayCrns: [],\n      tabIndex: 0,\n    };\n\n    this.captureRef = React.createRef();\n\n    this.handleResize = this.handleResize.bind(this);\n    this.handleSetOverlayCrns = this.handleSetOverlayCrns.bind(this);\n    this.handleDownload = this.handleDownload.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('https://jasonpark.me/gt-schedule-crawler/courses.json')\n      .then(res => {\n        const oscar = new Oscar(res.data);\n        this.props.setOscar(oscar);\n      });\n\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  getTotalCredits() {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    return pinnedCrns.reduce((credits, crn) => credits + oscar.findSection(crn).credits, 0);\n  }\n\n  handleResize(e) {\n    const { mobile } = this.props.env;\n    const nextMobile = isMobile();\n    if (mobile !== nextMobile) {\n      this.props.setMobile(nextMobile);\n    }\n  }\n\n  handleSetPinnedCrns(pinnedCrns) {\n    this.props.setPinnedCrns(pinnedCrns);\n  }\n\n  handleSetOverlayCrns(overlayCrns) {\n    this.setState({ overlayCrns });\n  }\n\n  handleDownload() {\n    const { current } = this.captureRef;\n    domtoimage.toPng(current, {\n      width: current.offsetWidth * PNG_SCALE_FACTOR,\n      height: current.offsetHeight * PNG_SCALE_FACTOR,\n      style: {\n        'left': 0,\n        'transform': `scale(${PNG_SCALE_FACTOR})`,\n        'transform-origin': 'top left',\n      },\n    }).then(blob => saveAs(blob, 'schedule.png'));\n  }\n\n  handleChangeTab(tabIndex) {\n    this.setState({ tabIndex });\n  }\n\n  render() {\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n    const { pinnedCrns, desiredCourses } = this.props.user;\n    const { overlayCrns, tabIndex } = this.state;\n\n    return oscar && (\n      <div className={classes('App', mobile && 'mobile')}>\n        {\n          !mobile &&\n          <div className=\"calendar-container\">\n            <Calendar overlayCrns={overlayCrns}/>\n          </div>\n        }\n        <div className=\"capture-container\" ref={this.captureRef}>\n          <Calendar className=\"fake-calendar\"/>\n        </div>\n        <div className=\"sidebar\">\n          {\n            mobile &&\n            <div className=\"tab-container\">\n              {\n                ['Courses', 'Combinations', 'Calendar'].map((tabTitle, i) => (\n                  <div className={classes('tab', tabIndex === i && 'active')} onClick={() => this.handleChangeTab(i)}\n                       key={i}>\n                    {tabTitle}\n                  </div>\n                ))\n              }\n            </div>\n          }\n          <div className=\"title\">\n            <span className=\"primary\">Spring 2019</span>\n            <span className=\"secondary\">\n              {this.getTotalCredits()} Credits\n            </span>\n          </div>\n          <div className=\"scroller\">\n            <div className={classes('courses-container', tabIndex === 0 && 'active')}>\n              {\n                pinnedCrns.length > 0 &&\n                <CopyToClipboard className=\"button\" text={pinnedCrns.join(', ')}>\n                  <span>{pinnedCrns.join(', ')}</span>\n                </CopyToClipboard>\n              }\n              <div className=\"course-list\">\n                {\n                  desiredCourses.map(courseId => {\n                    return (\n                      <Course courseId={courseId} expandable key={courseId}\n                              onSetOverlayCrns={this.handleSetOverlayCrns}/>\n                    );\n                  })\n                }\n              </div>\n              <CourseAdd/>\n            </div>\n            <div className={classes('combinations-container', tabIndex === 1 && 'active')}>\n              {\n                pinnedCrns.length > 0 &&\n                <div className=\"button\" onClick={() => this.handleSetPinnedCrns([])}>\n                  Reset Sections\n                </div>\n              }\n              <Combinations className=\"combinations\" onSetOverlayCrns={this.handleSetOverlayCrns}/>\n            </div>\n            {\n              mobile &&\n              <div className={classes('calendar-container', tabIndex === 2 && 'active')}>\n                <Calendar overlayCrns={overlayCrns}/>\n              </div>\n            }\n          </div>\n          <div className=\"button\" onClick={this.handleDownload}>\n            Download as PNG\n          </div>\n          <a className=\"button\" href=\"https://github.com/parkjs814/gt-scheduler\" rel=\"noopener noreferrer\"\n             target=\"_blank\">\n            Fork me on GitHub\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { combineReducers, createStore } from 'redux';\nimport * as reducers from './reducers';\nimport App from './components/App';\nimport './stylesheet.css';\n\nconst store = createStore(combineReducers(reducers));\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}