(this["webpackJsonpgt-scheduler"]=this["webpackJsonpgt-scheduler"]||[]).push([[0],{294:function(e,t,s){e.exports=s(639)},425:function(e,t,s){},429:function(e,t,s){},431:function(e,t,s){},432:function(e,t,s){},433:function(e,t,s){},434:function(e,t,s){},435:function(e,t,s){},436:function(e,t,s){},437:function(e,t,s){},438:function(e,t,s){},458:function(e,t){},472:function(e,t){},474:function(e,t){},636:function(e,t,s){},638:function(e,t,s){},639:function(e,t,s){"use strict";s.r(t);var n={};s.r(n),s.d(n,"db",(function(){return E})),s.d(n,"env",(function(){return _})),s.d(n,"user",(function(){return $})),s.d(n,"actions",(function(){return Z}));var a=s(0),r=s.n(a),i=s(74),c=s.n(i),o=s(8),l=s(75),d=s(2),u=s(642),p=s(640),h=s(641);const m=Object(u.a)("".concat("DB","/SET_OSCAR"),e=>({oscar:e})),b={setOscar:m};var E=Object(p.a)({[Object(h.a)(m)]:(e,{payload:t})=>Object(d.a)(Object(d.a)({},e),t)},{oscar:null}),g=s(16);const f=["M","T","W","R","F"],C=[["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF"],["#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF"],["#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]],v=e=>{const t=/(\d{1,2}):(\d{2}) (a|p)m/.exec(e),s=Object(g.a)(t,4),n=s[1],a=s[2];return 60*(("p"===s[3]?12:0)+Number.parseInt(n%12))+Number.parseInt(a)},N=(e,t=!0)=>{const s=e/60|0,n=e%60;return"".concat(s>12?s-12:s,":").concat(n<10?"0"+n:n).concat(t?" ".concat(s<12?"a":"p","m"):"")},y=e=>e?"".concat(N(e.start,!1)," - ").concat(N(e.end)):"TBA",S=()=>{const e=C.flat();return e[Math.random()*e.length|0]},O=e=>.299*parseInt(e.substring(1,3),16)+.587*parseInt(e.substring(3,5),16)+.114*parseInt(e.substring(5,7),16)>128?"light-content":"dark-content",x=(e,t)=>e.meetings.some(e=>t.meetings.some(t=>e.period&&t.period&&f.some(s=>e.days.includes(s)&&t.days.includes(s))&&e.period.start<t.period.end&&t.period.start<e.period.end)),w=(...e)=>e.filter(e=>e).join(" "),j=()=>window.innerWidth<768,T=e=>{const t=e.split(" ");return[t.shift(),t.pop()].join(" ")},R=e=>[...new Set(e)],k=e=>e.scheduleType.includes("Lab"),A=e=>e.scheduleType.includes("Lecture"),M=e=>{const t=e.substring(0,4),s=(()=>{switch(Number.parseInt(e.substring(4))){case 1:return"Winter";case 2:case 3:return"Spring";case 5:case 6:return"Summer";case 8:case 9:return"Fall";default:return"Unknown"}})();return"".concat(s," ").concat(t)},D=e=>["Hybrid Course","Isolate Course in Canvas","Remote Synchronous Course","Remote Asynchronous Course","Residential Course"].includes(e),I=e=>e.split(" ").filter(e=>"Course"!==e).join(" "),L=Object(u.a)("".concat("ENV","/SET_MOBILE"),e=>({mobile:e})),B=Object(u.a)("".concat("ENV","/SET_OVERLAY_CRNS"),e=>({overlayCrns:e})),F={setMobile:L,setOverlayCrns:B},P={mobile:j(),overlayCrns:[]};var _=Object(p.a)({[Object(h.a)(L,B)]:(e,{payload:t})=>Object(d.a)(Object(d.a)({},e),t)},P),U=s(19),W=s.n(U);const G=Object(u.a)("".concat("USER","/SET_TERM"),e=>X(e)),H=Object(u.a)("".concat("USER","/SET_DESIRED_COURSES"),e=>({desiredCourses:e})),Y=Object(u.a)("".concat("USER","/SET_PINNED_CRNS"),e=>({pinnedCrns:e})),V=Object(u.a)("".concat("USER","/SET_EXCLUDED_CRNS"),e=>({excludedCrns:e})),q=Object(u.a)("".concat("USER","/SET_COLOR_MAP"),e=>({colorMap:e})),z=Object(u.a)("".concat("USER","/SET_SORTING_OPTION_INDEX"),e=>({sortingOptionIndex:e})),K={setTerm:G,setDesiredCourses:H,setPinnedCrns:Y,setExcludedCrns:V,setColorMap:q,setSortingOptionIndex:z},X=(e=W.a.get("term"))=>{let t=null;try{t=JSON.parse(W.a.get(e))}catch(h){t={}}const s=t,n=s.desiredCourses,a=void 0===n?[]:n,r=s.pinnedCrns,i=void 0===r?[]:r,c=s.excludedCrns,o=void 0===c?[]:c,l=s.colorMap,d=void 0===l?{}:l,u=s.sortingOptionIndex,p=void 0===u?0:u;return a.forEach(e=>{e in d||(d[e]=S())}),{term:e,desiredCourses:a,pinnedCrns:i,excludedCrns:o,colorMap:d,sortingOptionIndex:p}};!function(){const e=W.a.get("data");e&&(W.a.set("term","201902"),W.a.set("201902",e),W.a.remove("data"))}();const J=X();var $=Object(p.a)({[Object(h.a)(G,H,Y,V,q,z)]:(e,{payload:t})=>{const s=Object(d.a)(Object(d.a)({},e),t);return(({term:e,desiredCourses:t=[],pinnedCrns:s=[],excludedCrns:n=[],colorMap:a={},sortingOptionIndex:r=0})=>{W.a.set("term",e),W.a.set(e,JSON.stringify({desiredCourses:t,pinnedCrns:s,excludedCrns:n,colorMap:a,sortingOptionIndex:r}),{expires:365})})(s),s}},J);const Z=Object(d.a)(Object(d.a)(Object(d.a)({},b),F),K);var Q=s(77),ee=s.n(Q),te=s(281),se=s.n(te),ne=s(282),ae=s.n(ne),re=s(168),ie=s(165);var ce=function(e,t){if(!(navigator.userAgent.indexOf("MSIE")>-1&&-1===navigator.userAgent.indexOf("MSIE 10"))){"undefined"===typeof e&&(e="default"),"undefined"===typeof t&&(t="Calendar");var s=-1!==navigator.appVersion.indexOf("Win")?"\r\n":"\n",n=[],a=["BEGIN:VCALENDAR","PRODID:"+t,"VERSION:2.0"].join(s),r=s+"END:VCALENDAR",i=["SU","MO","TU","WE","TH","FR","SA"];return{events:function(){return n},calendar:function(){return a+s+n.join(s)+r},addEvent:function(t,a,r,c,o,l){if("undefined"===typeof t||"undefined"===typeof a||"undefined"===typeof r||"undefined"===typeof c||"undefined"===typeof o)return!1;if(l&&!l.rrule){if("YEARLY"!==l.freq&&"MONTHLY"!==l.freq&&"WEEKLY"!==l.freq&&"DAILY"!==l.freq)throw new Error("Recurrence rrule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'");if(l.until&&isNaN(Date.parse(l.until)))throw new Error("Recurrence rrule 'until' must be a valid date string");if(l.interval&&isNaN(parseInt(l.interval)))throw new Error("Recurrence rrule 'interval' must be an integer");if(l.count&&isNaN(parseInt(l.count)))throw new Error("Recurrence rrule 'count' must be an integer");if("undefined"!==typeof l.byday){if("[object Array]"!==Object.prototype.toString.call(l.byday))throw new Error("Recurrence rrule 'byday' must be an array");if(l.byday.length>7)throw new Error("Recurrence rrule 'byday' array must not be longer than the 7 days in a week");for(var d in l.byday=l.byday.filter((function(e,t){return l.byday.indexOf(e)===t})),l.byday)if(i.indexOf(l.byday[d])<0)throw new Error("Recurrence rrule 'byday' values must include only the following: 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'")}}var u=new Date(c),p=new Date(o),h=new Date,m=("0000"+u.getFullYear().toString()).slice(-4),b=("00"+(u.getMonth()+1).toString()).slice(-2),E=("00"+u.getDate().toString()).slice(-2),g=("00"+u.getHours().toString()).slice(-2),f=("00"+u.getMinutes().toString()).slice(-2),C=("00"+u.getSeconds().toString()).slice(-2),v=("0000"+p.getFullYear().toString()).slice(-4),N=("00"+(p.getMonth()+1).toString()).slice(-2),y=("00"+p.getDate().toString()).slice(-2),S=("00"+p.getHours().toString()).slice(-2),O=("00"+p.getMinutes().toString()).slice(-2),x=("00"+p.getSeconds().toString()).slice(-2),w="",j="";g+f+C+S+O+x!==0&&(w="T"+g+f+C,j="T"+S+O+x);var T,R=m+b+E+w,k=v+N+y+j,A=("0000"+h.getFullYear().toString()).slice(-4)+("00"+(h.getMonth()+1).toString()).slice(-2)+("00"+h.getDate().toString()).slice(-2)+("T"+("00"+h.getHours().toString()).slice(-2)+("00"+h.getMinutes().toString()).slice(-2)+("00"+h.getSeconds().toString()).slice(-2));if(l)if(l.rrule)T=l.rrule;else{if(T="RRULE:FREQ="+l.freq,l.until){var M=new Date(Date.parse(l.until)).toISOString();T+=";UNTIL="+M.substring(0,M.length-13).replace(/[-]/g,"")+"000000Z"}l.interval&&(T+=";INTERVAL="+l.interval),l.count&&(T+=";COUNT="+l.count),l.byday&&l.byday.length>0&&(T+=";BYDAY="+l.byday.join(","))}var D=["BEGIN:VEVENT","UID:"+n.length+"@"+e,"CLASS:PUBLIC","DESCRIPTION:"+a,"DTSTAMP;VALUE=DATE-TIME:"+A,"DTSTART;VALUE=DATE-TIME:"+R,"DTEND;VALUE=DATE-TIME:"+k,"LOCATION:"+r,"SUMMARY;LANGUAGE=en-us:"+t,"TRANSP:TRANSPARENT","END:VEVENT"];return T&&D.splice(4,0,T),D=D.join(s),n.push(D),D},download:function(e,t){if(n.length<1)return!1;t="undefined"!==typeof t?t:".ics",e="undefined"!==typeof e?e:"calendar";var i,c=a+s+n.join(s)+r;if(-1===navigator.userAgent.indexOf("MSIE 10"))i=new Blob([c]);else{var o=new BlobBuilder;o.append(c),i=o.getBlob("text/x-vCalendar;charset="+document.characterSet)}return saveAs(i,e+t),c},build:function(){return!(n.length<1)&&a+s+n.join(s)+r}}}console.log("Unsupported Browser")};class oe extends a.Component{shouldComponentUpdate(e,t){const s=this.state!==t,n=!((e,t)=>{const s=Object.keys(e),n=Object.keys(t);return s.length===n.length&&s.every(s=>s in t&&e[s]===t[s])})(this.props,e);return s||n}}var le=oe,de=s(42),ue=(s(425),s(283)),pe=s.n(ue);s(429);class he extends a.Component{render(){const e=this.props,t=e.className,s=e.disabled,n=e.text,a=Object(de.a)(e,["className","disabled","text"]),i=Object(d.a)({className:w("Button",s&&"disabled",t)},a);return s?r.a.createElement("div",{className:i.className},i.children):"href"in i?r.a.createElement("a",Object.assign({},i,{rel:"noopener noreferrer",target:"_blank"})):n?r.a.createElement(pe.a,{text:n},r.a.createElement("div",i)):r.a.createElement("div",i)}}var me=he,be=s(18);class Ee extends a.Component{render(){const e=this.props,t=e.className,s=e.label,n=e.children,a=e.actions,i=Object(de.a)(e,["className","label","children","actions"]);return r.a.createElement("div",Object.assign({className:w("ActionRow",t)},i),r.a.createElement("div",{className:"action-row-header"},r.a.createElement("div",{className:"label"},s),r.a.createElement("div",{className:w("actions","default")},a.filter(e=>e).map((e,t)=>{let s=e.icon,n=Object(de.a)(e,["icon"]);return r.a.createElement(me,Object.assign({className:"action"},n,{key:t}),r.a.createElement(be.a,{fixedWidth:!0,icon:s}))}))),n)}}var ge=Ee;s(431);var fe=Object(o.b)(({env:e,user:t})=>({env:e,user:t}),Z)(class extends le{render(){const e=this.props,t=e.className,s=e.overlayCrns,n=e.preview,a=e.capture,i=this.props.env.mobile&&!a,c=this.props.user.pinnedCrns;return r.a.createElement("div",{className:w("Calendar",i&&"mobile",n&&"preview",t)},!n&&r.a.createElement("div",{className:"times"},new Array(13).fill(0).map((e,t)=>{const s=480+60*t;return r.a.createElement("div",{className:"time",key:s},r.a.createElement("span",{className:"label"},(e=>{const t=e/60|0;return"".concat(t>12?t-12:t).concat(t<12?"a":"p","m")})(s)))})),!n&&r.a.createElement("div",{className:"days"},f.map(e=>r.a.createElement("div",{className:"day",key:e},r.a.createElement("span",{className:"label"},e)))),r.a.createElement("div",{className:"meetings"},c.map(e=>r.a.createElement(ke,{key:e,crn:e,preview:n,capture:a})),s&&s.filter(e=>!c.includes(e)).map(e=>r.a.createElement(ke,{key:e,crn:e,overlay:!n,preview:n,capture:a}))))}}),Ce=s(7);s(432);var ve=Object(o.b)(({db:e,user:t})=>({db:e,user:t}),Z)(class extends le{constructor(e){super(e),this.state={expanded:!1,paletteShown:!1,gpaMap:{}},this.handleSelectColor=this.handleSelectColor.bind(this)}componentDidMount(){const e=this.props,t=e.courseId,s=e.onAddCourse,n=this.props.db.oscar;if(!s){n.findCourse(t).fetchGpa().then(e=>this.setState({gpaMap:e}))}}handleRemoveCourse(e){const t=this.props.user,s=t.desiredCourses,n=t.pinnedCrns,a=t.excludedCrns,r=t.colorMap;this.props.setDesiredCourses(s.filter(t=>t!==e.id)),this.props.setPinnedCrns(n.filter(t=>!e.sections.some(e=>e.crn===t))),this.props.setExcludedCrns(a.filter(t=>!e.sections.some(e=>e.crn===t))),this.props.setColorMap(Object(d.a)(Object(d.a)({},r),{},{[e.id]:void 0}))}handleToggleExpanded(e=!this.state.expanded){this.setState({expanded:e})}handleSelectColor(e){const t=this.props.courseId,s=this.props.user.colorMap;this.props.setColorMap(Object(d.a)(Object(d.a)({},s),{},{[t]:e}))}handleTogglePaletteShown(e=!this.state.paletteShown){this.setState({paletteShown:e})}handleIncludeSections(e){const t=this.props.user.excludedCrns,s=e.map(e=>e.crn);this.props.setExcludedCrns(t.filter(e=>!s.includes(e)))}render(){const e=this.props,t=e.className,s=e.courseId,n=e.onAddCourse,a=this.props.db.oscar,i=this.props.user,c=i.term,o=i.pinnedCrns,l=i.excludedCrns,d=i.colorMap,u=this.state,p=u.expanded,h=u.paletteShown,m=u.gpaMap,b=a.findCourse(s),E=d[b.id],f=E&&O(E),C={};b.sections.forEach(e=>{const t=Object(g.a)(e.instructors,1)[0],s=void 0===t?"Not Assigned":t;s in C||(C[s]=[]),C[s].push(e)});const v=Object.keys(C),N=v.filter(e=>C[e].every(e=>l.includes(e.crn))),y=v.filter(e=>!N.includes(e)),S={icon:Ce.d,href:"https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_course_detail?cat_term_in=".concat(c,"&subj_code_in=").concat(b.subject,"&crse_numb_in=").concat(b.number)},x=b.sections.filter(e=>o.includes(e.crn)),j=x.reduce((e,t)=>e+t.credits,0);return r.a.createElement("div",{className:w("Course",f,"default",n&&"temporary",t),style:{backgroundColor:E},key:b.id},r.a.createElement(ge,{label:[b.id,x.map(e=>e.id).join(", ")].join(" "),actions:n?[{icon:Ce.f,onClick:n},S]:[{icon:p?Ce.b:Ce.a,onClick:()=>this.handleToggleExpanded()},S,{icon:Ce.e,onClick:()=>this.handleTogglePaletteShown()},{icon:Ce.i,onClick:()=>this.handleRemoveCourse(b)}]},r.a.createElement("div",{className:"course-row"},r.a.createElement("span",{className:"course-title",dangerouslySetInnerHTML:{__html:b.title}}),r.a.createElement("span",{className:"section-crns"},x.map(e=>e.crn).join(", "))),!n&&r.a.createElement("div",{className:"course-row"},r.a.createElement("span",{className:"gpa"},"Course GPA: ",m.averageGpa||"N/A"),j>0&&r.a.createElement("span",{className:"credits"},j," Credits")),h&&r.a.createElement(xe,{className:"palette",onSelectColor:this.handleSelectColor,color:E,onMouseLeave:()=>this.handleTogglePaletteShown(!1)})),p&&r.a.createElement("div",{className:w("instructor-container","nested")},y.map(e=>r.a.createElement(Se,{key:e,color:E,name:e,sections:C[e],gpa:m[e]})),N.length>0&&r.a.createElement("div",{className:"excluded-instructor-container"},N.map(e=>r.a.createElement("span",{className:"excluded-instructor",key:e,onClick:()=>this.handleIncludeSections(C[e])},e)))))}}),Ne=(s(433),s(284));var ye=Object(o.b)(({db:e,user:t})=>({db:e,user:t}),Z)(class extends le{constructor(e){super(e),this.state={keyword:""},this.inputRef=r.a.createRef(),this.handleChangeKeyword=this.handleChangeKeyword.bind(this),this.handlePressEnter=this.handlePressEnter.bind(this)}handleChangeKeyword(e){const t=e.target.value;this.setState({keyword:t})}handlePressEnter(e){const t=this.props.db.oscar,s=this.state.keyword;if("Enter"===e.key){e.preventDefault();const n=t.searchCourses(s);n.length&&this.handleAddCourse(n[0])}}handleAddCourse(e){const t=this.props.user,s=t.desiredCourses,n=t.excludedCrns,a=t.colorMap;if(s.includes(e.id))return;const r=e.sections.filter(e=>!e.meetings.length||e.meetings.some(e=>!e.days.length||!e.period)).map(e=>e.crn);this.props.setDesiredCourses([...s,e.id]),this.props.setExcludedCrns([...n,...r]),this.props.setColorMap(Object(d.a)(Object(d.a)({},a),{},{[e.id]:S()})),this.setState({keyword:""}),this.inputRef.current.focus()}render(){const e=this.props.className,t=this.props.db.oscar,s=this.props.user,n=s.desiredCourses,a=s.pinnedCrns,i=this.state.keyword,c=t.searchCourses(i).filter(e=>!n.includes(e.id));return r.a.createElement("div",{className:w("CourseAdd",e)},r.a.createElement("div",{className:"add"},r.a.createElement(be.a,{className:w("icon",c.length&&"active"),fixedWidth:!0,icon:Ne.faPlus}),r.a.createElement("input",{type:"text",ref:this.inputRef,value:i,onChange:this.handleChangeKeyword,className:"keyword",placeholder:"XX 0000",onKeyPress:this.handlePressEnter})),c.slice(0,10).map(e=>r.a.createElement(ve,{key:e.id,courseId:e.id,pinnedCrns:a,onAddCourse:()=>this.handleAddCourse(e)})))}});s(434);var Se=Object(o.b)(({user:e})=>({user:e}),Z)(class extends le{constructor(e){super(e),this.state={expanded:!0}}includeSection(e){const t=this.props.user.excludedCrns;this.props.setExcludedCrns(t.filter(t=>t!==e.crn))}excludeSections(e){const t=this.props.user,s=t.pinnedCrns,n=t.excludedCrns,a=e.map(e=>e.crn);this.props.setExcludedCrns(R([...n,...a])),this.props.setPinnedCrns(s.filter(e=>!a.includes(e)))}toggleExpanded(e=!this.state.expanded){this.setState({expanded:e})}render(){const e=this.props,t=e.className,s=e.color,n=e.name,a=e.sections,i=e.gpa,c=this.props.user,o=c.pinnedCrns,l=c.excludedCrns,d=this.state.expanded,u=a.some(e=>o.includes(e.crn)),p=a.filter(e=>!l.includes(e.crn)),h=a.filter(e=>l.includes(e.crn));return r.a.createElement("div",{className:w("Instructor",!d&&"divider-bottom",t)},r.a.createElement(ge,{label:n||"Not Assigned",actions:[{icon:d?Ce.b:Ce.a,onClick:()=>this.toggleExpanded()},!["TBA","Not Assigned"].includes(n)&&{icon:Ce.d,href:"http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=".concat(encodeURIComponent(T(n)))},{icon:Ce.c,onClick:()=>this.excludeSections(a)}],style:u?{backgroundColor:s}:void 0},r.a.createElement("div",{className:"instructor-row"},r.a.createElement("span",{className:"gpa"},"Instructor GPA: ",i||"N/A"))),d&&r.a.createElement("div",{className:w("section-container","nested")},p.map(e=>{const t=o.includes(e.crn);return r.a.createElement(we,{key:e.id,className:"divider-bottom",section:e,color:s,pinned:t})}),h.length>0&&r.a.createElement("div",{className:"excluded-section-container"},h.map(e=>r.a.createElement("span",{className:"excluded-section",key:e.id,onClick:()=>this.includeSection(e)},e.id)))))}});s(435);class Oe extends a.Component{render(){const e=this.props,t=e.className,s=e.color,n=e.onSelectColor,a=Object(de.a)(e,["className","color","onSelectColor"]);return r.a.createElement("div",Object.assign({className:w("Palette",t)},a),C.map((e,t)=>r.a.createElement("div",{className:"palette-row",key:t},e.map(e=>r.a.createElement("div",{className:w("color",e===s&&"frame"),key:e,style:{backgroundColor:e},onClick:()=>n(e)})))))}}var xe=Oe;s(436);var we=Object(o.b)(({user:e})=>({user:e}),Z)(class extends le{excludeSection(e){const t=this.props.user,s=t.pinnedCrns,n=t.excludedCrns;this.props.setExcludedCrns([...n,e.crn]),this.props.setPinnedCrns(s.filter(t=>t!==e.crn))}pinSection(e){const t=this.props.user,s=t.pinnedCrns,n=t.excludedCrns;s.includes(e.crn)?this.props.setPinnedCrns(s.filter(t=>t!==e.crn)):(this.props.setPinnedCrns([...s,e.crn]),this.props.setExcludedCrns(n.filter(t=>t!==e.crn)))}render(){const e=this.props.user.term,t=this.props,s=t.className,n=t.section,a=t.pinned,i=t.color;return r.a.createElement(ge,{label:n.id,className:w("Section",s),onMouseEnter:()=>this.props.setOverlayCrns([n.crn]),onMouseLeave:()=>this.props.setOverlayCrns([]),actions:[{icon:a?Ce.h:Ce.g,onClick:()=>this.pinSection(n)},{icon:Ce.d,href:"https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=".concat(e,"&crn_in=").concat(n.crn)},{icon:Ce.c,onClick:()=>this.excludeSection(n)}],style:a?{backgroundColor:i}:void 0},r.a.createElement("div",{className:"section-details"},r.a.createElement("div",{className:"instructional-method"},n.attributes.filter(D).map(I).join(", ")),r.a.createElement("div",{className:"meeting-container"},n.meetings.map((e,t)=>r.a.createElement("div",{className:"meeting",key:t},r.a.createElement("span",{className:"days"},e.days.join("")),r.a.createElement("span",{className:"period"},y(e.period)))))))}}),je=(s(437),s(285));class Te extends a.Component{constructor(e){super(e),this.state={opened:!1}}handleOpen(){this.setState({opened:!0})}handleClose(){this.setState({opened:!1})}handleToggle(){this.setState({opened:!this.state.opened})}render(){const e=this.props,t=e.className,s=e.value,n=e.onChange,a=e.options,i=this.state.opened,c=a.find(e=>e.value===s),o=c?c.label:"-";return r.a.createElement("div",{className:w("Button","Select",t),onClick:()=>this.handleToggle()},r.a.createElement("div",{className:"text"},o),r.a.createElement(be.a,{fixedWidth:!0,icon:je.faCaretDown}),i&&r.a.createElement("div",{className:"intercept",onClick:()=>this.handleClose()}),i&&r.a.createElement("div",{className:"option-container"},a.map(({value:e,label:t})=>r.a.createElement(me,{className:"option",key:e,onClick:()=>n(e)},t))))}}var Re=Te;s(438);var ke=Object(o.b)(({env:e,db:t,user:s})=>({env:e,db:t,user:s}),Z)(class extends le{render(){const e=this.props,t=e.className,s=e.crn,n=e.overlay,a=e.preview,i=e.capture,c=this.props.db.oscar,o=this.props.env.mobile&&!i,l=this.props.user.colorMap,d=c.findSection(s),u=l[d.course.id],p=O(u);return r.a.createElement("div",{className:w("TimeBlocks",o&&"mobile",n&&"overlay",t)},d.meetings.map((e,t)=>e.period&&e.days.map(s=>r.a.createElement("div",{className:w("meeting",p,"default",s),key:[t,s].join("-"),style:{top:(e.period.start-480)/780*100+"%",height:(e.period.end-e.period.start)/780*100+"%",backgroundColor:u}},!a&&r.a.createElement("div",{className:"meeting-wrapper"},r.a.createElement("span",{className:"course_id"},d.course.id,o?"":" ".concat(d.id)),r.a.createElement("span",{className:"period"},y(e.period)),!o&&r.a.createElement("span",{className:"where"},e.where),!o&&r.a.createElement("span",{className:"instructors"},e.instructors.join(", ")))))))}});var Ae=class{constructor(e){const t=e.courses,s=e.caches,n=e.updatedAt;this.periods=s.periods.map(e=>{if("TBA"!==e)return{start:v(e.split(" - ")[0]),end:v(e.split(" - ")[1])}}),this.dateRanges=s.dateRanges.map(e=>{const t=e.split(" - ").map(e=>new Date(e)),s=Object(g.a)(t,2),n=s[0],a=s[1];return n.setHours(0),a.setHours(23,59,59,999),{from:n,to:a}}),this.scheduleTypes=s.scheduleTypes,this.campuses=s.campuses,this.attributes=s.attributes,this.gradeBases=s.gradeBases,this.updatedAt=new Date(n),this.courses=Object.keys(t).map(e=>new Fe(this,e,t[e])),this.courseMap={},this.crnMap={},this.courses.forEach(e=>{this.courseMap[e.id]=e,e.sections.forEach(e=>{this.crnMap[e.crn]=e})}),this.sortingOptions=[new _e("Most Compact",e=>{const t=e.startMap,s=e.endMap;return+Object.keys(t).map(e=>s[e]-t[e]).reduce((e,t)=>e+t,0)}),new _e("Earliest Ending",e=>{const t=e.endMap,s=Object.values(t);return+(s.reduce((e,t)=>e+t,0)/s.length)}),new _e("Latest Beginning",e=>{const t=e.startMap,s=Object.values(t);return-(s.reduce((e,t)=>e+t,0)/s.length)})]}findCourse(e){return this.courseMap[e]}findSection(e){return this.crnMap[e]}searchCourses(e){const t=/^\s*([a-zA-Z]*)\s*(\d*)\s*$/.exec(e.toUpperCase())||[],s=Object(g.a)(t,3),n=s[1],a=s[2];return n&&a?this.courses.filter(e=>e.subject===n&&e.number.startsWith(a)):n?this.courses.filter(e=>e.subject===n):a?this.courses.filter(e=>e.number.startsWith(a)):[]}getCombinations(e,t,s){const n=[],a=(r=0,i=[])=>{if(r===e.length)return void n.push(i);const c=this.findCourse(e[r]),o=e=>!s.includes(e.crn),l=e=>t.includes(e.crn),d=e=>[...t,...i].some(t=>x(this.findSection(t),e));if(c.hasLab){const e=c.onlyLectures.find(l),t=c.onlyLabs.find(l),s=c.allInOnes.find(l);e&&t||s?a(r+1,i):e?e.associatedLabs.filter(o).forEach(e=>{d(e)||a(r+1,[...i,e.crn])}):t?t.associatedLectures.filter(o).forEach(e=>{d(e)||a(r+1,[...i,e.crn])}):(c.onlyLectures.filter(o).forEach(e=>{d(e)||e.associatedLabs.filter(o).forEach(t=>{d(t)||a(r+1,[...i,e.crn,t.crn])})}),c.allInOnes.filter(o).forEach(e=>{d(e)||a(r+1,[...i,e.crn])}))}else c.sections.some(l)?a(r+1,i):Object.values(c.sectionGroups).forEach(e=>{const t=e.sections.find(o);t&&!d(t)&&a(r+1,[...i,t.crn])})};return a(),n.map(e=>{const s={},n={};return this.iterateTimeBlocks([...t,...e],(e,t)=>{(!(e in s)||s[e]>t.start)&&(s[e]=t.start),(!(e in n)||n[e]<t.end)&&(n[e]=t.end)}),{crns:e,startMap:s,endMap:n}})}sortCombinations(e,t){const s=this.sortingOptions[t];return e.map(e=>Object(d.a)(Object(d.a)({},e),{},{factor:s.calculateFactor(e)})).sort((e,t)=>e.factor-t.factor)}iterateTimeBlocks(e,t){e.forEach(e=>{this.findSection(e).meetings.forEach(e=>e.period&&e.days.forEach(s=>{t(s,e.period)}))})}},Me=s(167),De=s.n(Me),Ie=s(286),Le=s(287),Be=s.n(Le);var Fe=class{constructor(e,t,s){const n=Object(g.a)(s,2),a=n[0],r=n[1];this.id=t;var i=this.id.split(" "),c=Object(g.a)(i,2);this.subject=c[0],this.number=c[1],this.title=a,this.sections=Object.keys(r).map(t=>new Pe(e,this,t,r[t]));const o=this.sections.filter(e=>A(e)&&!k(e)),l=this.sections.filter(e=>k(e)&&!A(e));if(this.hasLab=o.length&&l.length,this.hasLab){o.forEach(e=>e.associatedLabs=l.filter(t=>t.id.startsWith(e.id))),l.forEach(e=>e.associatedLectures=o.filter(t=>e.id.startsWith(t.id)));const e=o.filter(e=>!e.associatedLabs.length),t=l.filter(e=>!e.associatedLectures.length);e.forEach(e=>e.associatedLabs=t.filter(t=>!x(e,t))),t.forEach(t=>t.associatedLectures=e.filter(e=>!x(e,t))),this.onlyLectures=o,this.onlyLabs=l,this.allInOnes=this.sections.filter(e=>A(e)&&k(e))}else this.sectionGroups=this.distinct(this.sections)}distinct(e){let t={};return e.forEach(e=>{const s=e.meetings.map(({days:e,period:t})=>({days:e,period:t})),n=JSON.stringify(s),a=t[n];a?a.sections.push(e):t[n]={hash:n,meetings:s,sections:[e]}}),t}fetchGpa(){var e=this;return Object(Ie.a)(De.a.mark((function t(){var s;return De.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="https://critique.gatech.edu/course.php?id=".concat(encodeURIComponent(e.id)),t.next=3,ee()({url:"https://cors-anywhere.herokuapp.com/".concat(s),method:"get",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"text/html"}}).then(e=>{const t=Be.a.load(e.data),s={averageGpa:Number(t("div.center-table > table.table > tbody > tr :nth-child(2)").text())};return t("table#dataTable > tbody > tr").each((e,n)=>{const a=t(n).find("td:nth-child(1)").text().split(", "),r=Object(g.a)(a,2),i=r[0],c=r[1],o="".concat(c," ").concat(i);s[o]=Number(t(n).find("td:nth-child(3)").text())}),s});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}};var Pe=class{constructor(e,t,s,n){const a=Object(g.a)(n,7),r=a[0],i=a[1],c=a[2],o=a[3],l=a[4],d=a[5],u=a[6];this.course=t,this.id=s,this.crn=r,this.credits=c,this.scheduleType=e.scheduleTypes[o],this.campus=e.campuses[l],this.attributes=d.map(t=>e.attributes[t]),this.gradeBasis=e.gradeBases[u],this.meetings=i.map(([t,s,n,a,r])=>({period:e.periods[t],days:"&nbsp;"===s?[]:[...s],where:n,instructors:a.map(e=>e.replace(/ \(P\)$/,"")),dateRange:e.dateRanges[r]})),this.instructors=R(this.meetings.reduce((e,t)=>[...e,...t.instructors],[]))}};var _e=class{constructor(e,t){this.label=e,this.calculateFactor=t}},Ue=s(288),We=s.n(Ue),Ge=(s(635),s(636),s(289)),He=s(290),Ye=s(291),Ve=s(292),qe=s(293);var ze=Object(o.b)(({env:e,db:t,user:s})=>({env:e,db:t,user:s}),Z)(class extends le{constructor(e){super(e),this.handleThemeChange=()=>{const e="light"===this.state.theme?"dark":"light";W.a.set("theme",e),this.setState({theme:e})},this.handleResize=e=>{const t=this.props.env.mobile,s=j();t!==s&&this.props.setMobile(s)},this.handleExport=()=>{const e=this.props.db.oscar,t=this.props.user.pinnedCrns,s=ce();t.forEach(t=>{const n=e.findSection(t);n.meetings.forEach(e=>{if(!e.period||!e.days.length)return;const t=e.dateRange,a=t.from,r=t.to,i=n.course.id,c=n.course.title,o=e.where,l=new Date(a);for(;!e.days.includes(["-","M","T","W","R","F","-"][l.getDay()]);)l.setDate(l.getDate()+1);l.setHours(e.period.start/60|0,e.period.start%60);const d=new Date(l);d.setHours(e.period.end/60|0,e.period.end%60);const u={freq:"WEEKLY",until:r,byday:e.days.map(e=>({M:"MO",T:"TU",W:"WE",R:"TH",F:"FR"}[e]))};s.addEvent(i,c,o,l,d,u)})}),s.download("gt-scheduler")},this.handleDownload=()=>{const e=this.captureRef.current;se.a.toPng(e,{width:2*e.offsetWidth,height:2*e.offsetHeight,style:{left:0,transform:"scale(".concat(2,")"),"transform-origin":"top left"}}).then(e=>ae()(e,"schedule.png"))},this.handleChangeTab=e=>{this.setState({tabIndex:e})},this.handleChangeSemester=e=>{this.props.setTerm(e),this.loadOscar(e)},this.handleSetPinnedCrns=e=>{this.props.setPinnedCrns(e)},this.handleResetPinnedCrns=()=>{window.confirm("Are you sure to reset sections you selected?")&&this.props.setPinnedCrns([])},this.handleChangeSortingOptionIndex=e=>{this.props.setSortingOptionIndex(e)},this.state={terms:[],tabIndex:0,theme:"light"===W.a.get("theme")?"light":"dark"},this.captureRef=r.a.createRef()}componentDidMount(){const e=this.props.user.term;e&&this.loadOscar(e),ee.a.get("https://api.github.com/repos/64json/gt-schedule-crawler/contents?ref=gh-pages").then(t=>{const s=t.data.map(e=>e.name).filter(e=>/\d{6}\.json/.test(e)).map(e=>e.replace(/\.json$/,"")).sort().reverse();if(!e){const e=s[0];this.handleChangeSemester(e)}this.setState({terms:s})}),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}loadOscar(e){this.props.setOscar(null),ee.a.get("https://jasonpark.me/gt-schedule-crawler/".concat(e,".json")).then(e=>{const t=new Ae(e.data);this.memoizedGetCombinations=Object(re.a)(t.getCombinations.bind(t)),this.memoizedSortCombinations=Object(re.a)(t.sortCombinations.bind(t)),this.props.setOscar(t)})}getTotalCredits(){const e=this.props.db.oscar;return this.props.user.pinnedCrns.reduce((t,s)=>t+e.findSection(s).credits,0)}render(){const e=this.props.env,t=e.mobile,s=e.overlayCrns,n=this.props.db.oscar,a=this.props.user,i=a.term,c=a.desiredCourses,o=a.pinnedCrns,l=a.excludedCrns,d=a.sortingOptionIndex,u=this.state,p=u.terms,h=u.tabIndex,m=u.theme,b=w("App",t&&"mobile",m);if(!n)return r.a.createElement("div",{className:b});const E=this.memoizedGetCombinations(c,o,l),g=this.memoizedSortCombinations(E,d);return r.a.createElement("div",{className:b},r.a.createElement("div",{className:"navigation"},r.a.createElement(me,{className:"logo"},r.a.createElement("span",{className:"gt"},"GT "),r.a.createElement("span",{className:"scheduler"},"Scheduler")),r.a.createElement(Re,{onChange:e=>this.handleChangeSemester(e),value:i,options:p.map(e=>({value:e,label:M(e)})),className:"semester"}),r.a.createElement("span",{className:"credits"},this.getTotalCredits()," Credits"),r.a.createElement("div",{className:"menu"},r.a.createElement(me,{onClick:this.handleDownload,disabled:0===o.length},r.a.createElement(be.a,{className:"icon",fixedWidth:!0,icon:Ge.faDownload}),r.a.createElement("div",{className:"text"},"Download")),r.a.createElement(me,{onClick:this.handleExport,disabled:0===o.length},r.a.createElement(be.a,{className:"icon",fixedWidth:!0,icon:He.faCalendarAlt}),r.a.createElement("div",{className:"text"},"Export")),r.a.createElement(me,{text:o.join(", "),disabled:0===o.length},r.a.createElement(be.a,{className:"icon",fixedWidth:!0,icon:Ye.faPaste}),r.a.createElement("div",{className:"text"},"CRNs")),r.a.createElement(me,{onClick:this.handleThemeChange},r.a.createElement(be.a,{className:"icon",fixedWidth:!0,icon:Ve.faAdjust}),r.a.createElement("div",{className:"text"},"Theme")),r.a.createElement(me,{href:"https://github.com/64json/gt-scheduler"},r.a.createElement(be.a,{className:"icon",fixedWidth:!0,icon:qe.faGithub}),r.a.createElement("div",{className:"text"},"GitHub")))),t&&r.a.createElement("div",{className:"tab-container"},["Courses","Combinations","Calendar"].map((e,t)=>r.a.createElement(me,{key:e,className:w("tab",h===t&&"active"),onClick:()=>this.handleChangeTab(t)},e))),r.a.createElement("div",{className:"main"},(!t||0===h)&&r.a.createElement("div",{className:"sidebar sidebar-courses"},r.a.createElement("div",{className:"scroller"},r.a.createElement("div",{className:"course-list"},c.map(e=>r.a.createElement(ve,{courseId:e,expandable:!0,key:e}))),r.a.createElement(ye,{className:"course-add"})),r.a.createElement(me,{className:"updated-at",href:"https://github.com/64json/gt-schedule-crawler"},"Course data fetched ",We()(n.updatedAt))),(!t||1===h)&&r.a.createElement("div",{className:"sidebar sidebar-combinations"},r.a.createElement(Re,{onChange:this.handleChangeSortingOptionIndex,value:d,options:n.sortingOptions.map((e,t)=>({value:t,label:e.label}))}),r.a.createElement(me,{className:"reset",onClick:this.handleResetPinnedCrns,disabled:0===o.length},"Reset Sections"),r.a.createElement("div",{className:"scroller"},r.a.createElement(ie.AutoSizer,null,({width:e,height:t})=>r.a.createElement(ie.List,{width:e,height:t,rowCount:g.length,rowHeight:108,rowRenderer:({index:e,key:t,style:s})=>{const n=g[e].crns;return r.a.createElement("div",{className:"list-item",style:s,key:t},r.a.createElement("div",{className:"combination",onMouseEnter:()=>this.props.setOverlayCrns(n),onMouseLeave:()=>this.props.setOverlayCrns([]),onClick:()=>this.handleSetPinnedCrns([...o,...n])},r.a.createElement("div",{className:"number"},e+1),r.a.createElement(fe,{className:"calendar-preview",overlayCrns:n,preview:!0})))}})))),(!t||2===h)&&r.a.createElement("div",{className:"calendar-container"},r.a.createElement(fe,{className:"calendar",overlayCrns:s}))),r.a.createElement("div",{className:"capture-container",ref:this.captureRef},r.a.createElement(fe,{className:"fake-calendar",capture:!0})))}});s(637),s(638);const Ke=Object(l.c)(Object(l.b)(n));c.a.render(r.a.createElement(o.a,{store:Ke},r.a.createElement(ze,null)),document.getElementById("root"))}},[[294,1,2]]]);
//# sourceMappingURL=main.a26c6111.chunk.js.map