{"version":3,"sources":["reducers/db.js","utils.js","reducers/env.js","reducers/user.js","reducers/index.js","constants.js","components/SemiPureComponent/index.jsx","components/Button/index.jsx","components/Calendar/index.jsx","components/CombinationsContainer/index.jsx","components/Course/index.jsx","components/CourseAdd/index.jsx","components/Section/index.jsx","beans/Oscar.js","beans/Course.js","beans/Section.js","components/App/index.jsx","index.js"],"names":["setOscar","createAction","concat","oscar","actions","handleActions","Object","defineProperty","combineActions","state","_ref","payload","objectSpread","stringToTime","string","_$exec","exec","_$exec2","slicedToArray","hour","minute","Number","parseInt","timeToString","time","ampm","arguments","length","undefined","periodToString","period","start","end","getRandomColor","from","to","hex","i","component","Math","random","toString","classes","_len","classList","Array","_key","filter","c","join","isMobile","window","innerWidth","setMobile","mobile","defaultState","setDesiredCourses","desiredCourses","setPinnedCrns","pinnedCrns","setExcludedCrns","excludedCrns","json","JSON","parse","Cookies","get","e","_json","_json$desiredCourses","_json$pinnedCrns","_json$excludedCrns","loadData","_ref2","newState","_ref$desiredCourses","_ref$pinnedCrns","_ref$excludedCrns","set","stringify","expires","saveData","dbActions","envActions","userActions","DAYS","SemiPureComponent","nextProps","nextState","stateChanged","this","propsChanged","a","b","aKeys","keys","bKeys","every","key","shallowCompareEntries","props","Component","Button","_this$props","className","restProps","objectWithoutProperties","react_default","createElement","lib_default","Calendar","overlayCrns","preview","env","user","src","alt","fill","map","_","timeToShortString","day","crn","components_Section","includes","overlay","connect","CombinationsContainer","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","sortingOptionIndex","sortingOptions","label","calculateFactor","combination","startMap","endMap","reduce","sum","min","ends","values","starts","db","memoizedGetCombinations","memoizeOne","getCombinations","bind","handleChangeSortingOptionIndex","assertThisInitialized","target","value","setState","_this2","onSetOverlayCrns","_this$props$user","combinations","sortingOption","sortedCombinations","factor","sort","components_Button","onClick","handleSetPinnedCrns","onChange","crns","onMouseEnter","onMouseLeave","toConsumableArray","components_Calendar","Course","expanded","course","courseId","id","sections","some","section","_this$props$user2","_this$props$user3","expandable","_this$props$user4","findCourse","style","backgroundColor","color","handleToggleExpanded","dangerouslySetInnerHTML","__html","title","excluded","pinned","handleTogglePinned","instructors","meetings","meeting","days","stopPropagation","handleToggleExcluded","handleRemoveCourse","CourseAdd","keyword","inputRef","React","createRef","handleChangeKeyword","handlePressEnter","preventDefault","courses","searchCourses","handleAddCourse","tbaCrns","current","focus","type","ref","placeholder","onKeyPress","components_Course","Section","findSection","top","height","where","Oscar","data","courseMap","crnMap","forEach","toUpperCase","subject","number","startsWith","crnsList","dfs","courseIndex","isIncluded","isPinned","hasConflict","section1","section2","meeting1","meeting2","hasLab","pinnedLectures","lectures","pinnedLabs","labs","lab","lecture","sectionGroups","sectionGroup","find","push","iterateTimeBlocks","callback","_this3","_this$id$split","split","_this$id$split2","sectionId","credits","distinct","groups","sectionGroupMeetings","sectionGroupHash","hash","Set","App","tabIndex","captureRef","handleResize","handleSetOverlayCrns","handleDownload","axios","then","res","addEventListener","removeEventListener","nextMobile","domtoimage","toPng","width","offsetWidth","offsetHeight","left","transform","transform-origin","blob","saveAs","_this$state","tabTitle","handleChangeTab","getTotalCredits","text","components_CourseAdd","components_CombinationsContainer","href","rel","store","createStore","combineReducers","reducers","ReactDOM","render","es","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.e783ed8b.chunk.js","sourcesContent":["import { combineActions, createAction, handleActions } from 'redux-actions';\n\nconst prefix = 'DB';\n\nconst setOscar = createAction(`${prefix}/SET_OSCAR`, oscar => ({ oscar }));\n\nexport const actions = {\n  setOscar,\n};\n\nconst defaultState = {\n  oscar: null,\n};\n\nexport default handleActions({\n  [combineActions(\n    setOscar,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","const stringToTime = string => {\n  const [, hour, minute, ampm] = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  return ((ampm === 'p' ? 12 : 0) + Number.parseInt(hour % 12)) * 60 + Number.parseInt(minute);\n};\n\nconst timeToString = (time, ampm = true) => {\n  const hour = time / 60 | 0;\n  const minute = time % 60;\n  return `${hour > 12 ? hour - 12 : hour}:${minute < 10 ? '0' + minute : minute}${ampm ? ` ${hour < 12 ? 'a' : 'p'}m` : ''}`;\n};\n\nconst timeToShortString = time => {\n  const hour = time / 60 | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nconst periodToString = period => period ? `${timeToString(period.start, false)} - ${timeToString(period.end)}` : 'TBA';\n\nconst getRandomColor = (from = 0, to = 256) => {\n  let hex = '#';\n  for (let i = 0; i < 3; i++) {\n    const component = (Math.random() * (to - from) + from | 0).toString(16);\n    hex += (component.length === 1 ? '0' : '') + component;\n  }\n  return hex;\n};\n\nconst hasConflictBetween = (section1, section2) =>\n  section1.meetings.some(meeting1 =>\n    section2.meetings.some(meeting2 =>\n      meeting1.period && meeting2.period &&\n      ['M', 'T', 'W', 'R', 'F'].some(day => meeting1.days.includes(day) && meeting2.days.includes(day)) &&\n      meeting1.period.start < meeting2.period.end && meeting2.period.start < meeting1.period.end));\n\nconst classes = (...classList) => classList.filter(c => c).join(' ');\n\nconst isMobile = () => window.innerWidth < 768;\n\nconst shallowCompareEntries = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(key => key in b && a[key] === b[key]);\n};\n\nexport {\n  stringToTime,\n  timeToString,\n  timeToShortString,\n  periodToString,\n  getRandomColor,\n  hasConflictBetween,\n  classes,\n  isMobile,\n  shallowCompareEntries,\n};\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport { isMobile } from '../utils';\n\nconst prefix = 'ENV';\n\nconst setMobile = createAction(`${prefix}/SET_MOBILE`, mobile => ({ mobile }));\n\nexport const actions = {\n  setMobile,\n};\n\nconst defaultState = {\n  mobile: isMobile(),\n};\n\nexport default handleActions({\n  [combineActions(\n    setMobile,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport Cookies from 'js-cookie';\n\nconst prefix = 'USER';\n\nconst setDesiredCourses = createAction(`${prefix}/SET_DESIRED_COURSES`, desiredCourses => ({ desiredCourses }));\nconst setPinnedCrns = createAction(`${prefix}/SET_PINNED_CRNS`, pinnedCrns => ({ pinnedCrns }));\nconst setExcludedCrns = createAction(`${prefix}/SET_EXCLUDED_CRNS`, excludedCrns => ({ excludedCrns }));\n\nexport const actions = {\n  setDesiredCourses,\n  setPinnedCrns,\n  setExcludedCrns,\n};\n\nconst saveData = ({ desiredCourses = [], pinnedCrns = [], excludedCrns = [] }) => {\n  Cookies.set('data', JSON.stringify({ desiredCourses, pinnedCrns, excludedCrns }), { expires: 365 });\n};\n\nconst loadData = () => {\n  let json = null;\n  try {\n    json = JSON.parse(Cookies.get('data'));\n  } catch (e) {\n    json = {};\n  }\n  const { desiredCourses = [], pinnedCrns = [], excludedCrns = [] } = json;\n  return { desiredCourses, pinnedCrns, excludedCrns };\n};\n\nconst defaultState = loadData();\n\nexport default handleActions({\n  [combineActions(\n    setDesiredCourses,\n    setPinnedCrns,\n    setExcludedCrns,\n  )]: (state, { payload }) => {\n    const newState = {\n      ...state,\n      ...payload,\n    };\n    saveData(newState);\n    return newState;\n  },\n}, defaultState);\n","import { actions as dbActions } from './db';\nimport { actions as envActions } from './env';\nimport { actions as userActions } from './user';\n\nexport { default as db } from './db';\nexport { default as env } from './env';\nexport { default as user } from './user';\n\nexport const actions = {\n  ...dbActions,\n  ...envActions,\n  ...userActions,\n};\n","const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\nconst DAYS = ['M', 'T', 'W', 'R', 'F'];\n\nconst PNG_SCALE_FACTOR = 2;\n\nexport {\n  OPEN,\n  CLOSE,\n  DAYS,\n  PNG_SCALE_FACTOR,\n};\n","import { Component } from 'react';\nimport { shallowCompareEntries } from '../../utils';\n\nclass SemiPureComponent extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    const stateChanged = this.state !== nextState;\n    const propsChanged = !shallowCompareEntries(this.props, nextProps);\n    return stateChanged || propsChanged;\n  }\n}\n\nexport default SemiPureComponent;\n","import React, { Component } from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Button extends Component {\n  render() {\n    const { className, ...restProps } = this.props;\n\n    const props = {\n      className: classes('Button', className),\n      ...restProps,\n    };\n\n    return 'href' in props ? (\n      <a {...props}/>\n    ) : 'text' in props ? (\n      <CopyToClipboard {...props}/>\n    ) : (\n      <div {...props}/>\n    );\n  }\n}\n\n\nexport default Button;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { CLOSE, OPEN, DAYS } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { Section, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Calendar extends SemiPureComponent {\n  render() {\n    const { className, overlayCrns, preview } = this.props;\n    const { mobile } = this.props.env;\n    const { pinnedCrns } = this.props.user;\n\n    return (\n      <div className={classes('Calendar', mobile && 'mobile', preview && 'preview', className)}>\n        {\n          preview &&\n          <img className=\"ratio\" src=\"5x2.png\" alt=\"\"/>\n        }\n        {\n          !preview &&\n          <div className=\"times\">\n            {\n              new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n                const time = OPEN + i * 60;\n                return (\n                  <div className=\"time\" key={time}>\n                    <span className=\"label\">\n                      {timeToShortString(time)}\n                    </span>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          !preview &&\n          <div className=\"days\">\n            {\n              DAYS.map(day => (\n                <div className=\"day\" key={day}>\n                    <span className=\"label\">\n                      {day}\n                    </span>\n                </div>\n              ))\n            }\n          </div>\n        }\n        <div className=\"meetings\">\n          {\n            pinnedCrns.map(crn => (\n              <Section key={crn} crn={crn} preview={preview}/>\n            ))\n          }\n          {\n            overlayCrns &&\n            overlayCrns.filter(crn => !pinnedCrns.includes(crn)).map(crn => (\n              <Section key={crn} crn={crn} overlay={!preview} preview={preview}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ env, user }) => ({ env, user }), actions)(Calendar);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport memoizeOne from 'memoize-one';\nimport { Button, Calendar, SemiPureComponent } from '../';\nimport { classes } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass CombinationsContainer extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortingOptionIndex: 0,\n    };\n\n    this.sortingOptions = [{\n      label: 'Most Compact',\n      calculateFactor: combination => {\n        const { startMap, endMap } = combination;\n        const diffs = Object.keys(startMap).map(day => endMap[day] - startMap[day]);\n        const sum = diffs.reduce((sum, min) => sum + min, 0);\n        return +sum;\n      },\n    }, {\n      label: 'Earliest Ending',\n      calculateFactor: combination => {\n        const { endMap } = combination;\n        const ends = Object.values(endMap);\n        const sum = ends.reduce((sum, end) => sum + end, 0);\n        const avg = sum / ends.length;\n        return +avg;\n      },\n    }, {\n      label: 'Latest Beginning',\n      calculateFactor: combination => {\n        const { startMap } = combination;\n        const starts = Object.values(startMap);\n        const sum = starts.reduce((sum, min) => sum + min, 0);\n        const avg = sum / starts.length;\n        return -avg;\n      },\n    }];\n\n    const { oscar } = this.props.db;\n\n    this.memoizedGetCombinations = memoizeOne(oscar.getCombinations.bind(oscar));\n    this.handleChangeSortingOptionIndex = this.handleChangeSortingOptionIndex.bind(this);\n  }\n\n  handleSetPinnedCrns(pinnedCrns) {\n    this.props.setPinnedCrns(pinnedCrns);\n  }\n\n  handleChangeSortingOptionIndex(e) {\n    const sortingOptionIndex = e.target.value;\n    this.setState({ sortingOptionIndex });\n  }\n\n  render() {\n    const { className, onSetOverlayCrns } = this.props;\n    const { desiredCourses, pinnedCrns, excludedCrns } = this.props.user;\n    const { sortingOptionIndex } = this.state;\n\n    const combinations = this.memoizedGetCombinations(desiredCourses, pinnedCrns, excludedCrns);\n    const sortingOption = this.sortingOptions[sortingOptionIndex];\n    const sortedCombinations = combinations.map(combination => ({\n      ...combination,\n      factor: sortingOption.calculateFactor(combination),\n    })).sort((a, b) => a.factor - b.factor);\n\n    return (\n      <div className={classes('CombinationsContainer', className)}>\n        {\n          pinnedCrns.length > 0 &&\n          <Button onClick={() => this.handleSetPinnedCrns([])}>\n            Reset Sections\n          </Button>\n        }\n        <Button className=\"sorting-option\">\n          <select onChange={this.handleChangeSortingOptionIndex} value={sortingOptionIndex}>\n            {\n              this.sortingOptions.map((sortingOption, i) => (\n                <option key={i} value={i}>{sortingOption.label}</option>\n              ))\n            }\n          </select>\n        </Button>\n        <div className=\"combinations\">\n          {\n            sortedCombinations.map(({ crns }, i) => (\n              <div className=\"combination\" key={i}\n                   onMouseEnter={() => onSetOverlayCrns(crns)}\n                   onMouseLeave={() => onSetOverlayCrns([])}\n                   onClick={() => this.handleSetPinnedCrns([...pinnedCrns, ...crns])}>\n                <div className=\"number\">{i + 1}</div>\n                <Calendar className=\"preview\" overlayCrns={crns} preview/>\n              </div>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(CombinationsContainer);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, periodToString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Course extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false,\n    };\n  }\n\n  handleRemoveCourse(course) {\n    const { desiredCourses, pinnedCrns, excludedCrns } = this.props.user;\n    this.props.setDesiredCourses(desiredCourses.filter(courseId => courseId !== course.id));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !Object.values(course.sections).some(section => section.crn === crn)));\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !Object.values(course.sections).some(section => section.crn === crn)));\n  }\n\n  handleTogglePinned(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (pinnedCrns.includes(section.crn)) {\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setPinnedCrns([...pinnedCrns, section.crn]);\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExcluded(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (excludedCrns.includes(section.crn)) {\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setExcludedCrns([...excludedCrns, section.crn]);\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  render() {\n    const { className, courseId, expandable, onClick, onSetOverlayCrns } = this.props;\n    const { oscar } = this.props.db;\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    const { expanded } = this.state;\n\n    const course = oscar.findCourse(courseId);\n\n    return (\n      <div className={classes('Course', className)} style={{ backgroundColor: course.color }} key={course.id}\n           onClick={onClick}>\n        <div className=\"course-header\" onClick={expandable ? () => this.handleToggleExpanded() : undefined}>\n          <div className=\"row\">\n            <span className=\"course_id\">{course.id}</span>\n            <span className=\"section_ids\">\n              {Object.values(course.sections).filter(section => pinnedCrns.includes(section.crn)).map(section => section.id).join(', ')}\n            </span>\n          </div>\n          <div className=\"row\">\n            <span className=\"course_title\" dangerouslySetInnerHTML={{ __html: course.title }}/>\n            {\n              expandable &&\n              <span className=\"toggle\">{expanded ? '-' : '+'}</span>\n            }\n          </div>\n        </div>\n        {\n          expanded &&\n          <div className=\"sections\">\n            {\n              Object.values(course.sections).map(section => {\n                const excluded = excludedCrns.includes(section.crn);\n                const pinned = pinnedCrns.includes(section.crn);\n                return (\n                  <div className={classes('section', excluded && 'excluded', pinned && 'pinned')}\n                       key={section.id} onClick={() => this.handleTogglePinned(section)}\n                       onMouseEnter={() => onSetOverlayCrns([section.crn])}\n                       onMouseLeave={() => onSetOverlayCrns([])}>\n                    <div className=\"section-header\">\n                      <span className=\"section_id\">{section.id}</span>\n                      <span className=\"instructors\">{section.instructors.join(', ')}</span>\n                    </div>\n                    {\n                      !excluded &&\n                      <div className=\"meetings\">\n                        {\n                          section.meetings.map((meeting, i) => {\n                            return (\n                              <div className=\"meeting\" key={i}>\n                                <span className=\"days\">{meeting.days.join('')}</span>\n                                <span className=\"period\">{periodToString(meeting.period)}</span>\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    }\n                    <div className=\"actions\">\n                      <div className=\"exclude\"\n                           onClick={e => {\n                             e.stopPropagation();\n                             this.handleToggleExcluded(section);\n                           }}>{excluded ? 'Include' : 'Exclude'}</div>\n                    </div>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          expanded &&\n          <div className=\"actions section-actions\">\n            <div className=\"dim\" onClick={() => this.handleRemoveCourse(course)}>Remove</div>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(Course);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Course, SemiPureComponent } from '../';\nimport { classes } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass CourseAdd extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      keyword: '',\n    };\n\n    this.inputRef = React.createRef();\n\n    this.handleChangeKeyword = this.handleChangeKeyword.bind(this);\n    this.handlePressEnter = this.handlePressEnter.bind(this);\n  }\n\n  handleChangeKeyword(e) {\n    const keyword = e.target.value;\n    this.setState({ keyword });\n  }\n\n  handlePressEnter(e) {\n    const { oscar } = this.props.db;\n    const { keyword } = this.state;\n\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      const courses = oscar.searchCourses(keyword);\n      if (courses.length) this.handleAddCourse(courses[0]);\n    }\n  }\n\n  handleAddCourse(course) {\n    const { desiredCourses, excludedCrns } = this.props.user;\n    if (desiredCourses.includes(course.id)) return;\n    const tbaCrns = Object.values(course.sections)\n      .filter(section => !section.meetings.length || section.meetings.some(meeting => !meeting.days.length || !meeting.period))\n      .map(section => section.crn);\n    this.props.setDesiredCourses([...desiredCourses, course.id]);\n    this.props.setExcludedCrns([...excludedCrns, ...tbaCrns]);\n\n    this.setState({ keyword: '' });\n    this.inputRef.current.focus();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    const { keyword } = this.state;\n\n    return (\n      <div className={classes('CourseAdd', className)}>\n        <input type=\"text\" ref={this.inputRef} value={keyword} onChange={this.handleChangeKeyword}\n               className=\"keyword\"\n               placeholder=\"XX 0000\" onKeyPress={this.handlePressEnter}/>\n        <div className=\"autocomplete\">\n          {\n            keyword &&\n            oscar.searchCourses(keyword).map(course => (\n              <Course courseId={course.id} onClick={() => this.handleAddCourse(course)} key={course.id}\n                      pinnedCrns={pinnedCrns}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(CourseAdd);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, periodToString } from '../../utils';\nimport { CLOSE, OPEN } from '../../constants';\nimport { SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass Section extends SemiPureComponent {\n  render() {\n    const { className, crn, overlay, preview } = this.props;\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n\n    const section = oscar.findSection(crn);\n\n    return (\n      <div className={classes('Section', mobile && 'mobile', overlay && 'overlay', className)}>\n        {\n          section.meetings.map((meeting, i) => meeting.period && (\n            meeting.days.map(day => (\n              <div className={`meeting ${day}`} key={[i, day].join('-')}\n                   style={{\n                     top: (meeting.period.start - OPEN) / (CLOSE - OPEN) * 100 + '%',\n                     height: (meeting.period.end - meeting.period.start) / (CLOSE - OPEN) * 100 + '%',\n                     backgroundColor: section.course.color,\n                   }}>\n                {\n                  !preview &&\n                  <div className=\"meeting-wrapper\">\n                    <span className=\"course_id\">{section.course.id}{mobile ? '' : ` ${section.id}`}</span>\n                    <span className=\"period\">{periodToString(meeting.period)}</span>\n                    {\n                      !mobile &&\n                      <span className=\"where\">{meeting.where}</span>\n                    }\n                    {\n                      !mobile &&\n                      <span className=\"instructors\">{meeting.instructors.join(', ')}</span>\n                    }\n                  </div>\n                }\n              </div>\n            ))\n          ))\n        }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(({ env, db }) => ({ env, db }), actions)(Section);\n","import { Course } from './';\nimport { hasConflictBetween } from '../utils';\n\nclass Oscar {\n  constructor(data) {\n    this.courses = Object.keys(data).map(courseId => new Course(courseId, data[courseId]));\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach(course => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach(section => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n  }\n\n  findCourse(courseId) {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn) {\n    return this.crnMap[crn];\n  }\n\n  searchCourses(keyword) {\n    const [, subject, number] = /^\\s*([a-zA-Z]*)\\s*(\\d*)\\s*$/.exec(keyword.toUpperCase()) || [];\n    if (subject && number) {\n      return this.courses.filter(course => course.subject === subject && course.number.startsWith(number));\n    } else if (subject) {\n      return this.courses.filter(course => course.subject === subject);\n    } else if (number) {\n      return this.courses.filter(course => course.number.startsWith(number));\n    } else {\n      return [];\n    }\n  }\n\n  getCombinations(desiredCourses, pinnedCrns, excludedCrns) {\n    const crnsList = [];\n    const dfs = (courseIndex = 0, crns = []) => {\n      if (courseIndex === desiredCourses.length) {\n        crnsList.push(crns);\n        return;\n      }\n      const course = this.findCourse(desiredCourses[courseIndex]);\n      const isIncluded = section => !excludedCrns.includes(section.crn);\n      const isPinned = section => pinnedCrns.includes(section.crn);\n      const hasConflict = section => [...pinnedCrns, ...crns].some(crn => hasConflictBetween(this.findSection(crn), section));\n      if (course.hasLab) {\n        const pinnedLectures = course.lectures.filter(isPinned);\n        const pinnedLabs = course.labs.filter(isPinned);\n        if (pinnedLabs.length) {\n          pinnedLabs.forEach(lab => {\n            lab.lectures.filter(isIncluded).forEach(lecture => {\n              if (isPinned(lecture)) {\n                dfs(courseIndex + 1, crns);\n              } else {\n                if (hasConflict(lecture)) return;\n                dfs(courseIndex + 1, [...crns, lecture.crn]);\n              }\n            });\n          });\n        } else if (pinnedLectures.length) {\n          pinnedLectures.forEach(lecture => {\n            lecture.labs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lab.crn]);\n            });\n          });\n        } else {\n          course.lectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            lecture.labs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn, lab.crn]);\n            });\n          });\n        }\n      } else {\n        const sections = Object.values(course.sections);\n        if (sections.some(isPinned)) {\n          dfs(courseIndex + 1, crns);\n        } else {\n          Object.values(course.sectionGroups).forEach(sectionGroup => {\n            const section = sectionGroup.sections.find(isIncluded);\n            if (!section || hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      }\n    };\n    dfs();\n    return crnsList.map(crns => {\n      const startMap = {};\n      const endMap = {};\n      this.iterateTimeBlocks([...pinnedCrns, ...crns], (day, period) => {\n        if (!(day in startMap) || startMap[day] > period.start) startMap[day] = period.start;\n        if (!(day in endMap) || endMap[day] < period.end) endMap[day] = period.end;\n      });\n      return {\n        crns,\n        startMap,\n        endMap,\n      }\n    });\n  }\n\n  iterateTimeBlocks(crns, callback) {\n    crns.forEach(crn => {\n      this.findSection(crn).meetings.forEach(meeting => meeting.period && (\n        meeting.days.forEach(day => {\n          callback(day, meeting.period);\n        })\n      ));\n    });\n  }\n}\n\nexport default Oscar;\n","import { getRandomColor } from '../utils';\nimport { Section } from './';\n\nclass Course {\n  constructor(courseId, data) {\n    this.id = courseId;\n    [this.subject, this.number] = this.id.split(' ');\n    this.title = data.title;\n    this.color = getRandomColor(32, 160);\n    this.sections = Object.keys(data.sections).map(sectionId => new Section(this, sectionId, data.sections[sectionId]));\n\n    const lectures = this.sections.filter(section => section.credits > 0);\n    const labs = this.sections.filter(section => section.credits === 0);\n    this.hasLab = !this.id.startsWith('VIP') && lectures.length && labs.length;\n    if (this.hasLab) {\n      this.lectures = lectures;\n      this.labs = labs;\n      this.lectures.forEach(lecture => lecture.labs = this.labs.filter(lab => lab.id.startsWith(lecture.id)));\n      this.labs.forEach(lab => lab.lectures = this.lectures.filter(lecture => lab.id.startsWith(lecture.id)));\n      if (this.lectures.every(lecture => !lecture.labs.length)) {\n        this.lectures.forEach(lecture => lecture.labs = this.labs);\n        this.labs.forEach(lab => lab.lectures = this.lectures);\n      }\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections) {\n    let groups = {};\n    sections.forEach(section => {\n      const sectionGroupMeetings = section.meetings.map(({ days, period }) => ({ days, period }));\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section],\n        };\n      }\n    });\n    return groups;\n  };\n}\n\nexport default Course;\n","import { stringToTime } from '../utils';\n\nclass Section {\n  constructor(course, sectionId, data) {\n    this.course = course;\n    this.id = sectionId;\n    this.crn = data.crn;\n    this.credits = data.credits;\n    this.meetings = data.meetings.map(({ days, period, instructors, where }) => ({\n      days: days === '&nbsp;' ? [] : [...days],\n      period: period === 'TBA' ? undefined : {\n        start: stringToTime(period.split(' - ')[0]),\n        end: stringToTime(period.split(' - ')[1]),\n      },\n      instructors,\n      where,\n    }));\n    this.instructors = [...new Set(this.meetings.reduce((instructors, meeting) => [...instructors, ...meeting.instructors], []))];\n  }\n}\n\nexport default Section;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport domtoimage from 'dom-to-image';\nimport saveAs from 'file-saver';\nimport { classes, isMobile } from '../../utils';\nimport { PNG_SCALE_FACTOR } from '../../constants';\nimport { Button, Calendar, CombinationsContainer, Course, CourseAdd, SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport { Oscar } from '../../beans';\nimport './stylesheet.scss';\n\nclass App extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      overlayCrns: [],\n      tabIndex: 0,\n    };\n\n    this.captureRef = React.createRef();\n\n    this.handleResize = this.handleResize.bind(this);\n    this.handleSetOverlayCrns = this.handleSetOverlayCrns.bind(this);\n    this.handleDownload = this.handleDownload.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('https://jasonpark.me/gt-schedule-crawler/courses.json')\n      .then(res => {\n        const oscar = new Oscar(res.data);\n        this.props.setOscar(oscar);\n      });\n\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  getTotalCredits() {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    return pinnedCrns.reduce((credits, crn) => credits + oscar.findSection(crn).credits, 0);\n  }\n\n  handleResize(e) {\n    const { mobile } = this.props.env;\n    const nextMobile = isMobile();\n    if (mobile !== nextMobile) {\n      this.props.setMobile(nextMobile);\n    }\n  }\n\n  handleSetOverlayCrns(overlayCrns) {\n    this.setState({ overlayCrns });\n  }\n\n  handleDownload() {\n    const { current } = this.captureRef;\n    domtoimage.toPng(current, {\n      width: current.offsetWidth * PNG_SCALE_FACTOR,\n      height: current.offsetHeight * PNG_SCALE_FACTOR,\n      style: {\n        'left': 0,\n        'transform': `scale(${PNG_SCALE_FACTOR})`,\n        'transform-origin': 'top left',\n      },\n    }).then(blob => saveAs(blob, 'schedule.png'));\n  }\n\n  handleChangeTab(tabIndex) {\n    this.setState({ tabIndex });\n  }\n\n  render() {\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n    const { pinnedCrns, desiredCourses } = this.props.user;\n    const { overlayCrns, tabIndex } = this.state;\n\n    return oscar && (\n      <div className={classes('App', mobile && 'mobile')}>\n        {\n          !mobile &&\n          <div className=\"calendar-container\">\n            <Calendar overlayCrns={overlayCrns}/>\n          </div>\n        }\n        <div className=\"capture-container\" ref={this.captureRef}>\n          <Calendar className=\"fake-calendar\"/>\n        </div>\n        <div className=\"sidebar\">\n          {\n            mobile &&\n            <div className=\"tab-container\">\n              {\n                ['Courses', 'Combinations', 'Calendar'].map((tabTitle, i) => (\n                  <div className={classes('tab', tabIndex === i && 'active')} onClick={() => this.handleChangeTab(i)}\n                       key={i}>\n                    {tabTitle}\n                  </div>\n                ))\n              }\n            </div>\n          }\n          <div className=\"title\">\n            <span className=\"primary\">Spring 2019</span>\n            <span className=\"secondary\">\n              {this.getTotalCredits()} Credits\n            </span>\n          </div>\n          <div className=\"scroller\">\n            <div className={classes('courses-container', tabIndex === 0 && 'active')}>\n              {\n                pinnedCrns.length > 0 &&\n                <Button text={pinnedCrns.join(', ')}>\n                  <span>{pinnedCrns.join(', ')}</span>\n                </Button>\n              }\n              <div className=\"course-list\">\n                {\n                  desiredCourses.map(courseId => {\n                    return (\n                      <Course courseId={courseId} expandable key={courseId}\n                              onSetOverlayCrns={this.handleSetOverlayCrns}/>\n                    );\n                  })\n                }\n              </div>\n              <CourseAdd/>\n            </div>\n            <CombinationsContainer className={classes('combinations-container', tabIndex === 1 && 'active')}\n                                   onSetOverlayCrns={this.handleSetOverlayCrns}/>\n            {\n              mobile &&\n              <div className={classes('calendar-container', tabIndex === 2 && 'active')}>\n                <Calendar overlayCrns={overlayCrns}/>\n              </div>\n            }\n          </div>\n          <Button onClick={this.handleDownload}>\n            Download as PNG\n          </Button>\n          <Button href=\"https://github.com/parkjs814/gt-scheduler\" rel=\"noopener noreferrer\" target=\"_blank\">\n            Fork me on GitHub\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { combineReducers, createStore } from 'redux';\nimport * as reducers from './reducers';\nimport App from './components/App';\nimport './stylesheet.css';\n\nconst store = createStore(combineReducers(reducers));\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}