{"version":3,"sources":["reducers/db.js","constants.js","utils.js","reducers/env.js","reducers/user.js","reducers/index.js","libs/ics.js","components/SemiPureComponent/index.jsx","components/ActionRow/index.jsx","components/Button/index.jsx","components/Calendar/index.jsx","components/Course/index.jsx","components/CourseAdd/index.jsx","components/Instructor/index.jsx","components/Palette/index.jsx","components/TimeBlocks/index.jsx","beans/Oscar.js","beans/Course.js","beans/Section.js","beans/SortingOption.js","components/App/index.jsx","index.js"],"names":["setOscar","createAction","concat","oscar","actions","handleActions","Object","defineProperty","combineActions","state","_ref","payload","objectSpread","DAYS","PNG_SCALE_FACTOR","stringToTime","string","_$exec","exec","_$exec2","slicedToArray","hour","minute","Number","parseInt","timeToString","time","ampm","arguments","length","undefined","periodToString","period","start","end","getRandomColor","from","to","hex","i","component","Math","random","toString","getContentClassName","color","substring","hasConflictBetween","section1","section2","meetings","some","meeting1","meeting2","day","days","includes","classes","_len","classList","Array","_key","filter","c","join","isMobile","window","innerWidth","unique","array","toConsumableArray","Set","isLab","section","scheduleType","isLecture","setMobile","mobile","defaultState","setTerm","term","loadData","setDesiredCourses","desiredCourses","setPinnedCrns","pinnedCrns","setExcludedCrns","excludedCrns","setColorMap","colorMap","setSortingOptionIndex","sortingOptionIndex","Cookies","get","json","JSON","parse","e","_json","_json$desiredCourses","_json$pinnedCrns","_json$excludedCrns","_json$colorMap","_json$sortingOptionIn","forEach","courseId","deprecatedData","set","remove","_ref2","newState","_ref$desiredCourses","_ref$pinnedCrns","_ref$excludedCrns","_ref$colorMap","_ref$sortingOptionInd","stringify","expires","saveData","dbActions","envActions","userActions","ics","uidDomain","prodId","navigator","userAgent","indexOf","SEPARATOR","appVersion","calendarEvents","calendarStart","calendarEnd","BYDAY_VALUES","events","calendar","addEvent","subject","description","location","begin","stop","rrule","freq","until","isNaN","Date","interval","count","byday","prototype","call","d","elem","pos","start_date","end_date","now_date","start_year","getFullYear","slice","start_month","getMonth","start_day","getDate","start_hours","getHours","start_minutes","getMinutes","start_seconds","getSeconds","end_year","end_month","end_day","end_hours","end_minutes","end_seconds","start_time","end_time","rruleString","now","uDate","toISOString","replace","calendarEvent","splice","push","download","filename","ext","blob","Blob","bb","BlobBuilder","append","getBlob","document","characterSet","saveAs","build","console","log","SemiPureComponent","nextProps","nextState","stateChanged","this","propsChanged","a","b","aKeys","keys","bKeys","every","key","shallowCompareEntries","props","Component","ActionRow","_this$props","className","children","restProps","objectWithoutProperties","react_default","createElement","assign","action","map","icon","style","backgroundColor","index_es","fixedWidth","rel","target","lib_default","Button","disabled","Calendar","overlayCrns","preview","empty","env","user","fill","_","timeToShortString","crn","components_TimeBlocks","overlay","connect","Course","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","expanded","paletteShown","handleSelectColor","bind","assertThisInitialized","course","_this$props$user","id","sections","setState","_this2","onAddCourse","onSetOverlayCrns","db","_this$props$user2","_this$state","findCourse","textClassName","instructorMap","_section$instructors$","instructors","primaryInstructor","infoAction","faInfoCircle","href","number","components_ActionRow","faPlus","onClick","faAngleUp","faAngleDown","handleToggleExpanded","faPalette","handleTogglePaletteShown","faTrash","handleRemoveCourse","dangerouslySetInnerHTML","__html","title","components_Palette","onSelectColor","onMouseLeave","name","components_Instructor","CourseAdd","keyword","inputRef","React","createRef","handleChangeKeyword","handlePressEnter","value","preventDefault","courses","searchCourses","handleAddCourse","tbaCrns","meeting","current","focus","type","ref","onChange","placeholder","onKeyPress","components_Course","Instructor","_this$props$user3","crns","_this$props$user4","instructorExcluded","instructorPinned","encodeURIComponent","tokens","split","shift","pop","simplifyName","faCheck","handleIncludeAll","faBan","handleExcludeAll","excluded","pinned","onMouseEnter","faTimes","faThumbtack","handleTogglePinned","handleToggleExcluded","Palette","colors","paletteColor","TimeBlocks","findSection","top","height","where","Oscar","data","dateRanges","scheduleTypes","campuses","dateRange","_dateRange$split$map","v","_dateRange$split$map2","setHours","courseMap","crnMap","sortingOptions","SortingOption","combination","startMap","endMap","reduce","sum","min","ends","values","starts","toUpperCase","startsWith","crnsList","dfs","courseIndex","isIncluded","isPinned","hasConflict","hasLab","pinnedOnlyLecture","onlyLectures","find","pinnedOnlyLab","onlyLabs","pinnedAllInOne","allInOnes","associatedLabs","lab","associatedLectures","lecture","sectionGroups","sectionGroup","iterateTimeBlocks","combinations","sortingOption","factor","calculateFactor","sort","callback","_this3","_data","_this$id$split","_this$id$split2","sectionId","Section","lonelyLectures","lonelyLabs","distinct","groups","sectionGroupMeetings","sectionGroupHash","hash","credits","scheduleTypeIndex","campusIndex","campus","dateRangeIndex","instructor","label","App","handleResize","nextMobile","handleSetOverlayCrns","handleExport","cal","_meeting$dateRange","getDay","setDate","M","T","W","R","F","handleDownload","captureRef","domtoimage","toPng","width","offsetWidth","offsetHeight","left","transform","transform-origin","then","handleChangeTab","tabIndex","handleChangeSemester","loadOscar","handleSetPinnedCrns","handleResetPinnedCrns","confirm","handleChangeSortingOptionIndex","terms","axios","res","reverse","recentTerm","addEventListener","removeEventListener","memoizedGetCombinations","memoizeOne","getCombinations","memoizedSortCombinations","sortCombinations","_this4","sortedCombinations","components_Calendar","components_Button","commonjs","rowCount","rowHeight","rowRenderer","index","getTotalCredits","year","semester","getSemesterName","expandable","components_CourseAdd","text","tabTitle","data-ribbon","_ref3","store","createStore","combineReducers","reducers","ReactDOM","render","es","components_App","getElementById"],"mappings":"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","file":"static/js/main.be59fa7f.chunk.js","sourcesContent":["import { combineActions, createAction, handleActions } from 'redux-actions';\n\nconst prefix = 'DB';\n\nconst setOscar = createAction(`${prefix}/SET_OSCAR`, oscar => ({ oscar }));\n\nexport const actions = {\n  setOscar,\n};\n\nconst defaultState = {\n  oscar: null,\n};\n\nexport default handleActions({\n  [combineActions(\n    setOscar,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\nconst DAYS = ['M', 'T', 'W', 'R', 'F'];\n\nconst PNG_SCALE_FACTOR = 2;\n\nexport {\n  OPEN,\n  CLOSE,\n  DAYS,\n  PNG_SCALE_FACTOR,\n};\n","import { DAYS } from './constants';\n\nconst stringToTime = string => {\n  const [, hour, minute, ampm] = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  return ((ampm === 'p' ? 12 : 0) + Number.parseInt(hour % 12)) * 60 + Number.parseInt(minute);\n};\n\nconst timeToString = (time, ampm = true) => {\n  const hour = time / 60 | 0;\n  const minute = time % 60;\n  return `${hour > 12 ? hour - 12 : hour}:${minute < 10 ? '0' + minute : minute}${ampm ? ` ${hour < 12 ? 'a' : 'p'}m` : ''}`;\n};\n\nconst timeToShortString = time => {\n  const hour = time / 60 | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nconst periodToString = period => period ? `${timeToString(period.start, false)} - ${timeToString(period.end)}` : 'TBA';\n\nconst getRandomColor = (from = 0, to = 256) => {\n  let hex = '#';\n  for (let i = 0; i < 3; i++) {\n    const component = (Math.random() * (to - from) + from | 0).toString(16);\n    hex += (component.length === 1 ? '0' : '') + component;\n  }\n  return hex;\n};\n\nconst getContentClassName = (color = '#BBBBBB') => {\n  const r = parseInt(color.substring(1, 3), 16);\n  const g = parseInt(color.substring(3, 5), 16);\n  const b = parseInt(color.substring(5, 7), 16);\n  return r * .299 + g * .587 + b * .114 > 128 ? 'dark-content' : 'light-content';\n};\n\nconst hasConflictBetween = (section1, section2) =>\n  section1.meetings.some(meeting1 =>\n    section2.meetings.some(meeting2 =>\n      meeting1.period && meeting2.period &&\n      DAYS.some(day => meeting1.days.includes(day) && meeting2.days.includes(day)) &&\n      meeting1.period.start < meeting2.period.end && meeting2.period.start < meeting1.period.end));\n\nconst classes = (...classList) => classList.filter(c => c).join(' ');\n\nconst isMobile = () => window.innerWidth < 768;\n\nconst shallowCompareEntries = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(key => key in b && a[key] === b[key]);\n};\n\nconst simplifyName = name => {\n  const tokens = name.split(' ');\n  const firstName = tokens.shift();\n  const lastName = tokens.pop();\n  return [firstName, lastName].join(' ');\n};\n\nconst unique = array => [...new Set(array)];\n\nconst isLab = section => section.scheduleType.includes('Lab');\n\nconst isLecture = section => section.scheduleType.includes('Lecture');\n\nconst getSemesterName = term => {\n  const year = term.substring(0, 4);\n  const semester = (() => {\n    switch (Number.parseInt(term.substring(4))) {\n      case 1:\n        return 'Winter';\n      case 2:\n      case 3:\n        return 'Spring';\n      case 5:\n      case 6:\n        return 'Summer';\n      case 8:\n      case 9:\n        return 'Fall';\n      default:\n        return 'Unknown';\n    }\n  })();\n  return `${semester} ${year}`;\n};\n\nexport {\n  stringToTime,\n  timeToString,\n  timeToShortString,\n  periodToString,\n  getRandomColor,\n  getContentClassName,\n  hasConflictBetween,\n  classes,\n  isMobile,\n  shallowCompareEntries,\n  simplifyName,\n  unique,\n  isLab,\n  isLecture,\n  getSemesterName,\n};\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport { isMobile } from '../utils';\n\nconst prefix = 'ENV';\n\nconst setMobile = createAction(`${prefix}/SET_MOBILE`, mobile => ({ mobile }));\n\nexport const actions = {\n  setMobile,\n};\n\nconst defaultState = {\n  mobile: isMobile(),\n};\n\nexport default handleActions({\n  [combineActions(\n    setMobile,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport Cookies from 'js-cookie';\nimport { getRandomColor } from '../utils';\n\nconst prefix = 'USER';\n\nconst setTerm = createAction(`${prefix}/SET_TERM`, term => loadData(term));\nconst setDesiredCourses = createAction(`${prefix}/SET_DESIRED_COURSES`, desiredCourses => ({ desiredCourses }));\nconst setPinnedCrns = createAction(`${prefix}/SET_PINNED_CRNS`, pinnedCrns => ({ pinnedCrns }));\nconst setExcludedCrns = createAction(`${prefix}/SET_EXCLUDED_CRNS`, excludedCrns => ({ excludedCrns }));\nconst setColorMap = createAction(`${prefix}/SET_COLOR_MAP`, colorMap => ({ colorMap }));\nconst setSortingOptionIndex = createAction(`${prefix}/SET_SORTING_OPTION_INDEX`, sortingOptionIndex => ({ sortingOptionIndex }));\n\nexport const actions = {\n  setTerm,\n  setDesiredCourses,\n  setPinnedCrns,\n  setExcludedCrns,\n  setColorMap,\n  setSortingOptionIndex,\n};\n\nconst saveData = ({ term, desiredCourses = [], pinnedCrns = [], excludedCrns = [], colorMap = {}, sortingOptionIndex = 0 }) => {\n  Cookies.set('term', term);\n  Cookies.set(term, JSON.stringify({\n    desiredCourses,\n    pinnedCrns,\n    excludedCrns,\n    colorMap,\n    sortingOptionIndex,\n  }), { expires: 365 });\n};\n\nconst loadData = (term = Cookies.get('term')) => {\n  let json = null;\n  try {\n    json = JSON.parse(Cookies.get(term));\n  } catch (e) {\n    json = {};\n  }\n  const { desiredCourses = [], pinnedCrns = [], excludedCrns = [], colorMap = {}, sortingOptionIndex = 0 } = json;\n  desiredCourses.forEach(courseId => {\n    if (!(courseId in colorMap)) {\n      colorMap[courseId] = getRandomColor();\n    }\n  });\n  return { term, desiredCourses, pinnedCrns, excludedCrns, colorMap, sortingOptionIndex };\n};\n\n(function migrate201902() {\n  const deprecatedData = Cookies.get('data');\n  if (deprecatedData) {\n    Cookies.set('term', '201902');\n    Cookies.set('201902', deprecatedData);\n    Cookies.remove('data');\n  }\n})();\nconst defaultState = loadData();\n\nexport default handleActions({\n  [combineActions(\n    setTerm,\n    setDesiredCourses,\n    setPinnedCrns,\n    setExcludedCrns,\n    setColorMap,\n    setSortingOptionIndex,\n  )]: (state, { payload }) => {\n    const newState = {\n      ...state,\n      ...payload,\n    };\n    saveData(newState);\n    return newState;\n  },\n}, defaultState);\n","import { actions as dbActions } from './db';\nimport { actions as envActions } from './env';\nimport { actions as userActions } from './user';\n\nexport { default as db } from './db';\nexport { default as env } from './env';\nexport { default as user } from './user';\n\nexport const actions = {\n  ...dbActions,\n  ...envActions,\n  ...userActions,\n};\n","/* global saveAs, Blob, BlobBuilder, console */\n/* exported ics */\n\nconst ics = function (uidDomain, prodId) {\n  'use strict';\n\n  if (navigator.userAgent.indexOf('MSIE') > -1 && navigator.userAgent.indexOf('MSIE 10') == -1) {\n    console.log('Unsupported Browser');\n    return;\n  }\n\n  if (typeof uidDomain === 'undefined') {\n    uidDomain = 'default';\n  }\n  if (typeof prodId === 'undefined') {\n    prodId = 'Calendar';\n  }\n\n  var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n  var calendarEvents = [];\n  var calendarStart = [\n    'BEGIN:VCALENDAR',\n    'PRODID:' + prodId,\n    'VERSION:2.0',\n  ].join(SEPARATOR);\n  var calendarEnd = SEPARATOR + 'END:VCALENDAR';\n  var BYDAY_VALUES = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n\n  return {\n    /**\n     * Returns events array\n     * @return {array} Events\n     */\n    'events': function () {\n      return calendarEvents;\n    },\n\n    /**\n     * Returns calendar\n     * @return {string} Calendar in iCalendar format\n     */\n    'calendar': function () {\n      return calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n    },\n\n    /**\n     * Add event to the calendar\n     * @param  {string} subject     Subject/Title of event\n     * @param  {string} description Description of event\n     * @param  {string} location    Location of event\n     * @param  {string} begin       Beginning date of event\n     * @param  {string} stop        Ending date of event\n     */\n    'addEvent': function (subject, description, location, begin, stop, rrule) {\n      // I'm not in the mood to make these optional... So they are all required\n      if (typeof subject === 'undefined' ||\n        typeof description === 'undefined' ||\n        typeof location === 'undefined' ||\n        typeof begin === 'undefined' ||\n        typeof stop === 'undefined'\n      ) {\n        return false;\n      }\n\n      // validate rrule\n      if (rrule) {\n        if (!rrule.rrule) {\n          if (rrule.freq !== 'YEARLY' && rrule.freq !== 'MONTHLY' && rrule.freq !== 'WEEKLY' && rrule.freq !== 'DAILY') {\n            throw 'Recurrence rrule frequency must be provided and be one of the following: \\'YEARLY\\', \\'MONTHLY\\', \\'WEEKLY\\', or \\'DAILY\\'';\n          }\n\n          if (rrule.until) {\n            if (isNaN(Date.parse(rrule.until))) {\n              throw 'Recurrence rrule \\'until\\' must be a valid date string';\n            }\n          }\n\n          if (rrule.interval) {\n            if (isNaN(parseInt(rrule.interval))) {\n              throw 'Recurrence rrule \\'interval\\' must be an integer';\n            }\n          }\n\n          if (rrule.count) {\n            if (isNaN(parseInt(rrule.count))) {\n              throw 'Recurrence rrule \\'count\\' must be an integer';\n            }\n          }\n\n          if (typeof rrule.byday !== 'undefined') {\n            if ((Object.prototype.toString.call(rrule.byday) !== '[object Array]')) {\n              throw 'Recurrence rrule \\'byday\\' must be an array';\n            }\n\n            if (rrule.byday.length > 7) {\n              throw 'Recurrence rrule \\'byday\\' array must not be longer than the 7 days in a week';\n            }\n\n            // Filter any possible repeats\n            rrule.byday = rrule.byday.filter(function (elem, pos) {\n              return rrule.byday.indexOf(elem) == pos;\n            });\n\n            for (var d in rrule.byday) {\n              if (BYDAY_VALUES.indexOf(rrule.byday[d]) < 0) {\n                throw 'Recurrence rrule \\'byday\\' values must include only the following: \\'SU\\', \\'MO\\', \\'TU\\', \\'WE\\', \\'TH\\', \\'FR\\', \\'SA\\'';\n              }\n            }\n          }\n        }\n      }\n\n      //TODO add time and time zone? use moment to format?\n      var start_date = new Date(begin);\n      var end_date = new Date(stop);\n      var now_date = new Date();\n\n      var start_year = ('0000' + (start_date.getFullYear().toString())).slice(-4);\n      var start_month = ('00' + ((start_date.getMonth() + 1).toString())).slice(-2);\n      var start_day = ('00' + ((start_date.getDate()).toString())).slice(-2);\n      var start_hours = ('00' + (start_date.getHours().toString())).slice(-2);\n      var start_minutes = ('00' + (start_date.getMinutes().toString())).slice(-2);\n      var start_seconds = ('00' + (start_date.getSeconds().toString())).slice(-2);\n\n      var end_year = ('0000' + (end_date.getFullYear().toString())).slice(-4);\n      var end_month = ('00' + ((end_date.getMonth() + 1).toString())).slice(-2);\n      var end_day = ('00' + ((end_date.getDate()).toString())).slice(-2);\n      var end_hours = ('00' + (end_date.getHours().toString())).slice(-2);\n      var end_minutes = ('00' + (end_date.getMinutes().toString())).slice(-2);\n      var end_seconds = ('00' + (end_date.getSeconds().toString())).slice(-2);\n\n      var now_year = ('0000' + (now_date.getFullYear().toString())).slice(-4);\n      var now_month = ('00' + ((now_date.getMonth() + 1).toString())).slice(-2);\n      var now_day = ('00' + ((now_date.getDate()).toString())).slice(-2);\n      var now_hours = ('00' + (now_date.getHours().toString())).slice(-2);\n      var now_minutes = ('00' + (now_date.getMinutes().toString())).slice(-2);\n      var now_seconds = ('00' + (now_date.getSeconds().toString())).slice(-2);\n\n      // Since some calendars don't add 0 second events, we need to remove time if there is none...\n      var start_time = '';\n      var end_time = '';\n      if (start_hours + start_minutes + start_seconds + end_hours + end_minutes + end_seconds != 0) {\n        start_time = 'T' + start_hours + start_minutes + start_seconds;\n        end_time = 'T' + end_hours + end_minutes + end_seconds;\n      }\n      var now_time = 'T' + now_hours + now_minutes + now_seconds;\n\n      var start = start_year + start_month + start_day + start_time;\n      var end = end_year + end_month + end_day + end_time;\n      var now = now_year + now_month + now_day + now_time;\n\n      // recurrence rrule vars\n      var rruleString;\n      if (rrule) {\n        if (rrule.rrule) {\n          rruleString = rrule.rrule;\n        } else {\n          rruleString = 'RRULE:FREQ=' + rrule.freq;\n\n          if (rrule.until) {\n            var uDate = new Date(Date.parse(rrule.until)).toISOString();\n            rruleString += ';UNTIL=' + uDate.substring(0, uDate.length - 13).replace(/[-]/g, '') + '000000Z';\n          }\n\n          if (rrule.interval) {\n            rruleString += ';INTERVAL=' + rrule.interval;\n          }\n\n          if (rrule.count) {\n            rruleString += ';COUNT=' + rrule.count;\n          }\n\n          if (rrule.byday && rrule.byday.length > 0) {\n            rruleString += ';BYDAY=' + rrule.byday.join(',');\n          }\n        }\n      }\n\n      var stamp = new Date().toISOString();\n\n      var calendarEvent = [\n        'BEGIN:VEVENT',\n        'UID:' + calendarEvents.length + '@' + uidDomain,\n        'CLASS:PUBLIC',\n        'DESCRIPTION:' + description,\n        'DTSTAMP;VALUE=DATE-TIME:' + now,\n        'DTSTART;VALUE=DATE-TIME:' + start,\n        'DTEND;VALUE=DATE-TIME:' + end,\n        'LOCATION:' + location,\n        'SUMMARY;LANGUAGE=en-us:' + subject,\n        'TRANSP:TRANSPARENT',\n        'END:VEVENT',\n      ];\n\n      if (rruleString) {\n        calendarEvent.splice(4, 0, rruleString);\n      }\n\n      calendarEvent = calendarEvent.join(SEPARATOR);\n\n      calendarEvents.push(calendarEvent);\n      return calendarEvent;\n    },\n\n    /**\n     * Download calendar using the saveAs function from filesave.js\n     * @param  {string} filename Filename\n     * @param  {string} ext      Extention\n     */\n    'download': function (filename, ext) {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      ext = (typeof ext !== 'undefined') ? ext : '.ics';\n      filename = (typeof filename !== 'undefined') ? filename : 'calendar';\n      var calendar = calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n\n      var blob;\n      if (navigator.userAgent.indexOf('MSIE 10') === -1) { // chrome or firefox\n        blob = new Blob([calendar]);\n      } else { // ie\n        var bb = new BlobBuilder();\n        bb.append(calendar);\n        blob = bb.getBlob('text/x-vCalendar;charset=' + document.characterSet);\n      }\n      saveAs(blob, filename + ext);\n      return calendar;\n    },\n\n    /**\n     * Build and return the ical contents\n     */\n    'build': function () {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      var calendar = calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n\n      return calendar;\n    },\n  };\n};\n\nexport default ics;\n","import { Component } from 'react';\nimport { shallowCompareEntries } from '../../utils';\n\nclass SemiPureComponent extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    const stateChanged = this.state !== nextState;\n    const propsChanged = !shallowCompareEntries(this.props, nextProps);\n    return stateChanged || propsChanged;\n  }\n}\n\nexport default SemiPureComponent;\n","import React, { Component } from 'react';\nimport { classes } from '../../utils';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport './stylesheet.scss';\nimport CopyToClipboard from 'react-copy-to-clipboard';\n\nclass ActionRow extends Component {\n  render() {\n    const { className, children, actions, color, ...restProps } = this.props;\n\n    return (\n      <div className={classes('ActionRow', className)} {...restProps}>\n        {children}\n        <div className={classes('actions', 'default')}>\n          {\n            actions.filter(action => action).map(({ className, icon, ...restProps }, i) => {\n              const props = {\n                key: i,\n                className: classes('action', className),\n                children: (\n                  <div className=\"icon\" style={{ backgroundColor: color }}>\n                    <FontAwesomeIcon fixedWidth icon={icon}/>\n                  </div>\n                ),\n                ...restProps,\n              };\n              return 'href' in props ? (\n                <a {...props} rel=\"noopener noreferrer\" target=\"_blank\"/>\n              ) : 'text' in props ? (\n                <CopyToClipboard {...props}/>\n              ) : (\n                <div {...props}/>\n              );\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ActionRow;\n","import React, { Component } from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Button extends Component {\n  render() {\n    const { className, disabled, ...restProps } = this.props;\n\n    const props = {\n      className: classes('Button', className),\n      ...restProps,\n    };\n\n    return disabled ? (\n      <button className={props.className} disabled>\n        {props.children}\n      </button>\n    ) : 'href' in props ? (\n      <a {...props} rel=\"noopener noreferrer\" target=\"_blank\"/>\n    ) : 'text' in props ? (\n      <CopyToClipboard {...props}/>\n    ) : (\n      <button {...props}/>\n    );\n  }\n}\n\nexport default Button;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { CLOSE, DAYS, OPEN } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { SemiPureComponent, TimeBlocks } from '../';\nimport './stylesheet.scss';\n\nclass Calendar extends SemiPureComponent {\n  render() {\n    const { className, overlayCrns, preview, empty } = this.props;\n    const { mobile } = this.props.env;\n    const { pinnedCrns } = this.props.user;\n\n    return (\n      <div className={classes('Calendar', mobile && 'mobile', preview && 'preview', className)}>\n        {\n          !preview &&\n          <div className=\"times\">\n            {\n              new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n                const time = OPEN + i * 60;\n                return (\n                  <div className=\"time\" key={time}>\n                    <span className=\"label\">\n                      {timeToShortString(time)}\n                    </span>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          !preview &&\n          <div className=\"days\">\n            {\n              DAYS.map(day => (\n                <div className=\"day\" key={day}>\n                    <span className=\"label\">\n                      {day}\n                    </span>\n                </div>\n              ))\n            }\n          </div>\n        }\n        {\n          !empty &&\n          <div className=\"meetings\">\n            {\n              pinnedCrns.map(crn => (\n                <TimeBlocks key={crn} crn={crn} preview={preview}/>\n              ))\n            }\n            {\n              overlayCrns &&\n              overlayCrns.filter(crn => !pinnedCrns.includes(crn)).map(crn => (\n                <TimeBlocks key={crn} crn={crn} overlay={!preview} preview={preview}/>\n              ))\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, user }) => ({ env, user }), actions)(Calendar);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { faAngleDown, faAngleUp, faInfoCircle, faPalette, faPlus, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { classes, getContentClassName } from '../../utils';\nimport { actions } from '../../reducers';\nimport { ActionRow, Instructor, Palette, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Course extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false,\n      paletteShown: false,\n    };\n\n    this.handleSelectColor = this.handleSelectColor.bind(this);\n  }\n\n  handleRemoveCourse(course) {\n    const { desiredCourses, pinnedCrns, excludedCrns, colorMap } = this.props.user;\n    this.props.setDesiredCourses(desiredCourses.filter(courseId => courseId !== course.id));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !course.sections.some(section => section.crn === crn)));\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !course.sections.some(section => section.crn === crn)));\n    this.props.setColorMap({ ...colorMap, [course.id]: undefined });\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  handleSelectColor(color) {\n    const { courseId } = this.props;\n    const { colorMap } = this.props.user;\n    this.props.setColorMap({ ...colorMap, [courseId]: color });\n  }\n\n  handleTogglePaletteShown(paletteShown = !this.state.paletteShown) {\n    this.setState({ paletteShown });\n  }\n\n  render() {\n    const { className, courseId, onAddCourse, onSetOverlayCrns } = this.props;\n    const { oscar } = this.props.db;\n    const { term, pinnedCrns, colorMap } = this.props.user;\n    const { expanded, paletteShown } = this.state;\n\n    const course = oscar.findCourse(courseId);\n    const color = colorMap[course.id];\n    const textClassName = getContentClassName(color);\n\n    const instructorMap = {};\n    course.sections.forEach(section => {\n      const [primaryInstructor = 'Not Assigned'] = section.instructors;\n      if (!(primaryInstructor in instructorMap)) {\n        instructorMap[primaryInstructor] = [];\n      }\n      instructorMap[primaryInstructor].push(section);\n    });\n\n    const infoAction = {\n      icon: faInfoCircle,\n      href: `https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_course_detail?cat_term_in=${term}&subj_code_in=${course.subject}&crse_numb_in=${course.number}`,\n    };\n\n    return (\n      <div className={classes('Course', textClassName, 'default', className)} style={{ backgroundColor: color }}\n           key={course.id}>\n        <ActionRow className={classes('course-header', expanded && 'divider-bottom')} actions={onAddCourse ? [\n          { icon: faPlus, onClick: onAddCourse },\n          infoAction,\n        ] : [\n          { icon: expanded ? faAngleUp : faAngleDown, onClick: () => this.handleToggleExpanded() },\n          infoAction,\n          { icon: faPalette, onClick: () => this.handleTogglePaletteShown() },\n          { icon: faTrash, onClick: () => this.handleRemoveCourse(course) },\n        ]} color={color}>\n          <div className=\"row\">\n            <span className=\"course_id\">{course.id}</span>\n            <span className=\"section_ids\">\n              {course.sections.filter(section => pinnedCrns.includes(section.crn)).map(section => section.id).join(', ')}\n            </span>\n          </div>\n          <div className=\"row\">\n            <span className=\"course_title\" dangerouslySetInnerHTML={{ __html: course.title }}/>\n            <span className=\"section_crns\">\n              {course.sections.filter(section => pinnedCrns.includes(section.crn)).map(section => section.crn).join(', ')}\n            </span>\n          </div>\n          {\n            paletteShown &&\n            <Palette className=\"palette\" onSelectColor={this.handleSelectColor} color={color}\n                     onMouseLeave={() => this.handleTogglePaletteShown(false)}/>\n          }\n        </ActionRow>\n        {\n          expanded &&\n          <div className=\"course-body\">\n            {\n              Object.keys(instructorMap).map(name => (\n                <Instructor key={name} color={color} name={name} sections={instructorMap[name]}\n                            onSetOverlayCrns={onSetOverlayCrns}/>\n              ))\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(Course);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Course, SemiPureComponent } from '../';\nimport { classes, getRandomColor } from '../../utils';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass CourseAdd extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      keyword: '',\n    };\n\n    this.inputRef = React.createRef();\n\n    this.handleChangeKeyword = this.handleChangeKeyword.bind(this);\n    this.handlePressEnter = this.handlePressEnter.bind(this);\n  }\n\n  handleChangeKeyword(e) {\n    const keyword = e.target.value;\n    this.setState({ keyword });\n  }\n\n  handlePressEnter(e) {\n    const { oscar } = this.props.db;\n    const { keyword } = this.state;\n\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      const courses = oscar.searchCourses(keyword);\n      if (courses.length) this.handleAddCourse(courses[0]);\n    }\n  }\n\n  handleAddCourse(course) {\n    const { desiredCourses, excludedCrns, colorMap } = this.props.user;\n    if (desiredCourses.includes(course.id)) return;\n    const tbaCrns = course.sections\n      .filter(section => !section.meetings.length || section.meetings.some(meeting => !meeting.days.length || !meeting.period))\n      .map(section => section.crn);\n    this.props.setDesiredCourses([...desiredCourses, course.id]);\n    this.props.setExcludedCrns([...excludedCrns, ...tbaCrns]);\n    this.props.setColorMap({ ...colorMap, [course.id]: getRandomColor() });\n\n    this.setState({ keyword: '' });\n    this.inputRef.current.focus();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { oscar } = this.props.db;\n    const { desiredCourses, pinnedCrns } = this.props.user;\n    const { keyword } = this.state;\n\n    return (\n      <div className={classes('CourseAdd', className)}>\n        <input type=\"text\" ref={this.inputRef} value={keyword} onChange={this.handleChangeKeyword}\n               className=\"keyword\"\n               placeholder=\"XX 0000\" onKeyPress={this.handlePressEnter}/>\n        <div className=\"autocomplete\">\n          {\n            oscar.searchCourses(keyword).filter(course => !desiredCourses.includes(course.id)).map(course => (\n              <Course key={course.id} courseId={course.id} pinnedCrns={pinnedCrns}\n                      onAddCourse={() => this.handleAddCourse(course)}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ db, user }) => ({ db, user }), actions)(CourseAdd);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  faAngleDown,\n  faAngleUp,\n  faBan,\n  faCheck,\n  faInfoCircle,\n  faThumbtack,\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons';\nimport { classes, periodToString, simplifyName, unique } from '../../utils';\nimport { actions } from '../../reducers';\nimport { ActionRow, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Instructor extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: true,\n    };\n  }\n\n  handleTogglePinned(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (pinnedCrns.includes(section.crn)) {\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setPinnedCrns([...pinnedCrns, section.crn]);\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExcluded(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (excludedCrns.includes(section.crn)) {\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setExcludedCrns([...excludedCrns, section.crn]);\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleExcludeAll() {\n    const { sections } = this.props;\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    const crns = sections.map(section => section.crn);\n    this.props.setExcludedCrns(unique([...excludedCrns, ...crns]));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !crns.includes(crn)));\n  }\n\n  handleIncludeAll() {\n    const { sections } = this.props;\n    const { excludedCrns } = this.props.user;\n    const crns = sections.map(section => section.crn);\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !crns.includes(crn)));\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  render() {\n    const { className, color, name, sections, onSetOverlayCrns } = this.props;\n    const { term, pinnedCrns, excludedCrns } = this.props.user;\n    const { expanded } = this.state;\n\n    const instructorExcluded = sections.every(section => excludedCrns.includes(section.crn));\n    const instructorPinned = sections.some(section => pinnedCrns.includes(section.crn));\n\n    return (\n      <div className={classes('Instructor', className)}>\n        <ActionRow\n          className={classes('name', 'divider-bottom', instructorExcluded && 'strikethrough', !instructorPinned && 'inactive')}\n          actions={[\n            { icon: expanded ? faAngleUp : faAngleDown, onClick: () => this.handleToggleExpanded() },\n            !['TBA', 'Not Assigned'].includes(name) && {\n              icon: faInfoCircle,\n              href: `http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=${encodeURIComponent(simplifyName(name))}`,\n            },\n            instructorExcluded ?\n              { icon: faCheck, onClick: () => this.handleIncludeAll() } :\n              { icon: faBan, onClick: () => this.handleExcludeAll() },\n          ]} color={color}>\n          {name || 'Not Assigned'}\n        </ActionRow>\n        {\n          expanded &&\n          <div className=\"sections\">\n            {\n              sections.map(section => {\n                const excluded = excludedCrns.includes(section.crn);\n                const pinned = pinnedCrns.includes(section.crn);\n                return (\n                  <ActionRow\n                    className={classes('section', 'divider-bottom', excluded && 'strikethrough', !pinned && 'inactive')}\n                    onMouseEnter={() => onSetOverlayCrns([section.crn])}\n                    onMouseLeave={() => onSetOverlayCrns([])} actions={[\n                    { icon: pinned ? faTimes : faThumbtack, onClick: () => this.handleTogglePinned(section) },\n                    {\n                      icon: faInfoCircle,\n                      href: `https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=${term}&crn_in=${section.crn}`,\n                    },\n                    { icon: excluded ? faCheck : faBan, onClick: () => this.handleToggleExcluded(section) },\n                  ]} color={color} key={section.id}>\n                    <div className=\"section-header\">\n                      <span className=\"section_id\">{section.id}</span>\n                    </div>\n                    <div className=\"meetings\">\n                      {\n                        section.meetings.map((meeting, i) => {\n                          return (\n                            <div className=\"meeting\" key={i}>\n                              <span className=\"days\">{meeting.days.join('')}</span>\n                              <span className=\"period\">{periodToString(meeting.period)}</span>\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </ActionRow>\n                );\n              })\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ user }) => ({ user }), actions)(Instructor);\n","import React, { Component } from 'react';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Palette extends Component {\n  render() {\n    const { className, color, onSelectColor, ...restProps } = this.props;\n\n    return (\n      <div className={classes('Palette', className)} {...restProps}>\n        {\n          [\n            ['#4D4D4D', '#999999', '#FFFFFF', '#F44E3B', '#FE9200', '#FCDC00', '#DBDF00', '#A4DD00', '#68CCCA', '#73D8FF', '#AEA1FF', '#FDA1FF'],\n            ['#333333', '#808080', '#CCCCCC', '#D33115', '#E27300', '#FCC400', '#B0BC00', '#68BC00', '#16A5A5', '#009CE0', '#7B64FF', '#FA28FF'],\n            ['#000000', '#666666', '#B3B3B3', '#9F0500', '#C45100', '#FB9E00', '#808900', '#194D33', '#0C797D', '#0062B1', '#653294', '#AB149E'],\n          ].map((colors, i) => (\n            <div className=\"palette-row\" key={i}>\n              {\n                colors.map(paletteColor => (\n                  <div className={classes('color', paletteColor === color && 'frame')} key={paletteColor}\n                       style={{ backgroundColor: paletteColor }} onClick={() => onSelectColor(paletteColor)}/>),\n                )\n              }\n            </div>\n          ))\n        }\n      </div>\n    );\n  }\n}\n\nexport default Palette;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, getContentClassName, periodToString } from '../../utils';\nimport { CLOSE, OPEN } from '../../constants';\nimport { SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass TimeBlocks extends SemiPureComponent {\n  render() {\n    const { className, crn, overlay, preview } = this.props;\n    const { oscar } = this.props.db;\n    const { mobile } = this.props.env;\n    const { colorMap } = this.props.user;\n\n    const section = oscar.findSection(crn);\n    const color = colorMap[section.course.id];\n    const textClassName = getContentClassName(color);\n\n    return (\n      <div className={classes('TimeBlocks', mobile && 'mobile', overlay && 'overlay', className)}>\n        {\n          section.meetings.map((meeting, i) => meeting.period && (\n            meeting.days.map(day => (\n              <div className={classes('meeting', textClassName, 'default', day)} key={[i, day].join('-')}\n                   style={{\n                     top: (meeting.period.start - OPEN) / (CLOSE - OPEN) * 100 + '%',\n                     height: (meeting.period.end - meeting.period.start) / (CLOSE - OPEN) * 100 + '%',\n                     backgroundColor: color,\n                   }}>\n                {\n                  !preview &&\n                  <div className=\"meeting-wrapper\">\n                    <span className=\"course_id\">{section.course.id}{mobile ? '' : ` ${section.id}`}</span>\n                    <span className=\"period\">{periodToString(meeting.period)}</span>\n                    {\n                      !mobile &&\n                      <span className=\"where\">{meeting.where}</span>\n                    }\n                    {\n                      !mobile &&\n                      <span className=\"instructors\">{meeting.instructors.join(', ')}</span>\n                    }\n                  </div>\n                }\n              </div>\n            ))\n          ))\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(TimeBlocks);\n","import { Course, SortingOption } from './';\nimport { hasConflictBetween } from '../utils';\n\nclass Oscar {\n  constructor(data) {\n    const { courses, dateRanges, scheduleTypes, campuses } = data;\n\n    this.dateRanges = dateRanges.map(dateRange => {\n      const [from, to] = dateRange.split(' - ').map(v => new Date(v));\n      from.setHours(0);\n      to.setHours(23, 59, 59, 999);\n      return { from, to };\n    });\n    this.scheduleTypes = scheduleTypes;\n    this.campuses = campuses;\n    this.courses = Object.keys(courses).map(courseId => new Course(this, courseId, courses[courseId]));\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach(course => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach(section => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n    this.sortingOptions = [\n      new SortingOption('Most Compact', combination => {\n        const { startMap, endMap } = combination;\n        const diffs = Object.keys(startMap).map(day => endMap[day] - startMap[day]);\n        const sum = diffs.reduce((sum, min) => sum + min, 0);\n        return +sum;\n      }),\n      new SortingOption('Earliest Ending', combination => {\n        const { endMap } = combination;\n        const ends = Object.values(endMap);\n        const sum = ends.reduce((sum, end) => sum + end, 0);\n        const avg = sum / ends.length;\n        return +avg;\n      }),\n      new SortingOption('Latest Beginning', combination => {\n        const { startMap } = combination;\n        const starts = Object.values(startMap);\n        const sum = starts.reduce((sum, min) => sum + min, 0);\n        const avg = sum / starts.length;\n        return -avg;\n      }),\n    ];\n  }\n\n  findCourse(courseId) {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn) {\n    return this.crnMap[crn];\n  }\n\n  searchCourses(keyword) {\n    const [, subject, number] = /^\\s*([a-zA-Z]*)\\s*(\\d*)\\s*$/.exec(keyword.toUpperCase()) || [];\n    if (subject && number) {\n      return this.courses.filter(course => course.subject === subject && course.number.startsWith(number));\n    } else if (subject) {\n      return this.courses.filter(course => course.subject === subject);\n    } else if (number) {\n      return this.courses.filter(course => course.number.startsWith(number));\n    } else {\n      return [];\n    }\n  }\n\n  getCombinations(desiredCourses, pinnedCrns, excludedCrns) {\n    const crnsList = [];\n    const dfs = (courseIndex = 0, crns = []) => {\n      if (courseIndex === desiredCourses.length) {\n        crnsList.push(crns);\n        return;\n      }\n      const course = this.findCourse(desiredCourses[courseIndex]);\n      const isIncluded = section => !excludedCrns.includes(section.crn);\n      const isPinned = section => pinnedCrns.includes(section.crn);\n      const hasConflict = section => [...pinnedCrns, ...crns].some(crn => hasConflictBetween(this.findSection(crn), section));\n      if (course.hasLab) {\n        const pinnedOnlyLecture = course.onlyLectures.find(isPinned);\n        const pinnedOnlyLab = course.onlyLabs.find(isPinned);\n        const pinnedAllInOne = course.allInOnes.find(isPinned);\n        if ((pinnedOnlyLecture && pinnedOnlyLab) || pinnedAllInOne) {\n          dfs(courseIndex + 1, crns);\n        } else if (pinnedOnlyLecture) {\n          pinnedOnlyLecture.associatedLabs.filter(isIncluded).forEach(lab => {\n            if (hasConflict(lab)) return;\n            dfs(courseIndex + 1, [...crns, lab.crn]);\n          });\n        } else if (pinnedOnlyLab) {\n          pinnedOnlyLab.associatedLectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            dfs(courseIndex + 1, [...crns, lecture.crn]);\n          });\n        } else {\n          course.onlyLectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            lecture.associatedLabs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn, lab.crn]);\n            });\n          });\n          course.allInOnes.filter(isIncluded).forEach(section => {\n            if (hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      } else {\n        if (course.sections.some(isPinned)) {\n          dfs(courseIndex + 1, crns);\n        } else {\n          Object.values(course.sectionGroups).forEach(sectionGroup => {\n            const section = sectionGroup.sections.find(isIncluded);\n            if (!section || hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      }\n    };\n    dfs();\n    return crnsList.map(crns => {\n      const startMap = {};\n      const endMap = {};\n      this.iterateTimeBlocks([...pinnedCrns, ...crns], (day, period) => {\n        if (!(day in startMap) || startMap[day] > period.start) startMap[day] = period.start;\n        if (!(day in endMap) || endMap[day] < period.end) endMap[day] = period.end;\n      });\n      return {\n        crns,\n        startMap,\n        endMap,\n      };\n    });\n  }\n\n  sortCombinations(combinations, sortingOptionIndex) {\n    const sortingOption = this.sortingOptions[sortingOptionIndex];\n    return combinations.map(combination => ({\n      ...combination,\n      factor: sortingOption.calculateFactor(combination),\n    })).sort((a, b) => a.factor - b.factor);\n  }\n\n  iterateTimeBlocks(crns, callback) {\n    crns.forEach(crn => {\n      this.findSection(crn).meetings.forEach(meeting => meeting.period && (\n        meeting.days.forEach(day => {\n          callback(day, meeting.period);\n        })\n      ));\n    });\n  }\n}\n\nexport default Oscar;\n","import { Section } from './';\nimport { hasConflictBetween, isLab, isLecture } from '../utils';\n\nclass Course {\n  constructor(oscar, courseId, data) {\n    const [title, sections] = data;\n\n    this.id = courseId;\n    [this.subject, this.number] = this.id.split(' ');\n    this.title = title;\n    this.sections = Object.keys(sections).map(sectionId => new Section(oscar, this, sectionId, sections[sectionId]));\n\n    const onlyLectures = this.sections.filter(section => isLecture(section) && !isLab(section));\n    const onlyLabs = this.sections.filter(section => isLab(section) && !isLecture(section));\n    this.hasLab = onlyLectures.length && onlyLabs.length;\n    if (this.hasLab) {\n      onlyLectures.forEach(lecture => lecture.associatedLabs = onlyLabs.filter(lab => lab.id.startsWith(lecture.id)));\n      onlyLabs.forEach(lab => lab.associatedLectures = onlyLectures.filter(lecture => lab.id.startsWith(lecture.id)));\n      const lonelyLectures = onlyLectures.filter(lecture => !lecture.associatedLabs.length);\n      const lonelyLabs = onlyLabs.filter(lab => !lab.associatedLectures.length);\n      lonelyLectures.forEach(lecture => lecture.associatedLabs = lonelyLabs.filter(lab => !hasConflictBetween(lecture, lab)));\n      lonelyLabs.forEach(lab => lab.associatedLectures = lonelyLectures.filter(lecture => !hasConflictBetween(lecture, lab)));\n      this.onlyLectures = onlyLectures;\n      this.onlyLabs = onlyLabs;\n      this.allInOnes = this.sections.filter(section => isLecture(section) && isLab(section));\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections) {\n    let groups = {};\n    sections.forEach(section => {\n      const sectionGroupMeetings = section.meetings.map(({ days, period }) => ({ days, period }));\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section],\n        };\n      }\n    });\n    return groups;\n  };\n}\n\nexport default Course;\n","import { stringToTime, unique } from '../utils';\n\nclass Section {\n  constructor(oscar, course, sectionId, data) {\n    const [crn, meetings, credits, scheduleTypeIndex, campusIndex] = data;\n\n    this.course = course;\n    this.id = sectionId;\n    this.crn = crn;\n    this.credits = credits;\n    this.scheduleType = oscar.scheduleTypes[scheduleTypeIndex];\n    this.campus = oscar.campuses[campusIndex];\n    this.meetings = meetings.map(([period, days, where, instructors, dateRangeIndex]) => ({\n      period: period === 'TBA' ? undefined : {\n        start: stringToTime(period.split(' - ')[0]),\n        end: stringToTime(period.split(' - ')[1]),\n      },\n      days: days === '&nbsp;' ? [] : [...days],\n      where,\n      instructors: instructors.map(instructor => instructor.replace(/ \\(P\\)$/, '')),\n      dateRange: oscar.dateRanges[dateRangeIndex],\n    }));\n    this.instructors = unique(this.meetings.reduce((instructors, meeting) => [...instructors, ...meeting.instructors], []));\n  }\n}\n\nexport default Section;\n","class SortingOption {\n  constructor(label, calculateFactor) {\n    this.label = label;\n    this.calculateFactor = calculateFactor;\n  }\n}\n\nexport default SortingOption;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport domtoimage from 'dom-to-image';\nimport saveAs from 'file-saver';\nimport memoizeOne from 'memoize-one';\nimport { AutoSizer, List } from 'react-virtualized/dist/commonjs';\nimport ics from '../../libs/ics';\nimport { classes, getSemesterName, isMobile } from '../../utils';\nimport { PNG_SCALE_FACTOR } from '../../constants';\nimport { Button, Calendar, Course, CourseAdd, SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport { Oscar } from '../../beans';\nimport 'github-fork-ribbon-css/gh-fork-ribbon.css';\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\n\nclass App extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      terms: [],\n      overlayCrns: [],\n      tabIndex: 0,\n    };\n\n    this.captureRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { term } = this.props.user;\n    if (term) this.loadOscar(term);\n    axios.get('https://jasonpark.me/gt-schedule-crawler/terms.json')\n      .then(res => {\n        const terms = res.data.reverse();\n        if (!term) {\n          const recentTerm = terms[0];\n          this.handleChangeSemester(recentTerm);\n        }\n        this.setState({ terms });\n      });\n\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  loadOscar(term) {\n    this.props.setOscar(null);\n    axios.get(`https://jasonpark.me/gt-schedule-crawler/${term}.json`)\n      .then(res => {\n        const oscar = new Oscar(res.data);\n        this.memoizedGetCombinations = memoizeOne(oscar.getCombinations.bind(oscar));\n        this.memoizedSortCombinations = memoizeOne(oscar.sortCombinations.bind(oscar));\n        this.props.setOscar(oscar);\n      });\n  }\n\n  getTotalCredits() {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    return pinnedCrns.reduce((credits, crn) => credits + oscar.findSection(crn).credits, 0);\n  }\n\n  handleResize = e => {\n    const { mobile } = this.props.env;\n    const nextMobile = isMobile();\n    if (mobile !== nextMobile) {\n      this.props.setMobile(nextMobile);\n    }\n  };\n\n  handleSetOverlayCrns = overlayCrns => {\n    this.setState({ overlayCrns });\n  };\n\n  handleExport = () => {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    const cal = ics();\n    pinnedCrns.forEach(crn => {\n      const section = oscar.findSection(crn);\n      section.meetings.forEach(meeting => {\n        if (!meeting.period || !meeting.days.length) return;\n        const { from, to } = meeting.dateRange;\n        const subject = section.course.id;\n        const description = section.course.title;\n        const location = meeting.where;\n        const begin = new Date(from);\n        while (!meeting.days.includes(['-', 'M', 'T', 'W', 'R', 'F', '-'][begin.getDay()])) {\n          begin.setDate(begin.getDate() + 1);\n        }\n        begin.setHours(meeting.period.start / 60 | 0, meeting.period.start % 60);\n        const end = new Date(begin);\n        end.setHours(meeting.period.end / 60 | 0, meeting.period.end % 60);\n        const rrule = {\n          freq: 'WEEKLY',\n          until: to,\n          byday: meeting.days.map(day => ({ M: 'MO', T: 'TU', W: 'WE', R: 'TH', F: 'FR' }[day])),\n        };\n        cal.addEvent(subject, description, location, begin, end, rrule);\n      });\n    });\n    cal.download('gt-scheduler');\n  };\n\n  handleDownload = () => {\n    const { current } = this.captureRef;\n    domtoimage.toPng(current, {\n      width: current.offsetWidth * PNG_SCALE_FACTOR,\n      height: current.offsetHeight * PNG_SCALE_FACTOR,\n      style: {\n        'left': 0,\n        'transform': `scale(${PNG_SCALE_FACTOR})`,\n        'transform-origin': 'top left',\n      },\n    }).then(blob => saveAs(blob, 'schedule.png'));\n  };\n\n  handleChangeTab = tabIndex => {\n    this.setState({ tabIndex });\n  };\n\n  handleChangeSemester = term => {\n    this.props.setTerm(term);\n    this.loadOscar(term);\n  };\n\n  handleSetPinnedCrns = pinnedCrns => {\n    this.props.setPinnedCrns(pinnedCrns);\n  };\n\n  handleResetPinnedCrns = () => {\n    if (window.confirm('Are you sure to reset sections you selected?')) {\n      this.props.setPinnedCrns([]);\n    }\n  };\n\n  handleChangeSortingOptionIndex = e => {\n    const sortingOptionIndex = e.target.value;\n    this.props.setSortingOptionIndex(sortingOptionIndex);\n  };\n\n  render() {\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n    const { term, desiredCourses, pinnedCrns, excludedCrns, sortingOptionIndex } = this.props.user;\n    const { terms, overlayCrns, tabIndex } = this.state;\n\n    if (!oscar) return null;\n\n    const combinations = this.memoizedGetCombinations(desiredCourses, pinnedCrns, excludedCrns);\n    const sortedCombinations = this.memoizedSortCombinations(combinations, sortingOptionIndex);\n\n    return (\n      <div className={classes('App', mobile && 'mobile')}>\n        {\n          (!mobile || tabIndex === 2) &&\n          <div className=\"calendar-container\">\n            <Calendar overlayCrns={overlayCrns}/>\n          </div>\n        }\n        <div className=\"capture-container\" ref={this.captureRef}>\n          <Calendar className=\"fake-calendar\"/>\n        </div>\n        {\n          (!mobile || tabIndex === 1) &&\n          <div className=\"sidebar sidebar-combinations\">\n            <div className=\"header\">\n            <span className=\"secondary\">\n              {combinations.length} Combos\n            </span>\n              <Button className=\"primary\">\n                <select onChange={this.handleChangeSortingOptionIndex} value={sortingOptionIndex}>\n                  {\n                    oscar.sortingOptions.map((sortingOption, i) => (\n                      <option key={i} value={i}>{sortingOption.label}</option>\n                    ))\n                  }\n                </select>\n              </Button>\n            </div>\n            <div className=\"scroller\">\n              <AutoSizer>\n                {({ width, height }) => (\n                  <List\n                    width={width}\n                    height={height}\n                    rowCount={sortedCombinations.length}\n                    rowHeight={100}\n                    rowRenderer={({ index, key, style }) => {\n                      const { crns } = sortedCombinations[index];\n                      return (\n                        <div className=\"combination\" key={key} style={style}\n                             onMouseEnter={() => this.handleSetOverlayCrns(crns)}\n                             onMouseLeave={() => this.handleSetOverlayCrns([])}\n                             onClick={() => this.handleSetPinnedCrns([...pinnedCrns, ...crns])}>\n                          <div className=\"number\">{index + 1}</div>\n                          <Calendar className=\"calendar-preview\" overlayCrns={crns} preview/>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </AutoSizer>\n            </div>\n            <div className=\"footer\">\n              <Button onClick={this.handleResetPinnedCrns} disabled={pinnedCrns.length === 0}>\n                Reset Sections\n              </Button>\n            </div>\n          </div>\n        }\n        {\n          (!mobile || tabIndex === 0) &&\n          <div className=\"sidebar sidebar-courses\">\n            <div className=\"header\">\n            <span className=\"secondary\">\n              {this.getTotalCredits()} Credits\n            </span>\n              <Button className=\"primary\">\n                <select onChange={e => this.handleChangeSemester(e.target.value)} value={term}>\n                  {\n                    terms.map(term => (\n                      <option key={term} value={term}>{getSemesterName(term)}</option>\n                    ))\n                  }\n                </select>\n              </Button>\n            </div>\n            <div className=\"scroller\">\n              <div className=\"course-list\">\n                {\n                  desiredCourses.map(courseId => {\n                    return (\n                      <Course courseId={courseId} expandable key={courseId}\n                              onSetOverlayCrns={this.handleSetOverlayCrns}/>\n                    );\n                  })\n                }\n              </div>\n              <CourseAdd/>\n            </div>\n            <div className=\"footer\">\n              <Button text={pinnedCrns.join(', ')} disabled={pinnedCrns.length === 0}>\n                <span>Copy CRNs</span>\n              </Button>\n              <Button onClick={this.handleDownload} disabled={pinnedCrns.length === 0}>\n                Download as PNG\n              </Button>\n              <Button onClick={this.handleExport} disabled={pinnedCrns.length === 0}>\n                Export Calendar\n              </Button>\n            </div>\n          </div>\n        }\n        {\n          mobile &&\n          <div className=\"tab-container\">\n            {\n              ['Courses', 'Combinations', 'Calendar'].map((tabTitle, i) => (\n                <div className={classes('tab', tabIndex === i && 'active')} onClick={() => this.handleChangeTab(i)}\n                     key={i}>\n                  {tabTitle}\n                </div>\n              ))\n            }\n          </div>\n        }\n        <a className=\"github-fork-ribbon left-bottom fixed\"\n           href=\"https://github.com/parkjs814/gt-scheduler\"\n           target=\"_blank\" rel=\"noopener noreferrer\"\n           data-ribbon=\"Fork me on GitHub\" title=\"Fork me on GitHub\">Fork me on GitHub</a>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { combineReducers, createStore } from 'redux';\nimport * as reducers from './reducers';\nimport App from './components/App';\nimport './stylesheet.scss';\n\nconst store = createStore(combineReducers(reducers));\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}