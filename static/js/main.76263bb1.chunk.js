(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,n,t){e.exports=t(84)},70:function(e,n,t){},72:function(e,n,t){},74:function(e,n,t){},76:function(e,n,t){},78:function(e,n,t){},80:function(e,n,t){},82:function(e,n,t){},84:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"env",function(){return N}),t.d(r,"oscar",function(){return x}),t.d(r,"user",function(){return M}),t.d(r,"actions",function(){return W});var a=t(0),s=t.n(a),c=t(32),i=t.n(c),o=t(5),u=t(18),l=t(13),d=t(14),p=t(87),f=t(85),m=t(86),h=t(16),v=function(e){var n=/(\d{1,2}):(\d{2}) (a|p)m/.exec(e),t=Object(h.a)(n,4),r=t[1],a=t[2];return 60*(("p"===t[3]?12:0)+Number.parseInt(r%12))+Number.parseInt(a)},b=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e/60|0,r=e%60;return"".concat(t>12?t-12:t,":").concat(r<10?"0"+r:r).concat(n?" ".concat(t<12?"a":"p","m"):"")},E=function(e){return e?"".concat(b(e.start,!1)," - ").concat(b(e.end)):"TBA"},C=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(function(e){return e}).join(" ")},O=function(){return window.innerWidth<768},j=Object(p.a)("".concat("ENV","/SET_MOBILE"),function(e){return{mobile:e}}),y={setMobile:j},g={mobile:O()},N=Object(f.a)(Object(d.a)({},Object(m.a)(j),function(e,n){var t=n.payload;return Object(l.a)({},e,t)}),g),k=Object(p.a)("".concat("OSCAR","/SET_COURSES"),function(e){return{courses:e}}),S=Object(p.a)("".concat("OSCAR","/SET_CRNS"),function(e){return{crns:e}}),w={setCourses:k,setCrns:S},x=Object(f.a)(Object(d.a)({},Object(m.a)(k,S),function(e,n){var t=n.payload;return Object(l.a)({},e,t)}),{courses:{},crns:{}}),R=t(23),P=t.n(R),T=Object(p.a)("".concat("USER","/SET_DESIRED_COURSES"),function(e){return{desiredCourses:e}}),_=Object(p.a)("".concat("USER","/SET_PINNED_CRNS"),function(e){return{pinnedCrns:e}}),D=Object(p.a)("".concat("USER","/SET_EXCLUDED_CRNS"),function(e){return{excludedCrns:e}}),I={setDesiredCourses:T,setPinnedCrns:_,setExcludedCrns:D},A=function(){var e=null;try{e=JSON.parse(P.a.get("data"))}catch(i){e={}}var n=e,t=n.desiredCourses,r=void 0===t?[]:t,a=n.pinnedCrns,s=void 0===a?[]:a,c=n.excludedCrns;return{desiredCourses:r,pinnedCrns:s,excludedCrns:void 0===c?[]:c}}(),M=Object(f.a)(Object(d.a)({},Object(m.a)(T,_,D),function(e,n){var t=n.payload,r=Object(l.a)({},e,t);return function(e){var n=e.desiredCourses,t=void 0===n?[]:n,r=e.pinnedCrns,a=void 0===r?[]:r,s=e.excludedCrns,c=void 0===s?[]:s;P.a.set("data",JSON.stringify({desiredCourses:t,pinnedCrns:a,excludedCrns:c}),{expires:365})}(r),r}),A),W=Object(l.a)({},y,w,I),L=t(1),U=t(2),z=t(3),J=t(7),K=t(4),B=t(6),G=t(8),F=t(35),H=t.n(F),X=t(36),V=t.n(X),Z=t(37),$=t.n(Z),q=t(38),Q=t.n(q),Y=function(e){function n(){return Object(U.a)(this,n),Object(J.a)(this,Object(K.a)(n).apply(this,arguments))}return Object(B.a)(n,e),Object(z.a)(n,[{key:"shouldComponentUpdate",value:function(e,n){var t=this.state!==n,r=!function(e,n){var t=Object.keys(e),r=Object.keys(n);return t.length===r.length&&t.every(function(t){return t in n&&e[t]===n[t]})}(this.props,e);return t||r}}]),n}(a.Component),ee=(t(70),function(e){function n(){return Object(U.a)(this,n),Object(J.a)(this,Object(K.a)(n).apply(this,arguments))}return Object(B.a)(n,e),Object(z.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,t=e.overlayCrns,r=e.preview,a=this.props.env.mobile,c=this.props.user.pinnedCrns;return s.a.createElement("div",{className:C("Calendar",a&&"mobile",r&&"preview",n)},r&&s.a.createElement("img",{className:"ratio",src:"5x2.png",alt:""}),!r&&s.a.createElement("div",{className:"times"},new Array(13).fill(0).map(function(e,n){var t=480+60*n;return s.a.createElement("div",{className:"time",key:t},s.a.createElement("span",{className:"label"},function(e){var n=e/60|0;return"".concat(n>12?n-12:n).concat(n<12?"a":"p","m")}(t)))})),!r&&s.a.createElement("div",{className:"days"},["M","T","W","R","F"].map(function(e){return s.a.createElement("div",{className:"day",key:e},s.a.createElement("span",{className:"label"},e))})),s.a.createElement("div",{className:"meetings"},c.map(function(e){return s.a.createElement(ue,{key:e,crn:e,preview:r})}),t&&t.filter(function(e){return!c.includes(e)}).map(function(e){return s.a.createElement(ue,{key:e,crn:e,overlay:!r,preview:r})})))}}]),n}(Y)),ne=Object(o.b)(function(e){return{env:e.env,user:e.user}},W)(ee),te=(t(72),function(e){function n(){return Object(U.a)(this,n),Object(J.a)(this,Object(K.a)(n).apply(this,arguments))}return Object(B.a)(n,e),Object(z.a)(n,[{key:"getCombinations",value:function(){var e=this.props.oscar,n=e.courses,t=e.crns,r=this.props.user,a=r.desiredCourses,s=r.pinnedCrns,c=r.excludedCrns,i=[];return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r!==a.length){var u=n[a[r]],l=function(e){return!c.includes(e.crn)},d=function(e){return s.includes(e.crn)},p=function(e){return Object(L.a)(s).concat(Object(L.a)(o)).some(function(n){return r=t[n],a=e,r.meetings.some(function(e){return a.meetings.some(function(n){return e.period&&n.period&&["M","T","W","R","F"].some(function(t){return e.days.includes(t)&&n.days.includes(t)})&&e.period.start<n.period.end&&n.period.start<e.period.end})});var r,a})};if(u.hasLab){var f=u.lectures.filter(d),m=u.labs.filter(d);m.length?m.forEach(function(n){n.lectures.filter(l).forEach(function(n){if(d(n))e(r+1,o);else{if(p(n))return;e(r+1,Object(L.a)(o).concat([n.crn]))}})}):f.length?f.forEach(function(n){n.labs.filter(l).forEach(function(n){p(n)||e(r+1,Object(L.a)(o).concat([n.crn]))})}):u.lectures.filter(l).forEach(function(n){p(n)||n.labs.filter(l).forEach(function(t){p(t)||e(r+1,Object(L.a)(o).concat([n.crn,t.crn]))})})}else Object.values(u.sections).some(d)?e(r+1,o):Object.values(u.sectionGroups).forEach(function(n){var t=n.sections.find(l);t&&!p(t)&&e(r+1,Object(L.a)(o).concat([t.crn]))})}else i.push(o)}(),i}},{key:"handleSetPinnedCrns",value:function(e){this.props.setPinnedCrns(e)}},{key:"render",value:function(){var e=this,n=this.props,t=n.className,r=n.onSetOverlayCrns,a=this.props.user.pinnedCrns,c=this.getCombinations();return s.a.createElement("div",{className:C("Combinations",t)},c.map(function(n,t){return s.a.createElement("div",{className:"combination",key:t,onMouseEnter:function(){return r(n)},onMouseLeave:function(){return r([])},onClick:function(){return e.handleSetPinnedCrns(Object(L.a)(a).concat(Object(L.a)(n)))}},s.a.createElement("div",{className:"number"},t+1),s.a.createElement(ne,{className:"preview",overlayCrns:n,preview:!0}))}))}}]),n}(Y)),re=Object(o.b)(function(e){return{oscar:e.oscar,user:e.user}},W)(te),ae=(t(74),function(e){function n(e){var t;return Object(U.a)(this,n),(t=Object(J.a)(this,Object(K.a)(n).call(this,e))).state={expanded:!1},t}return Object(B.a)(n,e),Object(z.a)(n,[{key:"handleRemoveCourse",value:function(e){var n=this.props.user,t=n.desiredCourses,r=n.pinnedCrns,a=n.excludedCrns;this.props.setDesiredCourses(t.filter(function(n){return n!==e.id})),this.props.setPinnedCrns(r.filter(function(n){return!Object.values(e.sections).some(function(e){return e.crn===n})})),this.props.setExcludedCrns(a.filter(function(n){return!Object.values(e.sections).some(function(e){return e.crn===n})}))}},{key:"handleTogglePinned",value:function(e){var n=this.props.user,t=n.pinnedCrns,r=n.excludedCrns;t.includes(e.crn)?this.props.setPinnedCrns(t.filter(function(n){return n!==e.crn})):(this.props.setPinnedCrns(Object(L.a)(t).concat([e.crn])),this.props.setExcludedCrns(r.filter(function(n){return n!==e.crn})))}},{key:"handleToggleExcluded",value:function(e){var n=this.props.user,t=n.pinnedCrns,r=n.excludedCrns;r.includes(e.crn)?this.props.setExcludedCrns(r.filter(function(n){return n!==e.crn})):(this.props.setExcludedCrns(Object(L.a)(r).concat([e.crn])),this.props.setPinnedCrns(t.filter(function(n){return n!==e.crn})))}},{key:"handleToggleExpanded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.expanded;this.setState({expanded:e})}},{key:"render",value:function(){var e=this,n=this.props,t=n.className,r=n.courseId,a=n.expandable,c=n.onClick,i=n.onSetOverlayCrns,o=this.props.oscar.courses,u=this.props.user,l=u.pinnedCrns,d=u.excludedCrns,p=this.state.expanded,f=o[r];return s.a.createElement("div",{className:C("Course",t),style:{backgroundColor:f.color},key:f.id,onClick:c},s.a.createElement("div",{className:"course-header",onClick:a?function(){return e.handleToggleExpanded()}:void 0},s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"course_id"},f.id),s.a.createElement("span",{className:"section_ids"},Object.values(f.sections).filter(function(e){return l.includes(e.crn)}).map(function(e){return e.id}).join(", "))),s.a.createElement("div",{className:"row"},s.a.createElement("span",{className:"course_title",dangerouslySetInnerHTML:{__html:f.title}}),a&&s.a.createElement("span",{className:"toggle"},p?"-":"+"))),p&&s.a.createElement("div",{className:"sections"},Object.values(f.sections).map(function(n){var t=d.includes(n.crn),r=l.includes(n.crn);return s.a.createElement("div",{className:C("section",t&&"excluded",r&&"pinned"),key:n.id,onClick:function(){return e.handleTogglePinned(n)},onMouseEnter:function(){return i([n.crn])},onMouseLeave:function(){return i([])}},s.a.createElement("div",{className:"section-header"},s.a.createElement("span",{className:"section_id"},n.id),s.a.createElement("span",{className:"instructors"},n.instructors.join(", "))),!t&&s.a.createElement("div",{className:"meetings"},n.meetings.map(function(e,n){return s.a.createElement("div",{className:"meeting",key:n},s.a.createElement("span",{className:"days"},e.days.join("")),s.a.createElement("span",{className:"period"},E(e.period)))})),s.a.createElement("div",{className:"actions"},s.a.createElement("div",{className:"exclude",onClick:function(t){t.stopPropagation(),e.handleToggleExcluded(n)}},t?"Include":"Exclude")))})),p&&s.a.createElement("div",{className:"actions section-actions"},s.a.createElement("div",{className:"dim",onClick:function(){return e.handleRemoveCourse(f)}},"Remove")))}}]),n}(Y)),se=Object(o.b)(function(e){return{oscar:e.oscar,user:e.user}},W)(ae),ce=(t(76),function(e){function n(e){var t;return Object(U.a)(this,n),(t=Object(J.a)(this,Object(K.a)(n).call(this,e))).state={keyword:""},t.inputRef=s.a.createRef(),t.handleChangeKeyword=t.handleChangeKeyword.bind(Object(G.a)(Object(G.a)(t))),t.handlePressEnter=t.handlePressEnter.bind(Object(G.a)(Object(G.a)(t))),t}return Object(B.a)(n,e),Object(z.a)(n,[{key:"searchCourses",value:function(e){var n=this.props.oscar.courses,t=/^\s*([a-zA-Z]*)\s*(\d*)\s*$/.exec(e.toUpperCase())||[],r=Object(h.a)(t,3),a=r[1],s=r[2];return a||s?Object.values(n).filter(function(e){var n=e.id.split(" "),t=Object(h.a)(n,2),r=t[0],c=t[1];return a&&s?r===a&&c.startsWith(s):a?r.startsWith(a):c.startsWith(s)}):[]}},{key:"handleChangeKeyword",value:function(e){var n=e.target.value;this.setState({keyword:n})}},{key:"handlePressEnter",value:function(e){if("Enter"===e.key){e.preventDefault();var n=this.searchCourses(this.state.keyword);n.length&&this.handleAddCourse(n[0])}}},{key:"handleAddCourse",value:function(e){var n=this.props.user,t=n.desiredCourses,r=n.excludedCrns;if(!t.includes(e.id)){var a=Object.values(e.sections).filter(function(e){return!e.meetings.length||e.meetings.some(function(e){return!e.days.length||!e.period})}).map(function(e){return e.crn});this.props.setDesiredCourses(Object(L.a)(t).concat([e.id])),this.props.setExcludedCrns(Object(L.a)(r).concat(Object(L.a)(a))),this.setState({keyword:""}),this.inputRef.current.focus()}}},{key:"render",value:function(){var e=this,n=this.props.className,t=this.props.user.pinnedCrns,r=this.state.keyword;return s.a.createElement("div",{className:C("CourseAdd",n)},s.a.createElement("input",{type:"text",ref:this.inputRef,value:r,onChange:this.handleChangeKeyword,className:"keyword",placeholder:"XX 0000",onKeyPress:this.handlePressEnter}),s.a.createElement("div",{className:"autocomplete"},r&&this.searchCourses(r).map(function(n){return s.a.createElement(se,{courseId:n.id,onClick:function(){return e.handleAddCourse(n)},key:n.id,pinnedCrns:t})})))}}]),n}(Y)),ie=Object(o.b)(function(e){return{oscar:e.oscar,user:e.user}},W)(ce),oe=(t(78),function(e){function n(){return Object(U.a)(this,n),Object(J.a)(this,Object(K.a)(n).apply(this,arguments))}return Object(B.a)(n,e),Object(z.a)(n,[{key:"render",value:function(){var e=this.props,n=e.className,t=e.crn,r=e.overlay,a=e.preview,c=this.props.env.mobile,i=this.props.oscar.crns[t];return s.a.createElement("div",{className:C("Section",c&&"mobile",r&&"overlay",n)},i.meetings.map(function(e,n){return e.period&&e.days.map(function(t){return s.a.createElement("div",{className:"meeting ".concat(t),key:[n,t].join("-"),style:{top:(e.period.start-480)/780*100+"%",height:(e.period.end-e.period.start)/780*100+"%",backgroundColor:e.course.color}},!a&&s.a.createElement("div",{className:"meeting-wrapper"},s.a.createElement("span",{className:"course_id"},e.course.id,c?"":" ".concat(e.section.id)),s.a.createElement("span",{className:"period"},E(e.period)),!c&&s.a.createElement("span",{className:"where"},e.where),!c&&s.a.createElement("span",{className:"instructors"},e.instructors.join(", "))))})}))}}]),n}(Y)),ue=Object(o.b)(function(e){return{env:e.env,oscar:e.oscar}},W)(oe),le=(t(80),function(e){function n(e){var t;return Object(U.a)(this,n),(t=Object(J.a)(this,Object(K.a)(n).call(this,e))).state={overlayCrns:[],loaded:!1,tabIndex:0},t.captureRef=s.a.createRef(),t.handleResize=t.handleResize.bind(Object(G.a)(Object(G.a)(t))),t.handleSetOverlayCrns=t.handleSetOverlayCrns.bind(Object(G.a)(Object(G.a)(t))),t.handleDownload=t.handleDownload.bind(Object(G.a)(Object(G.a)(t))),t}return Object(B.a)(n,e),Object(z.a)(n,[{key:"componentDidMount",value:function(){var e=this;H.a.get("https://jasonpark.me/gt-schedule-crawler/courses.json").then(function(n){var t={},r=n.data;Object.keys(r).forEach(function(e){var n=r[e];n.id=e,n.color=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,t="#",r=0;r<3;r++){var a=(Math.random()*(n-e)+e|0).toString(16);t+=(1===a.length?"0":"")+a}return t}(32,160),Object.keys(n.sections).forEach(function(e){var r=n.sections[e];r.id=e,r.course=n;var a=[];r.meetings.forEach(function(e){return a.push.apply(a,Object(L.a)(e.instructors))}),r.instructors=Object(L.a)(new Set(a)),t[r.crn]=r,r.meetings.forEach(function(e){e.course=n,e.section=r;var t=e.days,a=e.period;if(e.days="&nbsp;"===t?[]:Object(L.a)(t),"TBA"===a)e.period=void 0;else{var s=a.split(" - "),c=Object(h.a)(s,2),i=c[0],o=c[1];e.period={start:v(i),end:v(o)}}})});var a=Object.values(n.sections),s=a.filter(function(e){return e.credits>0}),c=a.filter(function(e){return 0===e.credits});n.hasLab=!n.id.startsWith("VIP")&&s.length&&c.length,n.hasLab?(n.lectures=s,n.labs=c,n.lectures.forEach(function(e){return e.labs=n.labs.filter(function(n){return n.id.startsWith(e.id)})}),n.labs.forEach(function(e){return e.lectures=n.lectures.filter(function(n){return e.id.startsWith(n.id)})}),n.lectures.every(function(e){return!e.labs.length})&&(n.lectures.forEach(function(e){return e.labs=n.labs}),n.labs.forEach(function(e){return e.lectures=n.lectures}))):n.sectionGroups=function(e){var n={};return e.forEach(function(e){var t=e.meetings.map(function(e){return{days:e.days,period:e.period}}),r=JSON.stringify(t),a=n[r];a?a.sections.push(e):n[r]={hash:r,meetings:t,sections:[e]}}),n}(a)}),e.props.setCourses(r),e.props.setCrns(t),e.setState({loaded:!0})}),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getTotalCredits",value:function(){var e=this.props.oscar.crns;return this.props.user.pinnedCrns.reduce(function(n,t){return n+e[t].credits},0)}},{key:"handleResize",value:function(e){var n=this.props.env.mobile,t=O();n!==t&&this.props.setMobile(t)}},{key:"handleSetPinnedCrns",value:function(e){this.props.setPinnedCrns(e)}},{key:"handleSetOverlayCrns",value:function(e){this.setState({overlayCrns:e})}},{key:"handleDownload",value:function(){var e=this.captureRef.current;$.a.toPng(e,{width:2*e.offsetWidth,height:2*e.offsetHeight,style:{left:0,transform:"scale(".concat(2,")"),"transform-origin":"top left"}}).then(function(e){return Q()(e,"schedule.png")})}},{key:"handleChangeTab",value:function(e){this.setState({tabIndex:e})}},{key:"render",value:function(){var e=this,n=this.props.env.mobile,t=this.props.oscar.courses,r=this.props.user,a=r.pinnedCrns,c=r.desiredCourses,i=this.state,o=i.overlayCrns,u=i.loaded,l=i.tabIndex;return u&&s.a.createElement("div",{className:C("App",n&&"mobile")},!n&&s.a.createElement("div",{className:"calendar-container"},s.a.createElement(ne,{overlayCrns:o})),s.a.createElement("div",{className:"capture-container",ref:this.captureRef},s.a.createElement(ne,{className:"fake-calendar"})),s.a.createElement("div",{className:"sidebar"},n&&s.a.createElement("div",{className:"tab-container"},["Courses","Combinations","Calendar"].map(function(n,t){return s.a.createElement("div",{className:C("tab",l===t&&"active"),onClick:function(){return e.handleChangeTab(t)},key:t},n)})),s.a.createElement("div",{className:"title"},s.a.createElement("span",{className:"primary"},"Spring 2019"),s.a.createElement("span",{className:"secondary"},this.getTotalCredits()," Credits")),s.a.createElement("div",{className:"scroller"},s.a.createElement("div",{className:C("courses-container",0===l&&"active")},a.length>0&&s.a.createElement(V.a,{className:"button",text:a.join(", ")},s.a.createElement("span",null,a.join(", "))),s.a.createElement("div",{className:"course-list"},c.map(function(n){var r=t[n];return s.a.createElement(se,{courseId:n,expandable:!0,key:r.id,onSetOverlayCrns:e.handleSetOverlayCrns})})),s.a.createElement(ie,null)),s.a.createElement("div",{className:C("combinations-container",1===l&&"active")},a.length>0&&s.a.createElement("div",{className:"button",onClick:function(){return e.handleSetPinnedCrns([])}},"Reset Sections"),s.a.createElement(re,{className:"combinations",onSetOverlayCrns:this.handleSetOverlayCrns})),n&&s.a.createElement("div",{className:C("calendar-container",2===l&&"active")},s.a.createElement(ne,{overlayCrns:o}))),s.a.createElement("div",{className:"button",onClick:this.handleDownload},"Download as PNG"),s.a.createElement("a",{className:"button",href:"https://github.com/parkjs814/gt-scheduler",rel:"noopener noreferrer",target:"_blank"},"Fork me on GitHub")))}}]),n}(Y)),de=Object(o.b)(function(e){return{env:e.env,oscar:e.oscar,user:e.user}},W)(le),pe=(t(82),Object(u.c)(Object(u.b)(r)));i.a.render(s.a.createElement(o.a,{store:pe},s.a.createElement(de,null)),document.getElementById("root"))}},[[39,2,1]]]);
//# sourceMappingURL=main.76263bb1.chunk.js.map