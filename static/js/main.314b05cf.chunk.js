(this["webpackJsonpgt-scheduler"]=this["webpackJsonpgt-scheduler"]||[]).push([[0],{294:function(e,t,s){e.exports=s(639)},425:function(e,t,s){},429:function(e,t,s){},431:function(e,t,s){},432:function(e,t,s){},433:function(e,t,s){},434:function(e,t,s){},435:function(e,t,s){},436:function(e,t,s){},437:function(e,t,s){},438:function(e,t,s){},458:function(e,t){},472:function(e,t){},474:function(e,t){},636:function(e,t,s){},638:function(e,t,s){},639:function(e,t,s){"use strict";s.r(t);var n={};s.r(n),s.d(n,"db",(function(){return E})),s.d(n,"env",(function(){return U})),s.d(n,"user",(function(){return Z})),s.d(n,"actions",(function(){return Q}));var a=s(0),r=s.n(a),c=s(74),i=s.n(c),o=s(8),l=s(75),d=s(2),u=s(642),h=s(640),p=s(641);const m=Object(u.a)("".concat("DB","/SET_OSCAR"),e=>({oscar:e})),b={setOscar:m};var E=Object(h.a)({[Object(p.a)(m)]:(e,{payload:t})=>Object(d.a)(Object(d.a)({},e),t)},{oscar:null}),g=s(12);const f=["M","T","W","R","F"],C=[["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF"],["#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF"],["#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]],v=["Hybrid Course","Remote Synchronous Course","Remote Asynchronous Course","Residential Course"],N=e=>{const t=/(\d{1,2}):(\d{2}) (a|p)m/.exec(e),s=Object(g.a)(t,4),n=s[1],a=s[2];return 60*(("p"===s[3]?12:0)+Number.parseInt(n%12))+Number.parseInt(a)},y=(e,t=!0)=>{const s=e/60|0,n=e%60;return"".concat(s>12?s-12:s,":").concat(n<10?"0"+n:n).concat(t?" ".concat(s<12?"a":"p","m"):"")},S=e=>e?"".concat(y(e.start,!1)," - ").concat(y(e.end)):"TBA",O=()=>{const e=C.flat();return e[Math.random()*e.length|0]},w=e=>.299*parseInt(e.substring(1,3),16)+.587*parseInt(e.substring(3,5),16)+.114*parseInt(e.substring(5,7),16)>128?"light-content":"dark-content",x=(e,t)=>e.meetings.some(e=>t.meetings.some(t=>e.period&&t.period&&f.some(s=>e.days.includes(s)&&t.days.includes(s))&&e.period.start<t.period.end&&t.period.start<e.period.end)),j=(...e)=>e.filter(e=>e).join(" "),T=()=>window.innerWidth<1024,k=e=>{const t=e.split(" ");return[t.shift(),t.pop()].join(" ")},A=e=>[...new Set(e)],R=e=>e.scheduleType.includes("Lab"),D=e=>e.scheduleType.includes("Lecture"),I=e=>{const t=e.substring(0,4),s=(()=>{switch(Number.parseInt(e.substring(4))){case 1:return"Winter";case 2:case 3:return"Spring";case 5:case 6:return"Summer";case 8:case 9:return"Fall";default:return"Unknown"}})();return"".concat(s," ").concat(t)},M=e=>v.includes(e),L=e=>e.split(" ").filter(e=>"Course"!==e).join(" "),B=Object(u.a)("".concat("ENV","/SET_MOBILE"),e=>({mobile:e})),F=Object(u.a)("".concat("ENV","/SET_OVERLAY_CRNS"),e=>({overlayCrns:e})),_={setMobile:B,setOverlayCrns:F},P={mobile:T(),overlayCrns:[]};var U=Object(h.a)({[Object(p.a)(B,F)]:(e,{payload:t})=>Object(d.a)(Object(d.a)({},e),t)},P),W=s(19),G=s.n(W);const H=Object(u.a)("".concat("USER","/SET_TERM"),e=>J(e)),Y=Object(u.a)("".concat("USER","/SET_DESIRED_COURSES"),e=>({desiredCourses:e})),V=Object(u.a)("".concat("USER","/SET_PINNED_CRNS"),e=>({pinnedCrns:e})),q=Object(u.a)("".concat("USER","/SET_EXCLUDED_CRNS"),e=>({excludedCrns:e})),K=Object(u.a)("".concat("USER","/SET_COLOR_MAP"),e=>({colorMap:e})),z=Object(u.a)("".concat("USER","/SET_SORTING_OPTION_INDEX"),e=>({sortingOptionIndex:e})),X={setTerm:H,setDesiredCourses:Y,setPinnedCrns:V,setExcludedCrns:q,setColorMap:K,setSortingOptionIndex:z},J=(e=G.a.get("term"))=>{let t=null;try{t=JSON.parse(G.a.get(e))}catch(p){t={}}const s=t,n=s.desiredCourses,a=void 0===n?[]:n,r=s.pinnedCrns,c=void 0===r?[]:r,i=s.excludedCrns,o=void 0===i?[]:i,l=s.colorMap,d=void 0===l?{}:l,u=s.sortingOptionIndex,h=void 0===u?0:u;return a.forEach(e=>{e in d||(d[e]=O())}),{term:e,desiredCourses:a,pinnedCrns:c,excludedCrns:o,colorMap:d,sortingOptionIndex:h}};!function(){const e=G.a.get("data");e&&(G.a.set("term","201902"),G.a.set("201902",e),G.a.remove("data"))}();const $=J();var Z=Object(h.a)({[Object(p.a)(H,Y,V,q,K,z)]:(e,{payload:t})=>{const s=Object(d.a)(Object(d.a)({},e),t);return(({term:e,desiredCourses:t=[],pinnedCrns:s=[],excludedCrns:n=[],colorMap:a={},sortingOptionIndex:r=0})=>{G.a.set("term",e),G.a.set(e,JSON.stringify({desiredCourses:t,pinnedCrns:s,excludedCrns:n,colorMap:a,sortingOptionIndex:r}),{expires:365})})(s),s}},$);const Q=Object(d.a)(Object(d.a)(Object(d.a)({},b),_),X);var ee=s(77),te=s.n(ee),se=s(281),ne=s.n(se),ae=s(282),re=s.n(ae),ce=s(168),ie=s(165);var oe=function(e,t){if(!(navigator.userAgent.indexOf("MSIE")>-1&&-1===navigator.userAgent.indexOf("MSIE 10"))){"undefined"===typeof e&&(e="default"),"undefined"===typeof t&&(t="Calendar");var s=-1!==navigator.appVersion.indexOf("Win")?"\r\n":"\n",n=[],a=["BEGIN:VCALENDAR","PRODID:"+t,"VERSION:2.0"].join(s),r=s+"END:VCALENDAR",c=["SU","MO","TU","WE","TH","FR","SA"];return{events:function(){return n},calendar:function(){return a+s+n.join(s)+r},addEvent:function(t,a,r,i,o,l){if("undefined"===typeof t||"undefined"===typeof a||"undefined"===typeof r||"undefined"===typeof i||"undefined"===typeof o)return!1;if(l&&!l.rrule){if("YEARLY"!==l.freq&&"MONTHLY"!==l.freq&&"WEEKLY"!==l.freq&&"DAILY"!==l.freq)throw new Error("Recurrence rrule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'");if(l.until&&isNaN(Date.parse(l.until)))throw new Error("Recurrence rrule 'until' must be a valid date string");if(l.interval&&isNaN(parseInt(l.interval)))throw new Error("Recurrence rrule 'interval' must be an integer");if(l.count&&isNaN(parseInt(l.count)))throw new Error("Recurrence rrule 'count' must be an integer");if("undefined"!==typeof l.byday){if("[object Array]"!==Object.prototype.toString.call(l.byday))throw new Error("Recurrence rrule 'byday' must be an array");if(l.byday.length>7)throw new Error("Recurrence rrule 'byday' array must not be longer than the 7 days in a week");for(var d in l.byday=l.byday.filter((function(e,t){return l.byday.indexOf(e)===t})),l.byday)if(c.indexOf(l.byday[d])<0)throw new Error("Recurrence rrule 'byday' values must include only the following: 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'")}}var u=new Date(i),h=new Date(o),p=new Date,m=("0000"+u.getFullYear().toString()).slice(-4),b=("00"+(u.getMonth()+1).toString()).slice(-2),E=("00"+u.getDate().toString()).slice(-2),g=("00"+u.getHours().toString()).slice(-2),f=("00"+u.getMinutes().toString()).slice(-2),C=("00"+u.getSeconds().toString()).slice(-2),v=("0000"+h.getFullYear().toString()).slice(-4),N=("00"+(h.getMonth()+1).toString()).slice(-2),y=("00"+h.getDate().toString()).slice(-2),S=("00"+h.getHours().toString()).slice(-2),O=("00"+h.getMinutes().toString()).slice(-2),w=("00"+h.getSeconds().toString()).slice(-2),x="",j="";g+f+C+S+O+w!==0&&(x="T"+g+f+C,j="T"+S+O+w);var T,k=m+b+E+x,A=v+N+y+j,R=("0000"+p.getFullYear().toString()).slice(-4)+("00"+(p.getMonth()+1).toString()).slice(-2)+("00"+p.getDate().toString()).slice(-2)+("T"+("00"+p.getHours().toString()).slice(-2)+("00"+p.getMinutes().toString()).slice(-2)+("00"+p.getSeconds().toString()).slice(-2));if(l)if(l.rrule)T=l.rrule;else{if(T="RRULE:FREQ="+l.freq,l.until){var D=new Date(Date.parse(l.until)).toISOString();T+=";UNTIL="+D.substring(0,D.length-13).replace(/[-]/g,"")+"000000Z"}l.interval&&(T+=";INTERVAL="+l.interval),l.count&&(T+=";COUNT="+l.count),l.byday&&l.byday.length>0&&(T+=";BYDAY="+l.byday.join(","))}var I=["BEGIN:VEVENT","UID:"+n.length+"@"+e,"CLASS:PUBLIC","DESCRIPTION:"+a,"DTSTAMP;VALUE=DATE-TIME:"+R,"DTSTART;VALUE=DATE-TIME:"+k,"DTEND;VALUE=DATE-TIME:"+A,"LOCATION:"+r,"SUMMARY;LANGUAGE=en-us:"+t,"TRANSP:TRANSPARENT","END:VEVENT"];return T&&I.splice(4,0,T),I=I.join(s),n.push(I),I},download:function(e,t){if(n.length<1)return!1;t="undefined"!==typeof t?t:".ics",e="undefined"!==typeof e?e:"calendar";var c,i=a+s+n.join(s)+r;if(-1===navigator.userAgent.indexOf("MSIE 10"))c=new Blob([i]);else{var o=new BlobBuilder;o.append(i),c=o.getBlob("text/x-vCalendar;charset="+document.characterSet)}return saveAs(c,e+t),i},build:function(){return!(n.length<1)&&a+s+n.join(s)+r}}}console.log("Unsupported Browser")};class le extends a.Component{shouldComponentUpdate(e,t){const s=this.state!==t,n=!((e,t)=>{const s=Object.keys(e),n=Object.keys(t);return s.length===n.length&&s.every(s=>s in t&&e[s]===t[s])})(this.props,e);return s||n}}var de=le,ue=s(42),he=(s(425),s(283)),pe=s.n(he);s(429);class me extends a.Component{render(){const e=this.props,t=e.className,s=e.disabled,n=e.text,a=Object(ue.a)(e,["className","disabled","text"]),c=Object(d.a)({className:j("Button",s&&"disabled",t)},a);return s?r.a.createElement("div",{className:c.className},c.children):"href"in c?r.a.createElement("a",Object.assign({},c,{rel:"noopener noreferrer",target:"_blank"})):n?r.a.createElement(pe.a,{text:n},r.a.createElement("div",c)):r.a.createElement("div",c)}}var be=me,Ee=s(18);class ge extends a.Component{render(){const e=this.props,t=e.className,s=e.label,n=e.children,a=e.actions,c=Object(ue.a)(e,["className","label","children","actions"]);return r.a.createElement("div",Object.assign({className:j("ActionRow",t)},c),r.a.createElement("div",{className:"action-row-header"},r.a.createElement("div",{className:"label"},s),r.a.createElement("div",{className:j("actions","default")},a.filter(e=>e).map((e,t)=>{let s=e.icon,n=Object(ue.a)(e,["icon"]);return r.a.createElement(be,Object.assign({className:"action"},n,{key:t}),r.a.createElement(Ee.a,{fixedWidth:!0,icon:s}))}))),n)}}var fe=ge;s(431);var Ce=Object(o.b)(({env:e,user:t})=>({env:e,user:t}),Q)(class extends de{render(){const e=this.props,t=e.className,s=e.overlayCrns,n=e.preview,a=e.capture,c=this.props.env.mobile&&!a,i=this.props.user.pinnedCrns;return r.a.createElement("div",{className:j("Calendar",c&&"mobile",n&&"preview",t)},!n&&r.a.createElement("div",{className:"times"},new Array(13).fill(0).map((e,t)=>{const s=480+60*t;return r.a.createElement("div",{className:"time",key:s},r.a.createElement("span",{className:"label"},(e=>{const t=e/60|0;return"".concat(t>12?t-12:t).concat(t<12?"a":"p","m")})(s)))})),!n&&r.a.createElement("div",{className:"days"},f.map(e=>r.a.createElement("div",{className:"day",key:e},r.a.createElement("span",{className:"label"},e)))),r.a.createElement("div",{className:"meetings"},i.map(e=>r.a.createElement(Re,{key:e,crn:e,preview:n,capture:a})),s&&s.filter(e=>!i.includes(e)).map(e=>r.a.createElement(Re,{key:e,crn:e,overlay:!n,preview:n,capture:a}))))}}),ve=s(7);s(432);var Ne=Object(o.b)(({db:e,user:t})=>({db:e,user:t}),Q)(class extends de{constructor(e){super(e),this.state={expanded:!1,paletteShown:!1,gpaMap:{}},this.handleSelectColor=this.handleSelectColor.bind(this)}componentDidMount(){const e=this.props,t=e.courseId,s=e.onAddCourse,n=this.props.db.oscar;if(!s){n.findCourse(t).fetchGpa().then(e=>this.setState({gpaMap:e}))}}handleRemoveCourse(e){const t=this.props.user,s=t.desiredCourses,n=t.pinnedCrns,a=t.excludedCrns,r=t.colorMap;this.props.setDesiredCourses(s.filter(t=>t!==e.id)),this.props.setPinnedCrns(n.filter(t=>!e.sections.some(e=>e.crn===t))),this.props.setExcludedCrns(a.filter(t=>!e.sections.some(e=>e.crn===t))),this.props.setColorMap(Object(d.a)(Object(d.a)({},r),{},{[e.id]:void 0}))}handleToggleExpanded(e=!this.state.expanded){this.setState({expanded:e})}handleSelectColor(e){const t=this.props.courseId,s=this.props.user.colorMap;this.props.setColorMap(Object(d.a)(Object(d.a)({},s),{},{[t]:e}))}handleTogglePaletteShown(e=!this.state.paletteShown){this.setState({paletteShown:e})}handleIncludeSections(e){const t=this.props.user.excludedCrns,s=e.map(e=>e.crn);this.props.setExcludedCrns(t.filter(e=>!s.includes(e)))}render(){const e=this.props,t=e.className,s=e.courseId,n=e.onAddCourse,a=this.props.db.oscar,c=this.props.user,i=c.term,o=c.pinnedCrns,l=c.excludedCrns,d=c.colorMap,u=this.state,h=u.expanded,p=u.paletteShown,m=u.gpaMap,b=a.findCourse(s),E=d[b.id],f=E&&w(E),C={};b.sections.forEach(e=>{const t=Object(g.a)(e.instructors,1)[0],s=void 0===t?"Not Assigned":t;s in C||(C[s]=[]),C[s].push(e)});const v=Object.keys(C),N=v.filter(e=>C[e].every(e=>l.includes(e.crn))),y=v.filter(e=>!N.includes(e)),S={icon:ve.d,href:"https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_course_detail?cat_term_in=".concat(i,"&subj_code_in=").concat(b.subject,"&crse_numb_in=").concat(b.number)},O=b.sections.filter(e=>o.includes(e.crn)),x=O.reduce((e,t)=>e+t.credits,0);return r.a.createElement("div",{className:j("Course",f,"default",t),style:{backgroundColor:E},key:b.id},r.a.createElement(fe,{label:[b.id,O.map(e=>e.id).join(", ")].join(" "),actions:n?[{icon:ve.f,onClick:n},S]:[{icon:h?ve.b:ve.a,onClick:()=>this.handleToggleExpanded()},S,{icon:ve.e,onClick:()=>this.handleTogglePaletteShown()},{icon:ve.i,onClick:()=>this.handleRemoveCourse(b)}]},r.a.createElement("div",{className:"course-row"},r.a.createElement("span",{className:"course-title",dangerouslySetInnerHTML:{__html:b.title}}),r.a.createElement("span",{className:"section-crns"},O.map(e=>e.crn).join(", "))),!n&&r.a.createElement("div",{className:"course-row"},r.a.createElement("span",{className:"gpa"},"Course GPA: ",m.averageGpa||"N/A"),x>0&&r.a.createElement("span",{className:"credits"},x," Credits")),p&&r.a.createElement(xe,{className:"palette",onSelectColor:this.handleSelectColor,color:E,onMouseLeave:()=>this.handleTogglePaletteShown(!1)})),h&&r.a.createElement("div",{className:j("instructor-container","nested")},y.map(e=>r.a.createElement(Oe,{key:e,color:E,name:e,sections:C[e],gpa:m[e]})),N.length>0&&r.a.createElement("div",{className:"excluded-instructor-container"},N.map(e=>r.a.createElement("span",{className:"excluded-instructor",key:e,onClick:()=>this.handleIncludeSections(C[e])},e)))))}}),ye=(s(433),s(284));var Se=Object(o.b)(({db:e,user:t})=>({db:e,user:t}),Q)(class extends de{constructor(e){super(e),this.state={courses:[],keyword:"",attributes:[],activeIndex:0},this.inputRef=r.a.createRef(),this.handleChangeKeyword=this.handleChangeKeyword.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}handleChangeKeyword(e){const t=this.props.db.oscar,s=this.props.user.desiredCourses,n=this.state.attributes;let a=e.target.value.trim();const r=a.match(/^([A-Z]+)(\d.*)$/i);if(r){const e=Object(g.a)(r,3),t=e[1],s=e[2];a="".concat(t," ").concat(s)}const c=t.searchCourses(a,n).filter(e=>!s.includes(e.id));this.setState({courses:c,keyword:a,activeIndex:0})}handleKeyDown(e){const t=this.state,s=t.courses,n=t.activeIndex;switch(e.key){case"Enter":const e=s[n];e&&this.handleAddCourse(e);break;case"ArrowDown":this.setState({activeIndex:Math.min(n+1,s.length-1)});break;case"ArrowUp":this.setState({activeIndex:Math.max(n-1,0)});break;default:return}e.preventDefault()}handleAddCourse(e){const t=this.props.user,s=t.desiredCourses,n=t.excludedCrns,a=t.colorMap;if(s.includes(e.id))return;const r=e.sections.filter(e=>!e.meetings.length||e.meetings.some(e=>!e.days.length||!e.period)).map(e=>e.crn);this.props.setDesiredCourses([...s,e.id]),this.props.setExcludedCrns([...n,...r]),this.props.setColorMap(Object(d.a)(Object(d.a)({},a),{},{[e.id]:O()})),this.setState({courses:[],keyword:""}),this.inputRef.current.focus()}handleToggleAttribute(e){const t=this.state.attributes;this.setState({attributes:t.includes(e)?t.filter(t=>t!==e):[...t,e]})}render(){const e=this.props.className,t=this.state,s=t.courses,n=t.keyword,a=t.attributes,c=s[t.activeIndex];return r.a.createElement("div",{className:j("CourseAdd",e)},r.a.createElement("div",{className:"add"},r.a.createElement("div",{className:"primary"},r.a.createElement(Ee.a,{className:j("icon",s.length&&"active"),fixedWidth:!0,icon:ye.faPlus}),r.a.createElement("div",{className:"keyword-wrapper"},c&&r.a.createElement("div",{className:j("keyword","autocomplete")},c.id),r.a.createElement("input",{type:"text",ref:this.inputRef,value:n,onChange:this.handleChangeKeyword,className:"keyword",placeholder:"XX 0000",onKeyDown:this.handleKeyDown}))),r.a.createElement("div",{className:"secondary"},r.a.createElement("div",{className:j("attribute",0===a.length&&"active"),onClick:()=>this.setState({attributes:[]})},"All"),v.map(e=>r.a.createElement("div",{className:j("attribute",a.includes(e)&&"active"),key:e,onClick:()=>this.handleToggleAttribute(e)},L(e))))),s.map(e=>r.a.createElement(Ne,{key:e.id,className:e===c&&"active",courseId:e.id,pinnedCrns:[],onAddCourse:()=>this.handleAddCourse(e)})))}});s(434);var Oe=Object(o.b)(({user:e})=>({user:e}),Q)(class extends de{constructor(e){super(e),this.state={expanded:!0}}includeSection(e){const t=this.props.user.excludedCrns;this.props.setExcludedCrns(t.filter(t=>t!==e.crn))}excludeSections(e){const t=this.props.user,s=t.pinnedCrns,n=t.excludedCrns,a=e.map(e=>e.crn);this.props.setExcludedCrns(A([...n,...a])),this.props.setPinnedCrns(s.filter(e=>!a.includes(e)))}toggleExpanded(e=!this.state.expanded){this.setState({expanded:e})}render(){const e=this.props,t=e.className,s=e.color,n=e.name,a=e.sections,c=e.gpa,i=this.props.user,o=i.pinnedCrns,l=i.excludedCrns,d=this.state.expanded,u=a.some(e=>o.includes(e.crn)),h=a.filter(e=>!l.includes(e.crn)),p=a.filter(e=>l.includes(e.crn));return r.a.createElement("div",{className:j("Instructor",!d&&"divider-bottom",t)},r.a.createElement(fe,{label:n||"Not Assigned",actions:[{icon:d?ve.b:ve.a,onClick:()=>this.toggleExpanded()},!["TBA","Not Assigned"].includes(n)&&{icon:ve.d,href:"http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=".concat(encodeURIComponent(k(n)))},{icon:ve.c,onClick:()=>this.excludeSections(a)}],style:u?{backgroundColor:s}:void 0},r.a.createElement("div",{className:"instructor-row"},r.a.createElement("span",{className:"gpa"},"Instructor GPA: ",c||"N/A"))),d&&r.a.createElement("div",{className:j("section-container","nested")},h.map(e=>{const t=o.includes(e.crn);return r.a.createElement(je,{key:e.id,className:"divider-bottom",section:e,color:s,pinned:t})}),p.length>0&&r.a.createElement("div",{className:"excluded-section-container"},p.map(e=>r.a.createElement("span",{className:"excluded-section",key:e.id,onClick:()=>this.includeSection(e)},e.id)))))}});s(435);class we extends a.Component{render(){const e=this.props,t=e.className,s=e.color,n=e.onSelectColor,a=Object(ue.a)(e,["className","color","onSelectColor"]);return r.a.createElement("div",Object.assign({className:j("Palette",t)},a),C.map((e,t)=>r.a.createElement("div",{className:"palette-row",key:t},e.map(e=>r.a.createElement("div",{className:j("color",e===s&&"frame"),key:e,style:{backgroundColor:e},onClick:()=>n(e)})))))}}var xe=we;s(436);var je=Object(o.b)(({user:e})=>({user:e}),Q)(class extends de{excludeSection(e){const t=this.props.user,s=t.pinnedCrns,n=t.excludedCrns;this.props.setExcludedCrns([...n,e.crn]),this.props.setPinnedCrns(s.filter(t=>t!==e.crn))}pinSection(e){const t=this.props.user,s=t.pinnedCrns,n=t.excludedCrns;s.includes(e.crn)?this.props.setPinnedCrns(s.filter(t=>t!==e.crn)):(this.props.setPinnedCrns([...s,e.crn]),this.props.setExcludedCrns(n.filter(t=>t!==e.crn)))}render(){const e=this.props.user.term,t=this.props,s=t.className,n=t.section,a=t.pinned,c=t.color;return r.a.createElement(fe,{label:n.id,className:j("Section",s),onMouseEnter:()=>this.props.setOverlayCrns([n.crn]),onMouseLeave:()=>this.props.setOverlayCrns([]),actions:[{icon:a?ve.h:ve.g,onClick:()=>this.pinSection(n)},{icon:ve.d,href:"https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=".concat(e,"&crn_in=").concat(n.crn)},{icon:ve.c,onClick:()=>this.excludeSection(n)}],style:a?{backgroundColor:c}:void 0},r.a.createElement("div",{className:"section-details"},r.a.createElement("div",{className:"instructional-method"},n.attributes.filter(M).map(L).join(", ")),r.a.createElement("div",{className:"meeting-container"},n.meetings.map((e,t)=>r.a.createElement("div",{className:"meeting",key:t},r.a.createElement("span",{className:"days"},e.days.join("")),r.a.createElement("span",{className:"period"},S(e.period)))))))}}),Te=(s(437),s(285));class ke extends a.Component{constructor(e){super(e),this.state={opened:!1}}handleOpen(){this.setState({opened:!0})}handleClose(){this.setState({opened:!1})}handleToggle(){this.setState({opened:!this.state.opened})}render(){const e=this.props,t=e.className,s=e.value,n=e.onChange,a=e.options,c=this.state.opened,i=a.find(e=>e.value===s),o=i?i.label:"-";return r.a.createElement("div",{className:j("Button","Select",t),onClick:()=>this.handleToggle()},r.a.createElement("div",{className:"text"},o),r.a.createElement(Ee.a,{fixedWidth:!0,icon:Te.faCaretDown}),c&&r.a.createElement("div",{className:"intercept",onClick:()=>this.handleClose()}),c&&r.a.createElement("div",{className:"option-container"},a.map(({value:e,label:t})=>r.a.createElement(be,{className:"option",key:e,onClick:()=>n(e)},t))))}}var Ae=ke;s(438);var Re=Object(o.b)(({env:e,db:t,user:s})=>({env:e,db:t,user:s}),Q)(class extends de{render(){const e=this.props,t=e.className,s=e.crn,n=e.overlay,a=e.preview,c=e.capture,i=this.props.db.oscar,o=this.props.env.mobile&&!c,l=this.props.user.colorMap,d=i.findSection(s),u=l[d.course.id],h=w(u);return r.a.createElement("div",{className:j("TimeBlocks",o&&"mobile",n&&"overlay",t)},d.meetings.map((e,t)=>e.period&&e.days.map(s=>r.a.createElement("div",{className:j("meeting",h,"default",s),key:[t,s].join("-"),style:{top:(e.period.start-480)/780*100+"%",height:(e.period.end-e.period.start)/780*100+"%",backgroundColor:u}},!a&&r.a.createElement("div",{className:"meeting-wrapper"},r.a.createElement("span",{className:"course_id"},d.course.id,o?"":" ".concat(d.id)),r.a.createElement("span",{className:"period"},S(e.period)),!o&&r.a.createElement("span",{className:"where"},e.where),!o&&r.a.createElement("span",{className:"instructors"},e.instructors.join(", ")))))))}});var De=class{constructor(e){const t=e.courses,s=e.caches,n=e.updatedAt;this.periods=s.periods.map(e=>{if("TBA"!==e)return{start:N(e.split(" - ")[0]),end:N(e.split(" - ")[1])}}),this.dateRanges=s.dateRanges.map(e=>{const t=e.split(" - ").map(e=>new Date(e)),s=Object(g.a)(t,2),n=s[0],a=s[1];return n.setHours(0),a.setHours(23,59,59,999),{from:n,to:a}}),this.scheduleTypes=s.scheduleTypes,this.campuses=s.campuses,this.attributes=s.attributes,this.gradeBases=s.gradeBases,this.updatedAt=new Date(n),this.courses=Object.keys(t).map(e=>new _e(this,e,t[e])),this.courseMap={},this.crnMap={},this.courses.forEach(e=>{this.courseMap[e.id]=e,e.sections.forEach(e=>{this.crnMap[e.crn]=e})}),this.sortingOptions=[new Ue("Most Compact",e=>{const t=e.startMap,s=e.endMap;return+Object.keys(t).map(e=>s[e]-t[e]).reduce((e,t)=>e+t,0)}),new Ue("Earliest Ending",e=>{const t=e.endMap,s=Object.values(t);return+(s.reduce((e,t)=>e+t,0)/s.length)}),new Ue("Latest Beginning",e=>{const t=e.startMap,s=Object.values(t);return-(s.reduce((e,t)=>e+t,0)/s.length)})]}findCourse(e){return this.courseMap[e]}findSection(e){return this.crnMap[e]}searchCourses(e,t){const s=(()=>{const t=/^([A-Z]+) ?((\d.*)?)$/i.exec(e.toUpperCase());if(!t)return[];const s=Object(g.a)(t,3),n=s[1],a=s[2];return a?this.courses.filter(e=>e.subject===n&&e.number.startsWith(a)):this.courses.filter(e=>e.subject===n)})();return 0===t.length?s:s.filter(e=>e.sections.some(e=>t.some(t=>e.attributes.includes(t))))}getCombinations(e,t,s){const n=[],a=(r=0,c=[])=>{if(r===e.length)return void n.push(c);const i=this.findCourse(e[r]),o=e=>!s.includes(e.crn),l=e=>t.includes(e.crn),d=e=>[...t,...c].some(t=>x(this.findSection(t),e));if(i.hasLab){const e=i.onlyLectures.find(l),t=i.onlyLabs.find(l),s=i.allInOnes.find(l);e&&t||s?a(r+1,c):e?e.associatedLabs.filter(o).forEach(e=>{d(e)||a(r+1,[...c,e.crn])}):t?t.associatedLectures.filter(o).forEach(e=>{d(e)||a(r+1,[...c,e.crn])}):(i.onlyLectures.filter(o).forEach(e=>{d(e)||e.associatedLabs.filter(o).forEach(t=>{d(t)||a(r+1,[...c,e.crn,t.crn])})}),i.allInOnes.filter(o).forEach(e=>{d(e)||a(r+1,[...c,e.crn])}))}else i.sections.some(l)?a(r+1,c):Object.values(i.sectionGroups).forEach(e=>{const t=e.sections.find(o);t&&!d(t)&&a(r+1,[...c,t.crn])})};return a(),n.map(e=>{const s={},n={};return this.iterateTimeBlocks([...t,...e],(e,t)=>{(!(e in s)||s[e]>t.start)&&(s[e]=t.start),(!(e in n)||n[e]<t.end)&&(n[e]=t.end)}),{crns:e,startMap:s,endMap:n}})}sortCombinations(e,t){const s=this.sortingOptions[t];return e.map(e=>Object(d.a)(Object(d.a)({},e),{},{factor:s.calculateFactor(e)})).sort((e,t)=>e.factor-t.factor)}iterateTimeBlocks(e,t){e.forEach(e=>{this.findSection(e).meetings.forEach(e=>e.period&&e.days.forEach(s=>{t(s,e.period)}))})}},Ie=s(167),Me=s.n(Ie),Le=s(286),Be=s(287),Fe=s.n(Be);var _e=class{constructor(e,t,s){const n=Object(g.a)(s,2),a=n[0],r=n[1];this.id=t;var c=this.id.split(" "),i=Object(g.a)(c,2);this.subject=i[0],this.number=i[1],this.title=a,this.sections=Object.keys(r).map(t=>new Pe(e,this,t,r[t]));const o=this.sections.filter(e=>D(e)&&!R(e)),l=this.sections.filter(e=>R(e)&&!D(e));if(this.hasLab=o.length&&l.length,this.hasLab){o.forEach(e=>e.associatedLabs=l.filter(t=>t.id.startsWith(e.id))),l.forEach(e=>e.associatedLectures=o.filter(t=>e.id.startsWith(t.id)));const e=o.filter(e=>!e.associatedLabs.length),t=l.filter(e=>!e.associatedLectures.length);e.forEach(e=>e.associatedLabs=t.filter(t=>!x(e,t))),t.forEach(t=>t.associatedLectures=e.filter(e=>!x(e,t))),this.onlyLectures=o,this.onlyLabs=l,this.allInOnes=this.sections.filter(e=>D(e)&&R(e))}else this.sectionGroups=this.distinct(this.sections)}distinct(e){let t={};return e.forEach(e=>{const s=e.meetings.map(({days:e,period:t})=>({days:e,period:t})),n=JSON.stringify(s),a=t[n];a?a.sections.push(e):t[n]={hash:n,meetings:s,sections:[e]}}),t}fetchGpa(){var e=this;return Object(Le.a)(Me.a.mark((function t(){var s;return Me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="https://critique.gatech.edu/course.php?id=".concat(encodeURIComponent(e.id)),t.next=3,te()({url:"https://cors-anywhere.herokuapp.com/".concat(s),method:"get",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"text/html"}}).then(e=>{const t=Fe.a.load(e.data),s={averageGpa:Number(t("div.center-table > table.table > tbody > tr :nth-child(2)").text())};return t("table#dataTable > tbody > tr").each((e,n)=>{const a=t(n).find("td:nth-child(1)").text().split(", "),r=Object(g.a)(a,2),c=r[0],i=r[1],o="".concat(i," ").concat(c);s[o]=Number(t(n).find("td:nth-child(3)").text())}),s});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}};var Pe=class{constructor(e,t,s,n){const a=Object(g.a)(n,7),r=a[0],c=a[1],i=a[2],o=a[3],l=a[4],d=a[5],u=a[6];this.course=t,this.id=s,this.crn=r,this.credits=i,this.scheduleType=e.scheduleTypes[o],this.campus=e.campuses[l],this.attributes=d.map(t=>e.attributes[t]),this.gradeBasis=e.gradeBases[u],this.meetings=c.map(([t,s,n,a,r])=>({period:e.periods[t],days:"&nbsp;"===s?[]:[...s],where:n,instructors:a.map(e=>e.replace(/ \(P\)$/,"")),dateRange:e.dateRanges[r]})),this.instructors=A(this.meetings.reduce((e,t)=>[...e,...t.instructors],[]))}};var Ue=class{constructor(e,t){this.label=e,this.calculateFactor=t}},We=s(288),Ge=s.n(We),He=(s(635),s(636),s(289)),Ye=s(290),Ve=s(291),qe=s(292),Ke=s(293);var ze=Object(o.b)(({env:e,db:t,user:s})=>({env:e,db:t,user:s}),Q)(class extends de{constructor(e){super(e),this.handleThemeChange=()=>{const e="light"===this.state.theme?"dark":"light";G.a.set("theme",e),this.setState({theme:e})},this.handleResize=e=>{const t=this.props.env.mobile,s=T();t!==s&&this.props.setMobile(s)},this.handleExport=()=>{const e=this.props.db.oscar,t=this.props.user.pinnedCrns,s=oe();t.forEach(t=>{const n=e.findSection(t);n.meetings.forEach(e=>{if(!e.period||!e.days.length)return;const t=e.dateRange,a=t.from,r=t.to,c=n.course.id,i=n.course.title,o=e.where,l=new Date(a);for(;!e.days.includes(["-","M","T","W","R","F","-"][l.getDay()]);)l.setDate(l.getDate()+1);l.setHours(e.period.start/60|0,e.period.start%60);const d=new Date(l);d.setHours(e.period.end/60|0,e.period.end%60);const u={freq:"WEEKLY",until:r,byday:e.days.map(e=>({M:"MO",T:"TU",W:"WE",R:"TH",F:"FR"}[e]))};s.addEvent(c,i,o,l,d,u)})}),s.download("gt-scheduler")},this.handleDownload=()=>{const e=this.captureRef.current;ne.a.toPng(e,{width:2*e.offsetWidth,height:2*e.offsetHeight,style:{left:0,transform:"scale(".concat(2,")"),"transform-origin":"top left"}}).then(e=>re()(e,"schedule.png"))},this.handleChangeTab=e=>{this.setState({tabIndex:e})},this.handleChangeSemester=e=>{this.props.setTerm(e),this.loadOscar(e)},this.handleSetPinnedCrns=e=>{this.props.setPinnedCrns(e)},this.handleResetPinnedCrns=()=>{window.confirm("Are you sure to reset sections you selected?")&&this.props.setPinnedCrns([])},this.handleChangeSortingOptionIndex=e=>{this.props.setSortingOptionIndex(e)},this.state={terms:[],tabIndex:0,theme:"light"===G.a.get("theme")?"light":"dark"},this.captureRef=r.a.createRef()}componentDidMount(){const e=this.props.user.term;e&&this.loadOscar(e),te.a.get("https://api.github.com/repos/64json/gt-schedule-crawler/contents?ref=gh-pages").then(t=>{const s=t.data.map(e=>e.name).filter(e=>/\d{6}\.json/.test(e)).map(e=>e.replace(/\.json$/,"")).sort().reverse();if(!e){const e=s[0];this.handleChangeSemester(e)}this.setState({terms:s})}),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}loadOscar(e){this.props.setOscar(null),te.a.get("https://jasonpark.me/gt-schedule-crawler/".concat(e,".json")).then(e=>{const t=new De(e.data);this.memoizedGetCombinations=Object(ce.a)(t.getCombinations.bind(t)),this.memoizedSortCombinations=Object(ce.a)(t.sortCombinations.bind(t)),this.props.setOscar(t)})}getTotalCredits(){const e=this.props.db.oscar;return this.props.user.pinnedCrns.reduce((t,s)=>t+e.findSection(s).credits,0)}render(){const e=this.props.env,t=e.mobile,s=e.overlayCrns,n=this.props.db.oscar,a=this.props.user,c=a.term,i=a.desiredCourses,o=a.pinnedCrns,l=a.excludedCrns,d=a.sortingOptionIndex,u=this.state,h=u.terms,p=u.tabIndex,m=u.theme,b=j("App",t&&"mobile",m);if(!n)return r.a.createElement("div",{className:b});const E=this.memoizedGetCombinations(i,o,l),g=this.memoizedSortCombinations(E,d);return r.a.createElement("div",{className:b},r.a.createElement("div",{className:"navigation"},r.a.createElement(be,{className:"logo"},r.a.createElement("span",{className:"gt"},"GT "),r.a.createElement("span",{className:"scheduler"},"Scheduler")),r.a.createElement(Ae,{onChange:e=>this.handleChangeSemester(e),value:c,options:h.map(e=>({value:e,label:I(e)})),className:"semester"}),r.a.createElement("span",{className:"credits"},this.getTotalCredits()," Credits"),r.a.createElement("div",{className:"menu"},r.a.createElement(be,{onClick:this.handleDownload,disabled:0===o.length},r.a.createElement(Ee.a,{className:"icon",fixedWidth:!0,icon:He.faDownload}),r.a.createElement("div",{className:"text"},"Download")),r.a.createElement(be,{onClick:this.handleExport,disabled:0===o.length},r.a.createElement(Ee.a,{className:"icon",fixedWidth:!0,icon:Ye.faCalendarAlt}),r.a.createElement("div",{className:"text"},"Export")),r.a.createElement(be,{text:o.join(", "),disabled:0===o.length},r.a.createElement(Ee.a,{className:"icon",fixedWidth:!0,icon:Ve.faPaste}),r.a.createElement("div",{className:"text"},"CRNs")),r.a.createElement(be,{onClick:this.handleThemeChange},r.a.createElement(Ee.a,{className:"icon",fixedWidth:!0,icon:qe.faAdjust}),r.a.createElement("div",{className:"text"},"Theme")),r.a.createElement(be,{href:"https://github.com/64json/gt-scheduler"},r.a.createElement(Ee.a,{className:"icon",fixedWidth:!0,icon:Ke.faGithub}),r.a.createElement("div",{className:"text"},"GitHub")))),t&&r.a.createElement("div",{className:"tab-container"},["Courses","Combinations","Calendar"].map((e,t)=>r.a.createElement(be,{key:e,className:j("tab",p===t&&"active"),onClick:()=>this.handleChangeTab(t)},e))),r.a.createElement("div",{className:"main"},(!t||0===p)&&r.a.createElement("div",{className:"sidebar sidebar-courses"},r.a.createElement("div",{className:"scroller"},r.a.createElement("div",{className:"course-list"},i.map(e=>r.a.createElement(Ne,{courseId:e,expandable:!0,key:e}))),r.a.createElement(Se,{className:"course-add"})),r.a.createElement(be,{className:"updated-at",href:"https://github.com/64json/gt-schedule-crawler"},"Course data fetched ",Ge()(n.updatedAt))),(!t||1===p)&&r.a.createElement("div",{className:"sidebar sidebar-combinations"},r.a.createElement(Ae,{onChange:this.handleChangeSortingOptionIndex,value:d,options:n.sortingOptions.map((e,t)=>({value:t,label:e.label}))}),r.a.createElement(be,{className:"reset",onClick:this.handleResetPinnedCrns,disabled:0===o.length},"Reset Sections"),r.a.createElement("div",{className:"scroller"},r.a.createElement(ie.AutoSizer,null,({width:e,height:t})=>r.a.createElement(ie.List,{width:e,height:t,style:{outline:"none"},rowCount:g.length,rowHeight:108,rowRenderer:({index:e,key:t,style:s})=>{const n=g[e].crns;return r.a.createElement("div",{className:"list-item",style:s,key:t},r.a.createElement("div",{className:"combination",onMouseEnter:()=>this.props.setOverlayCrns(n),onMouseLeave:()=>this.props.setOverlayCrns([]),onClick:()=>this.handleSetPinnedCrns([...o,...n])},r.a.createElement("div",{className:"number"},e+1),r.a.createElement(Ce,{className:"calendar-preview",overlayCrns:n,preview:!0})))}})))),(!t||2===p)&&r.a.createElement("div",{className:"calendar-container"},r.a.createElement(Ce,{className:"calendar",overlayCrns:s}))),r.a.createElement("div",{className:"capture-container",ref:this.captureRef},r.a.createElement(Ce,{className:"fake-calendar",capture:!0})))}});s(637),s(638);const Xe=Object(l.c)(Object(l.b)(n));i.a.render(r.a.createElement(o.a,{store:Xe},r.a.createElement(ze,null)),document.getElementById("root"))}},[[294,1,2]]]);
//# sourceMappingURL=main.314b05cf.chunk.js.map