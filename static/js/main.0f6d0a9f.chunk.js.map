{"version":3,"sources":["constants.js","utils.js","components/ActionRow/index.js","components/Button/index.js","contexts/index.js","components/Calendar/index.js","components/CombinationContainer/index.js","components/Course/index.js","components/CourseAdd/index.js","components/CourseContainer/index.js","libs/ics.js","components/Header/index.js","components/Instructor/index.js","components/Palette/index.js","components/Section/index.js","components/Select/index.js","components/TimeBlocks/index.js","beans/Oscar.js","beans/Course.js","beans/Section.js","beans/SortingOption.js","hooks/useCookie.js","components/App/index.js","hooks/useJsonCookie.js","index.js"],"names":["DAYS","PALETTE","INSTRUCTIONAL_METHOD_ATTRIBUTES","stringToTime","string","exec","hour","minute","Number","parseInt","timeToString","time","ampm","periodToString","period","start","end","getRandomColor","colors","flat","Math","random","length","getContentClassName","color","substring","hasConflictBetween","section1","section2","meetings","some","meeting1","meeting2","day","days","includes","classes","classList","filter","c","join","isMobile","window","innerWidth","simplifyName","name","tokens","split","shift","pop","unique","array","Set","isLab","section","scheduleType","isLecture","getSemesterName","term","year","semester","isInstructionalMethodAttribute","attribute","refineInstructionalMethodAttribute","v","ActionRow","className","label","children","actions","restProps","action","map","i","icon","Button","key","fixedWidth","disabled","text","href","onClick","rel","target","ThemeContext","React","createContext","TermsContext","TermContext","OverlayCrnsContext","Calendar","overlayCrns","preview","capture","useContext","pinnedCrns","Array","fill","_","timeToShortString","crn","TimeBlocks","overlay","CombinationContainer","props","oscar","desiredCourses","excludedCrns","sortingOptionIndex","patchTermData","setOverlayCrns","handleResetPinnedCrns","useCallback","confirm","combinations","useMemo","getCombinations","sortedCombinations","sortCombinations","Select","onChange","value","options","sortingOptions","sortingOption","width","height","style","outline","rowCount","rowHeight","rowRenderer","index","crns","onMouseEnter","onMouseLeave","Course","courseId","onAddCourse","useState","expanded","setExpanded","paletteShown","setPaletteShown","gpaMap","setGpaMap","isSearching","Boolean","colorMap","useEffect","findCourse","fetchGpa","then","handleRemoveCourse","course","id","sections","undefined","handleIncludeSections","contentClassName","instructorMap","forEach","instructors","primaryInstructor","push","Object","keys","excludedInstructors","instructor","every","includedInstructors","infoAction","faInfoCircle","subject","number","pinnedSections","totalCredits","reduce","credits","backgroundColor","faPlus","faAngleUp","faAngleDown","faPalette","faTrash","dangerouslySetInnerHTML","__html","title","averageGpa","Palette","onSelectColor","Instructor","gpa","CourseAdd","courses","setCourses","keyword","setKeyword","attributes","setAttributes","activeIndex","setActiveIndex","inputRef","useRef","handleChangeKeyword","e","trim","results","match","searchCourses","handleAddCourse","tbaCrns","meeting","current","focus","handleKeyDown","activeCourse","min","max","preventDefault","handleToggleAttribute","type","ref","placeholder","onKeyDown","CourseContainer","expandable","ago","updatedAt","ics","uidDomain","prodId","navigator","userAgent","indexOf","SEPARATOR","appVersion","calendarEvents","calendarStart","calendarEnd","BYDAY_VALUES","events","calendar","addEvent","description","location","begin","stop","rrule","freq","Error","until","isNaN","Date","parse","interval","count","byday","prototype","toString","call","d","elem","pos","start_date","end_date","now_date","start_year","getFullYear","slice","start_month","getMonth","start_day","getDate","start_hours","getHours","start_minutes","getMinutes","start_seconds","getSeconds","end_year","end_month","end_day","end_hours","end_minutes","end_seconds","start_time","end_time","rruleString","now","uDate","toISOString","replace","calendarEvent","splice","download","filename","ext","blob","Blob","bb","BlobBuilder","append","getBlob","document","characterSet","saveAs","build","console","log","Header","setTerm","terms","theme","setTheme","captureRef","handleThemeChange","newTheme","Cookies","set","findSection","handleExport","cal","dateRange","from","to","where","getTime","getDay","setDate","setHours","M","T","W","R","F","handleDownload","captureElement","domtoimage","toPng","offsetWidth","offsetHeight","left","transform","faDownload","faCalendarAlt","faPaste","faAdjust","faGithub","includeSection","excludeSections","instructorPinned","includedSections","excludedSections","encodeURIComponent","faBan","pinned","paletteColor","Section","excludeSection","pinSection","faTimes","faThumbtack","opened","setOpened","selectedOption","find","option","faCaretDown","top","Oscar","constructor","data","caches","this","periods","dateRanges","scheduleTypes","campuses","gradeBases","courseMap","crnMap","SortingOption","combination","startMap","endMap","sum","ends","values","starts","filteredCourses","toUpperCase","startsWith","filterCoursesByKeyword","crnsList","dfs","courseIndex","isIncluded","isPinned","hasConflict","hasLab","pinnedOnlyLecture","onlyLectures","pinnedOnlyLab","onlyLabs","pinnedAllInOne","allInOnes","associatedLabs","lab","associatedLectures","lecture","sectionGroups","sectionGroup","iterateTimeBlocks","factor","calculateFactor","sort","a","b","callback","sectionId","lonelyLectures","lonelyLabs","distinct","groups","sectionGroupMeetings","sectionGroupHash","JSON","stringify","hash","url","axios","method","headers","response","$","cheerio","load","each","element","lastName","firstName","fullName","scheduleTypeIndex","campusIndex","attributeIndices","gradeBasisIndex","campus","attributeIndex","gradeBasis","periodIndex","dateRangeIndex","useCookie","defaultValue","setValue","setCookieValue","get","defaultTermData","App","rawValue","setRawValue","parsedValue","patchValue","patch","useJsonCookie","termData","setTerms","setOscar","tabIndex","setTabIndex","mobile","setMobile","themeContextValue","termsContextValue","termContextValue","overlayContextValue","res","content","test","reverse","recentTerm","handleResize","newMobile","addEventListener","removeEventListener","Provider","tabTitle","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0f6d0a9f.chunk.js","sourcesContent":["const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\nconst DAYS = ['M', 'T', 'W', 'R', 'F'];\n\nconst PNG_SCALE_FACTOR = 2;\n\nconst PALETTE = [\n  [\n    '#4D4D4D',\n    '#999999',\n    '#FFFFFF',\n    '#F44E3B',\n    '#FE9200',\n    '#FCDC00',\n    '#DBDF00',\n    '#A4DD00',\n    '#68CCCA',\n    '#73D8FF',\n    '#AEA1FF',\n    '#FDA1FF',\n  ],\n  [\n    '#333333',\n    '#808080',\n    '#CCCCCC',\n    '#D33115',\n    '#E27300',\n    '#FCC400',\n    '#B0BC00',\n    '#68BC00',\n    '#16A5A5',\n    '#009CE0',\n    '#7B64FF',\n    '#FA28FF',\n  ],\n  [\n    '#000000',\n    '#666666',\n    '#B3B3B3',\n    '#9F0500',\n    '#C45100',\n    '#FB9E00',\n    '#808900',\n    '#194D33',\n    '#0C797D',\n    '#0062B1',\n    '#653294',\n    '#AB149E',\n  ],\n];\n\nconst INSTRUCTIONAL_METHOD_ATTRIBUTES = [\n  'Hybrid Course',\n  // 'Isolate Course in Canvas',\n  'Remote Synchronous Course',\n  'Remote Asynchronous Course',\n  'Residential Course',\n];\n\nexport { OPEN, CLOSE, DAYS, PNG_SCALE_FACTOR, PALETTE, INSTRUCTIONAL_METHOD_ATTRIBUTES };\n","import { DAYS, INSTRUCTIONAL_METHOD_ATTRIBUTES, PALETTE } from './constants';\n\nconst stringToTime = (string) => {\n  const [, hour, minute, ampm] = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  return (\n    ((ampm === 'p' ? 12 : 0) + Number.parseInt(hour % 12)) * 60 +\n    Number.parseInt(minute)\n  );\n};\n\nconst timeToString = (time, ampm = true) => {\n  const hour = (time / 60) | 0;\n  const minute = time % 60;\n  return `${hour > 12 ? hour - 12 : hour}:${\n    minute < 10 ? '0' + minute : minute\n  }${ampm ? ` ${hour < 12 ? 'a' : 'p'}m` : ''}`;\n};\n\nconst timeToShortString = (time) => {\n  const hour = (time / 60) | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nconst periodToString = (period) =>\n  period\n    ? `${timeToString(period.start, false)} - ${timeToString(period.end)}`\n    : 'TBA';\n\nconst getRandomColor = () => {\n  const colors = PALETTE.flat();\n  const index = Math.random() * colors.length | 0;\n  return colors[index];\n};\n\nconst getContentClassName = color => {\n  const r = parseInt(color.substring(1, 3), 16);\n  const g = parseInt(color.substring(3, 5), 16);\n  const b = parseInt(color.substring(5, 7), 16);\n  return r * 0.299 + g * 0.587 + b * 0.114 > 128\n    ? 'light-content'\n    : 'dark-content';\n};\n\nconst hasConflictBetween = (section1, section2) =>\n  section1.meetings.some((meeting1) =>\n    section2.meetings.some(\n      (meeting2) =>\n        meeting1.period &&\n        meeting2.period &&\n        DAYS.some(\n          (day) => meeting1.days.includes(day) && meeting2.days.includes(day),\n        ) &&\n        meeting1.period.start < meeting2.period.end &&\n        meeting2.period.start < meeting1.period.end,\n    ),\n  );\n\nconst classes = (...classList) => classList.filter((c) => c).join(' ');\n\nconst isMobile = () => window.innerWidth < 1024;\n\nconst shallowCompareEntries = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return (\n    aKeys.length === bKeys.length &&\n    aKeys.every((key) => key in b && a[key] === b[key])\n  );\n};\n\nconst simplifyName = (name) => {\n  const tokens = name.split(' ');\n  const firstName = tokens.shift();\n  const lastName = tokens.pop();\n  return [firstName, lastName].join(' ');\n};\n\nconst unique = (array) => [...new Set(array)];\n\nconst isLab = (section) => section.scheduleType.includes('Lab');\n\nconst isLecture = (section) => section.scheduleType.includes('Lecture');\n\nconst getSemesterName = (term) => {\n  const year = term.substring(0, 4);\n  const semester = (() => {\n    switch (Number.parseInt(term.substring(4))) {\n      case 1:\n        return 'Winter';\n      case 2:\n      case 3:\n        return 'Spring';\n      case 5:\n      case 6:\n        return 'Summer';\n      case 8:\n      case 9:\n        return 'Fall';\n      default:\n        return 'Unknown';\n    }\n  })();\n  return `${semester} ${year}`;\n};\n\nconst isInstructionalMethodAttribute = attribute => {\n  return INSTRUCTIONAL_METHOD_ATTRIBUTES.includes(attribute);\n};\n\nconst refineInstructionalMethodAttribute = attribute => {\n  return attribute.split(' ').filter(v => v !== 'Course').join(' ');\n};\n\nexport {\n  stringToTime,\n  timeToString,\n  timeToShortString,\n  periodToString,\n  getRandomColor,\n  getContentClassName,\n  hasConflictBetween,\n  classes,\n  isMobile,\n  shallowCompareEntries,\n  simplifyName,\n  unique,\n  isLab,\n  isLecture,\n  getSemesterName,\n  isInstructionalMethodAttribute,\n  refineInstructionalMethodAttribute,\n};\n","import React from 'react';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\nimport { Button } from '../';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function ActionRow({ className, label, children, actions, ...restProps }) {\n  return (\n    <div className={classes('ActionRow', className)} {...restProps}>\n      <div className=\"action-row-header\">\n        <div className=\"label\">\n          {label}\n        </div>\n        <div className={classes('actions', 'default')}>\n          {\n            actions.filter(action => action).map(({ icon, ...restProps }, i) => (\n              <Button className=\"action\" {...restProps} key={i}>\n                <FontAwesomeIcon fixedWidth icon={icon}/>\n              </Button>\n            ))\n          }\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n}\n","import React from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nexport function Button({ className, disabled, text, href, onClick, children }) {\n  return disabled ? (\n    <div className={classes('Button', 'disabled')}>\n      {children}\n    </div>\n  ) : href ? (\n    <a className={classes('Button', className)} href={href} rel=\"noopener noreferrer\" target=\"_blank\">\n      {children}\n    </a>\n  ) : text ? (\n    <CopyToClipboard text={text}>\n      <div className={classes('Button', className)}>\n        {children}\n      </div>\n    </CopyToClipboard>\n  ) : (\n    <div className={classes('Button', className)} onClick={onClick}>\n      {children}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport const ThemeContext = React.createContext(null);\nexport const TermsContext = React.createContext(null);\nexport const TermContext = React.createContext(null);\nexport const OverlayCrnsContext = React.createContext(null);\n","import React, { useContext } from 'react';\nimport { CLOSE, DAYS, OPEN } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { TimeBlocks } from '../';\nimport './stylesheet.scss';\nimport { TermContext } from '../../contexts';\n\nexport function Calendar({ className, overlayCrns, preview, capture }) {\n  const [{ pinnedCrns }] = useContext(TermContext);\n\n  return (\n    <div className={classes(\n      'Calendar',\n      capture && 'capture',\n      preview && 'preview',\n      className,\n    )}>\n      {!preview && (\n        <div className=\"times\">\n          {new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n            const time = OPEN + i * 60;\n            return (\n              <div className=\"time\" key={time}>\n                <span className=\"label\">{timeToShortString(time)}</span>\n              </div>\n            );\n          })}\n        </div>\n      )}\n      {!preview && (\n        <div className=\"days\">\n          {DAYS.map((day) => (\n            <div className=\"day\" key={day}>\n              <span className=\"label\">{day}</span>\n            </div>\n          ))}\n        </div>\n      )}\n      <div className=\"meetings\">\n        {pinnedCrns.map((crn) => (\n          <TimeBlocks\n            key={crn}\n            crn={crn}\n            preview={preview}\n            capture={capture}\n          />\n        ))}\n        {overlayCrns &&\n        overlayCrns\n          .filter((crn) => !pinnedCrns.includes(crn))\n          .map((crn) => (\n            <TimeBlocks\n              key={crn}\n              crn={crn}\n              overlay={!preview}\n              preview={preview}\n              capture={capture}\n            />\n          ))}\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useMemo } from 'react';\nimport { AutoSizer, List } from 'react-virtualized/dist/commonjs';\nimport { Button, Calendar, Select } from '../';\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\nimport { OverlayCrnsContext, TermContext } from '../../contexts';\n\nexport function CombinationContainer(props) {\n  const [\n    { oscar, desiredCourses, pinnedCrns, excludedCrns, sortingOptionIndex },\n    { patchTermData },\n  ] = useContext(TermContext);\n  const [, setOverlayCrns] = useContext(OverlayCrnsContext);\n\n  const handleResetPinnedCrns = useCallback(() => {\n    if (window.confirm('Are you sure to reset sections you selected?')) {\n      patchTermData({\n        pinnedCrns: [],\n      });\n    }\n  }, [patchTermData]);\n\n  const combinations = useMemo(() => oscar.getCombinations(\n    desiredCourses,\n    pinnedCrns,\n    excludedCrns,\n  ), [oscar, desiredCourses, pinnedCrns, excludedCrns]);\n  const sortedCombinations = useMemo(() => oscar.sortCombinations(\n    combinations,\n    sortingOptionIndex,\n  ), [oscar, combinations, sortingOptionIndex]);\n\n  return (\n    <div className=\"CombinationContainer\">\n      <Select\n        onChange={sortingOptionIndex => patchTermData({ sortingOptionIndex })}\n        value={sortingOptionIndex}\n        options={oscar.sortingOptions.map((sortingOption, i) => ({ value: i, label: sortingOption.label }))}/>\n      <Button\n        className=\"reset\"\n        onClick={handleResetPinnedCrns}\n        disabled={pinnedCrns.length === 0}>\n        Reset Sections\n      </Button>\n      <div className=\"scroller\">\n        <AutoSizer>\n          {({ width, height }) => (\n            <List\n              width={width}\n              height={height}\n              style={{ outline: 'none' }}\n              rowCount={sortedCombinations.length}\n              rowHeight={108}\n              rowRenderer={({ index, key, style }) => {\n                const { crns } = sortedCombinations[index];\n                return (\n                  <div className=\"list-item\" style={style} key={key}>\n                    <div className=\"combination\"\n                         onMouseEnter={() => setOverlayCrns(crns)}\n                         onMouseLeave={() => setOverlayCrns([])}\n                         onClick={() =>\n                           patchTermData({\n                             pinnedCrns: [\n                               ...pinnedCrns,\n                               ...crns,\n                             ],\n                           })\n                         }>\n                      <div className=\"number\">{index + 1}</div>\n                      <Calendar className=\"calendar-preview\"\n                                overlayCrns={crns}\n                                preview/>\n                    </div>\n                  </div>\n                );\n              }}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { faAngleDown, faAngleUp, faInfoCircle, faPalette, faPlus, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { classes, getContentClassName } from '../../utils';\nimport { ActionRow, Instructor, Palette } from '../';\nimport './stylesheet.scss';\nimport { TermContext } from '../../contexts';\n\nexport function Course({ className, courseId, onAddCourse }) {\n  const [expanded, setExpanded] = useState(false);\n  const [paletteShown, setPaletteShown] = useState(false);\n  const [gpaMap, setGpaMap] = useState({});\n  const isSearching = Boolean(onAddCourse);\n  const [\n    { oscar, term, desiredCourses, pinnedCrns, excludedCrns, colorMap },\n    { patchTermData },\n  ] = useContext(TermContext);\n\n  useEffect(() => {\n    if (!isSearching) {\n      const course = oscar.findCourse(courseId);\n      course.fetchGpa().then(setGpaMap);\n    }\n  }, [isSearching, oscar, courseId]);\n\n  const handleRemoveCourse = useCallback(course => {\n    patchTermData({\n      desiredCourses: desiredCourses.filter(courseId => courseId !== course.id),\n      pinnedCrns: pinnedCrns.filter(crn => !course.sections.some(section => section.crn === crn)),\n      excludedCrns: excludedCrns.filter(crn => !course.sections.some(section => section.crn === crn)),\n      colorMap: { ...colorMap, [course.id]: undefined },\n    });\n  }, [desiredCourses, pinnedCrns, excludedCrns, colorMap, patchTermData]);\n\n  const handleIncludeSections = useCallback(sections => {\n    const crns = sections.map(section => section.crn);\n    patchTermData({\n      excludedCrns: excludedCrns.filter(crn => !crns.includes(crn)),\n    });\n  }, [excludedCrns, patchTermData]);\n\n  const course = oscar.findCourse(courseId);\n  const color = colorMap[course.id];\n  const contentClassName = color && getContentClassName(color);\n\n  const instructorMap = {};\n  course.sections.forEach(section => {\n    const [primaryInstructor = 'Not Assigned'] = section.instructors;\n    if (!(primaryInstructor in instructorMap)) {\n      instructorMap[primaryInstructor] = [];\n    }\n    instructorMap[primaryInstructor].push(section);\n  });\n\n  const instructors = Object.keys(instructorMap);\n  const excludedInstructors = instructors.filter(instructor => {\n    const sections = instructorMap[instructor];\n    return sections.every(section => excludedCrns.includes(section.crn));\n  });\n  const includedInstructors = instructors.filter(instructor => !excludedInstructors.includes(instructor));\n\n  const infoAction = {\n    icon: faInfoCircle,\n    href: `https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_course_detail?cat_term_in=${term}&subj_code_in=${course.subject}&crse_numb_in=${course.number}`,\n  };\n\n  const pinnedSections = course.sections.filter(section => pinnedCrns.includes(section.crn));\n  const totalCredits = pinnedSections.reduce((credits, section) => credits + section.credits, 0);\n\n  return (\n    <div className={classes('Course', contentClassName, 'default', className)}\n         style={{ backgroundColor: color }}\n         key={course.id}>\n      <ActionRow label={[course.id, pinnedSections.map(section => section.id).join(', ')].join(' ')}\n                 actions={isSearching ? [\n                   { icon: faPlus, onClick: onAddCourse },\n                   infoAction,\n                 ] : [\n                   { icon: expanded ? faAngleUp : faAngleDown, onClick: () => setExpanded(!expanded) },\n                   infoAction,\n                   { icon: faPalette, onClick: () => setPaletteShown(!paletteShown) },\n                   { icon: faTrash, onClick: () => handleRemoveCourse(course) },\n                 ]}>\n        <div className=\"course-row\">\n          <span className=\"course-title\" dangerouslySetInnerHTML={{ __html: course.title }}/>\n          <span className=\"section-crns\">\n              {pinnedSections.map(section => section.crn).join(', ')}\n            </span>\n        </div>\n        {\n          !isSearching && (\n            <div className=\"course-row\">\n                <span className=\"gpa\">\n                  Course GPA: {gpaMap.averageGpa || 'N/A'}\n                </span>\n              {\n                totalCredits > 0 && (\n                  <span className=\"credits\">\n                      {totalCredits} Credits\n                    </span>\n                )\n              }\n            </div>\n          )\n        }\n        {\n          paletteShown &&\n          <Palette className=\"palette\"\n                   onSelectColor={color => patchTermData({ colorMap: { ...colorMap, [courseId]: color } })}\n                   color={color} onMouseLeave={() => setPaletteShown(false)}/>\n        }\n      </ActionRow>\n      {\n        expanded &&\n        <div className={classes('instructor-container', 'nested')}>\n          {\n            includedInstructors.map(name => (\n              <Instructor key={name} color={color} name={name}\n                          sections={instructorMap[name]} gpa={gpaMap[name]}/>\n            ))\n          }\n          {\n            excludedInstructors.length > 0 &&\n            <div className=\"excluded-instructor-container\">\n              {\n                excludedInstructors.map(name => (\n                  <span className=\"excluded-instructor\" key={name}\n                        onClick={() => handleIncludeSections(instructorMap[name])}>\n                      {name}\n                    </span>\n                ))\n              }\n            </div>\n          }\n        </div>\n      }\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { Course } from '../';\nimport { classes, getRandomColor, refineInstructionalMethodAttribute } from '../../utils';\nimport './stylesheet.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons/faPlus';\nimport { INSTRUCTIONAL_METHOD_ATTRIBUTES } from '../../constants';\nimport { TermContext } from '../../contexts';\n\nexport function CourseAdd({ className }) {\n  const [\n    { oscar, desiredCourses, excludedCrns, colorMap },\n    { patchTermData },\n  ] = useContext(TermContext);\n  const [courses, setCourses] = useState([]);\n  const [keyword, setKeyword] = useState('');\n  const [attributes, setAttributes] = useState([]);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const inputRef = useRef(null);\n\n  const handleChangeKeyword = useCallback(e => {\n    let keyword = e.target.value.trim();\n    const results = keyword.match(/^([A-Z]+)(\\d.*)$/i);\n    if (results) {\n      const [, subject, number] = results;\n      keyword = `${subject} ${number}`;\n    }\n    setKeyword(keyword);\n  }, []);\n\n  useEffect(() => {\n    const courses = oscar.searchCourses(keyword, attributes)\n      .filter((course) => !desiredCourses.includes(course.id));\n    setCourses(courses);\n    setActiveIndex(0);\n  }, [oscar, keyword, attributes, desiredCourses]);\n\n  const handleAddCourse = useCallback(course => {\n    if (desiredCourses.includes(course.id)) return;\n    const tbaCrns = course.sections\n      .filter(section =>\n        !section.meetings.length ||\n        section.meetings.some(meeting => !meeting.days.length || !meeting.period),\n      )\n      .map((section) => section.crn);\n    patchTermData({\n      desiredCourses: [...desiredCourses, course.id],\n      excludedCrns: [...excludedCrns, ...tbaCrns],\n      colorMap: { ...colorMap, [course.id]: getRandomColor() },\n    });\n    setCourses([]);\n    setKeyword('');\n    inputRef.current.focus();\n  }, [desiredCourses, excludedCrns, colorMap, inputRef, patchTermData]);\n\n  const handleKeyDown = useCallback(e => {\n    switch (e.key) {\n      case 'Enter':\n        const activeCourse = courses[activeIndex];\n        if (activeCourse) {\n          handleAddCourse(activeCourse);\n        }\n        break;\n      case 'ArrowDown':\n        setActiveIndex(Math.min(activeIndex + 1, courses.length - 1));\n        break;\n      case 'ArrowUp':\n        setActiveIndex(Math.max(activeIndex - 1, 0));\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n  }, [courses, handleAddCourse, activeIndex]);\n\n  const handleToggleAttribute = useCallback(attribute => {\n    setAttributes(\n      attributes.includes(attribute) ?\n        attributes.filter(v => v !== attribute) :\n        [...attributes, attribute],\n    );\n  }, [attributes]);\n\n  const activeCourse = courses[activeIndex];\n\n  return (\n    <div className={classes('CourseAdd', className)}>\n      <div className=\"add\">\n        <div className=\"primary\">\n          <FontAwesomeIcon className={classes('icon', courses.length && 'active')} fixedWidth icon={faPlus}/>\n          <div className=\"keyword-wrapper\">\n            {\n              activeCourse && (\n                <div className={classes('keyword', 'autocomplete')}>\n                  {activeCourse.id}\n                </div>\n              )\n            }\n            <input type=\"text\"\n                   ref={inputRef}\n                   value={keyword}\n                   onChange={handleChangeKeyword}\n                   className=\"keyword\"\n                   placeholder=\"XX 0000\"\n                   onKeyDown={handleKeyDown}/>\n          </div>\n        </div>\n        <div className=\"secondary\">\n          <div className={classes('attribute', attributes.length === 0 && 'active')}\n               onClick={() => setAttributes([])}>\n            All\n          </div>\n          {\n            INSTRUCTIONAL_METHOD_ATTRIBUTES.map(attribute => (\n              <div className={classes('attribute', attributes.includes(attribute) && 'active')} key={attribute}\n                   onClick={() => handleToggleAttribute(attribute)}>\n                {refineInstructionalMethodAttribute(attribute)}\n              </div>\n            ))\n          }\n        </div>\n      </div>\n      {\n        courses.map(course => (\n          <Course\n            key={course.id}\n            className={course === activeCourse && 'active'}\n            courseId={course.id}\n            pinnedCrns={[]}\n            onAddCourse={() => handleAddCourse(course)}\n          />\n        ))\n      }\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { Button, Course, CourseAdd } from '../';\nimport ago from 's-ago';\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\nimport { TermContext } from '../../contexts';\n\nexport function CourseContainer(props) {\n  const [\n    { oscar, desiredCourses },\n  ] = useContext(TermContext);\n\n  return (\n    <div className=\"CourseContainer\">\n      <div className=\"scroller\">\n        <div className=\"course-list\">\n          {\n            desiredCourses.map((courseId) => {\n              return (\n                <Course\n                  courseId={courseId}\n                  expandable\n                  key={courseId}\n                />\n              );\n            })\n          }\n        </div>\n        <CourseAdd className=\"course-add\"/>\n      </div>\n      <Button className=\"updated-at\" href=\"https://github.com/64json/gt-schedule-crawler\">\n        Course data fetched {ago(oscar.updatedAt)}\n      </Button>\n    </div>\n  );\n}\n","/* global saveAs, Blob, BlobBuilder, console */\n/* exported ics */\n\nconst ics = function (uidDomain, prodId) {\n  if (\n    navigator.userAgent.indexOf('MSIE') > -1 &&\n    navigator.userAgent.indexOf('MSIE 10') === -1\n  ) {\n    console.log('Unsupported Browser');\n    return;\n  }\n\n  if (typeof uidDomain === 'undefined') {\n    uidDomain = 'default';\n  }\n  if (typeof prodId === 'undefined') {\n    prodId = 'Calendar';\n  }\n\n  var SEPARATOR = navigator.appVersion.indexOf('Win') !== -1 ? '\\r\\n' : '\\n';\n  var calendarEvents = [];\n  var calendarStart = [\n    'BEGIN:VCALENDAR',\n    'PRODID:' + prodId,\n    'VERSION:2.0',\n  ].join(SEPARATOR);\n  var calendarEnd = SEPARATOR + 'END:VCALENDAR';\n  var BYDAY_VALUES = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n\n  return {\n    /**\n     * Returns events array\n     * @return {array} Events\n     */\n    events: function () {\n      return calendarEvents;\n    },\n\n    /**\n     * Returns calendar\n     * @return {string} Calendar in iCalendar format\n     */\n    calendar: function () {\n      return (\n        calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd\n      );\n    },\n\n    /**\n     * Add event to the calendar\n     * @param  {string} subject     Subject/Title of event\n     * @param  {string} description Description of event\n     * @param  {string} location    Location of event\n     * @param  {string} begin       Beginning date of event\n     * @param  {string} stop        Ending date of event\n     */\n    addEvent: function (subject, description, location, begin, stop, rrule) {\n      // I'm not in the mood to make these optional... So they are all required\n      if (\n        typeof subject === 'undefined' ||\n        typeof description === 'undefined' ||\n        typeof location === 'undefined' ||\n        typeof begin === 'undefined' ||\n        typeof stop === 'undefined'\n      ) {\n        return false;\n      }\n\n      // validate rrule\n      if (rrule) {\n        if (!rrule.rrule) {\n          if (\n            rrule.freq !== 'YEARLY' &&\n            rrule.freq !== 'MONTHLY' &&\n            rrule.freq !== 'WEEKLY' &&\n            rrule.freq !== 'DAILY'\n          ) {\n            throw new Error(\n              \"Recurrence rrule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'\"\n            );\n          }\n\n          if (rrule.until) {\n            if (isNaN(Date.parse(rrule.until))) {\n              throw new Error(\n                \"Recurrence rrule 'until' must be a valid date string\"\n              );\n            }\n          }\n\n          if (rrule.interval) {\n            if (isNaN(parseInt(rrule.interval))) {\n              throw new Error(\"Recurrence rrule 'interval' must be an integer\");\n            }\n          }\n\n          if (rrule.count) {\n            if (isNaN(parseInt(rrule.count))) {\n              throw new Error(\"Recurrence rrule 'count' must be an integer\");\n            }\n          }\n\n          if (typeof rrule.byday !== 'undefined') {\n            if (\n              Object.prototype.toString.call(rrule.byday) !== '[object Array]'\n            ) {\n              throw new Error(\"Recurrence rrule 'byday' must be an array\");\n            }\n\n            if (rrule.byday.length > 7) {\n              throw new Error(\n                \"Recurrence rrule 'byday' array must not be longer than the 7 days in a week\"\n              );\n            }\n\n            // Filter any possible repeats\n            rrule.byday = rrule.byday.filter(function (elem, pos) {\n              return rrule.byday.indexOf(elem) === pos;\n            });\n\n            for (var d in rrule.byday) {\n              if (BYDAY_VALUES.indexOf(rrule.byday[d]) < 0) {\n                throw new Error(\n                  \"Recurrence rrule 'byday' values must include only the following: 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'\"\n                );\n              }\n            }\n          }\n        }\n      }\n\n      //TODO add time and time zone? use moment to format?\n      var start_date = new Date(begin);\n      var end_date = new Date(stop);\n      var now_date = new Date();\n\n      var start_year = ('0000' + start_date.getFullYear().toString()).slice(-4);\n      var start_month = ('00' + (start_date.getMonth() + 1).toString()).slice(\n        -2\n      );\n      var start_day = ('00' + start_date.getDate().toString()).slice(-2);\n      var start_hours = ('00' + start_date.getHours().toString()).slice(-2);\n      var start_minutes = ('00' + start_date.getMinutes().toString()).slice(-2);\n      var start_seconds = ('00' + start_date.getSeconds().toString()).slice(-2);\n\n      var end_year = ('0000' + end_date.getFullYear().toString()).slice(-4);\n      var end_month = ('00' + (end_date.getMonth() + 1).toString()).slice(-2);\n      var end_day = ('00' + end_date.getDate().toString()).slice(-2);\n      var end_hours = ('00' + end_date.getHours().toString()).slice(-2);\n      var end_minutes = ('00' + end_date.getMinutes().toString()).slice(-2);\n      var end_seconds = ('00' + end_date.getSeconds().toString()).slice(-2);\n\n      var now_year = ('0000' + now_date.getFullYear().toString()).slice(-4);\n      var now_month = ('00' + (now_date.getMonth() + 1).toString()).slice(-2);\n      var now_day = ('00' + now_date.getDate().toString()).slice(-2);\n      var now_hours = ('00' + now_date.getHours().toString()).slice(-2);\n      var now_minutes = ('00' + now_date.getMinutes().toString()).slice(-2);\n      var now_seconds = ('00' + now_date.getSeconds().toString()).slice(-2);\n\n      // Since some calendars don't add 0 second events, we need to remove time if there is none...\n      var start_time = '';\n      var end_time = '';\n      if (\n        start_hours +\n          start_minutes +\n          start_seconds +\n          end_hours +\n          end_minutes +\n          end_seconds !==\n        0\n      ) {\n        start_time = 'T' + start_hours + start_minutes + start_seconds;\n        end_time = 'T' + end_hours + end_minutes + end_seconds;\n      }\n      var now_time = 'T' + now_hours + now_minutes + now_seconds;\n\n      var start = start_year + start_month + start_day + start_time;\n      var end = end_year + end_month + end_day + end_time;\n      var now = now_year + now_month + now_day + now_time;\n\n      // recurrence rrule vars\n      var rruleString;\n      if (rrule) {\n        if (rrule.rrule) {\n          rruleString = rrule.rrule;\n        } else {\n          rruleString = 'RRULE:FREQ=' + rrule.freq;\n\n          if (rrule.until) {\n            var uDate = new Date(Date.parse(rrule.until)).toISOString();\n            rruleString +=\n              ';UNTIL=' +\n              uDate.substring(0, uDate.length - 13).replace(/[-]/g, '') +\n              '000000Z';\n          }\n\n          if (rrule.interval) {\n            rruleString += ';INTERVAL=' + rrule.interval;\n          }\n\n          if (rrule.count) {\n            rruleString += ';COUNT=' + rrule.count;\n          }\n\n          if (rrule.byday && rrule.byday.length > 0) {\n            rruleString += ';BYDAY=' + rrule.byday.join(',');\n          }\n        }\n      }\n\n      // var stamp = new Date().toISOString();\n\n      var calendarEvent = [\n        'BEGIN:VEVENT',\n        'UID:' + calendarEvents.length + '@' + uidDomain,\n        'CLASS:PUBLIC',\n        'DESCRIPTION:' + description,\n        'DTSTAMP;VALUE=DATE-TIME:' + now,\n        'DTSTART;VALUE=DATE-TIME:' + start,\n        'DTEND;VALUE=DATE-TIME:' + end,\n        'LOCATION:' + location,\n        'SUMMARY;LANGUAGE=en-us:' + subject,\n        'TRANSP:TRANSPARENT',\n        'END:VEVENT',\n      ];\n\n      if (rruleString) {\n        calendarEvent.splice(4, 0, rruleString);\n      }\n\n      calendarEvent = calendarEvent.join(SEPARATOR);\n\n      calendarEvents.push(calendarEvent);\n      return calendarEvent;\n    },\n\n    /**\n     * Download calendar using the saveAs function from filesave.js\n     * @param  {string} filename Filename\n     * @param  {string} ext      Extention\n     */\n    download: function (filename, ext) {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      ext = typeof ext !== 'undefined' ? ext : '.ics';\n      filename = typeof filename !== 'undefined' ? filename : 'calendar';\n      var calendar =\n        calendarStart +\n        SEPARATOR +\n        calendarEvents.join(SEPARATOR) +\n        calendarEnd;\n\n      var blob;\n      if (navigator.userAgent.indexOf('MSIE 10') === -1) {\n        // chrome or firefox\n        blob = new Blob([calendar]);\n      } else {\n        // ie\n        var bb = new BlobBuilder();\n        bb.append(calendar);\n        blob = bb.getBlob('text/x-vCalendar;charset=' + document.characterSet);\n      }\n      saveAs(blob, filename + ext);\n      return calendar;\n    },\n\n    /**\n     * Build and return the ical contents\n     */\n    build: function () {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      var calendar =\n        calendarStart +\n        SEPARATOR +\n        calendarEvents.join(SEPARATOR) +\n        calendarEnd;\n\n      return calendar;\n    },\n  };\n};\n\nexport default ics;\n","import React, { useCallback, useContext, useMemo, useRef } from 'react';\nimport { getSemesterName } from '../../utils';\nimport { Button, Calendar, Select } from '../';\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faDownload } from '@fortawesome/free-solid-svg-icons/faDownload';\nimport { faCalendarAlt } from '@fortawesome/free-solid-svg-icons/faCalendarAlt';\nimport { faPaste } from '@fortawesome/free-solid-svg-icons/faPaste';\nimport { faAdjust } from '@fortawesome/free-solid-svg-icons/faAdjust';\nimport { faGithub } from '@fortawesome/free-brands-svg-icons/faGithub';\nimport Cookies from 'js-cookie';\nimport ics from '../../libs/ics';\nimport domtoimage from 'dom-to-image';\nimport { PNG_SCALE_FACTOR } from '../../constants';\nimport saveAs from 'file-saver';\nimport { TermContext, TermsContext, ThemeContext } from '../../contexts';\n\nexport function Header(props) {\n  const [\n    { term, oscar, pinnedCrns },\n    { setTerm },\n  ] = useContext(TermContext);\n  const [terms] = useContext(TermsContext);\n  const [theme, setTheme] = useContext(ThemeContext);\n  const captureRef = useRef(null);\n\n  const handleThemeChange = useCallback(() => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    Cookies.set('theme', newTheme);\n    setTheme(newTheme);\n  }, [theme, setTheme]);\n\n  const totalCredits = useMemo(() => {\n    return pinnedCrns.reduce((credits, crn) => {\n      return credits + oscar.findSection(crn).credits;\n    }, 0);\n  }, [pinnedCrns, oscar]);\n\n  const handleExport = useCallback(() => {\n    const cal = ics();\n    pinnedCrns.forEach((crn) => {\n      const section = oscar.findSection(crn);\n      section.meetings.forEach((meeting) => {\n        if (!meeting.period || !meeting.days.length) return;\n        const { from, to } = meeting.dateRange;\n        const subject = section.course.id;\n        const description = section.course.title;\n        const location = meeting.where;\n        const begin = new Date(from.getTime());\n        while (\n          !meeting.days.includes(\n            ['-', 'M', 'T', 'W', 'R', 'F', '-'][begin.getDay()],\n          )\n          ) {\n          begin.setDate(begin.getDate() + 1);\n        }\n        begin.setHours(\n          (meeting.period.start / 60) | 0,\n          meeting.period.start % 60,\n        );\n        const end = new Date(begin.getTime());\n        end.setHours((meeting.period.end / 60) | 0, meeting.period.end % 60);\n        const rrule = {\n          freq: 'WEEKLY',\n          until: to,\n          byday: meeting.days.map(\n            (day) => ({ M: 'MO', T: 'TU', W: 'WE', R: 'TH', F: 'FR' }[day]),\n          ),\n        };\n        cal.addEvent(subject, description, location, begin, end, rrule);\n      });\n    });\n    cal.download('gt-scheduler');\n  }, [oscar, pinnedCrns]);\n\n  const handleDownload = useCallback(() => {\n    const captureElement = captureRef.current;\n    domtoimage\n      .toPng(captureElement, {\n        width: captureElement.offsetWidth * PNG_SCALE_FACTOR,\n        height: captureElement.offsetHeight * PNG_SCALE_FACTOR,\n        style: {\n          left: 0,\n          transform: `scale(${PNG_SCALE_FACTOR})`,\n          'transform-origin': 'top left',\n        },\n      })\n      .then((blob) => saveAs(blob, 'schedule.png'));\n  }, [captureRef]);\n\n  return (\n    <div className=\"Header\">\n      <Button className=\"logo\">\n        <span className=\"gt\">GT </span>\n        <span className=\"scheduler\">Scheduler</span>\n      </Button>\n      <Select onChange={setTerm}\n              value={term}\n              options={terms.map(term => ({ value: term, label: getSemesterName(term) }))}\n              className=\"semester\"/>\n      <span className=\"credits\">\n            {totalCredits} Credits\n          </span>\n      <div className=\"menu\">\n        <Button\n          onClick={handleDownload}\n          disabled={pinnedCrns.length === 0}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faDownload}/>\n          <div className=\"text\">Download</div>\n        </Button>\n        <Button\n          onClick={handleExport}\n          disabled={pinnedCrns.length === 0}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faCalendarAlt}/>\n          <div className=\"text\">Export</div>\n        </Button>\n        <Button\n          text={pinnedCrns.join(', ')}\n          disabled={pinnedCrns.length === 0}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faPaste}/>\n          <div className=\"text\">CRNs</div>\n        </Button>\n        <Button\n          onClick={handleThemeChange}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faAdjust}/>\n          <div className=\"text\">Theme</div>\n        </Button>\n        <Button href=\"https://github.com/64json/gt-scheduler\">\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faGithub}/>\n          <div className=\"text\">GitHub</div>\n        </Button>\n      </div>\n      <div className=\"capture-container\" ref={captureRef}>\n        <Calendar className=\"fake-calendar\" capture/>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useState } from 'react';\nimport { faAngleDown, faAngleUp, faBan, faInfoCircle } from '@fortawesome/free-solid-svg-icons';\nimport { classes, simplifyName, unique } from '../../utils';\nimport { ActionRow, Section } from '../';\nimport './stylesheet.scss';\nimport { TermContext } from '../../contexts';\n\nexport function Instructor({ className, color, name, sections, gpa }) {\n  const [\n    { pinnedCrns, excludedCrns },\n    { patchTermData },\n  ] = useContext(TermContext);\n  const [expanded, setExpanded] = useState(true);\n\n  const includeSection = useCallback(section => {\n    patchTermData({\n      excludedCrns: excludedCrns.filter(crn => crn !== section.crn),\n    });\n  }, [excludedCrns, patchTermData]);\n\n  const excludeSections = useCallback(sections => {\n    const crns = sections.map(section => section.crn);\n    patchTermData({\n      excludedCrns: unique([...excludedCrns, ...crns]),\n      pinnedCrns: pinnedCrns.filter(crn => !crns.includes(crn)),\n    });\n  }, [excludedCrns, pinnedCrns, patchTermData]);\n\n  const instructorPinned = sections.some(section => pinnedCrns.includes(section.crn));\n\n  const includedSections = sections.filter(section => !excludedCrns.includes(section.crn));\n  const excludedSections = sections.filter(section => excludedCrns.includes(section.crn));\n\n  return (\n    <div className={classes('Instructor', !expanded && 'divider-bottom', className)}>\n      <ActionRow label={name || 'Not Assigned'}\n                 actions={[\n                   { icon: expanded ? faAngleUp : faAngleDown, onClick: () => setExpanded(!expanded) },\n                   !['TBA', 'Not Assigned'].includes(name) && {\n                     icon: faInfoCircle,\n                     href: `http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=${encodeURIComponent(simplifyName(name))}`,\n                   },\n                   { icon: faBan, onClick: () => excludeSections(sections) },\n                 ]}\n                 style={instructorPinned ? { backgroundColor: color } : undefined}>\n        <div className=\"instructor-row\">\n            <span className=\"gpa\">\n              Instructor GPA: {gpa || 'N/A'}\n            </span>\n        </div>\n      </ActionRow>\n      {\n        expanded &&\n        <div className={classes('section-container', 'nested')}>\n          {\n            includedSections.map(section => {\n              const pinned = pinnedCrns.includes(section.crn);\n              return (\n                <Section key={section.id} className=\"divider-bottom\" section={section} color={color} pinned={pinned}/>\n              );\n            })\n          }\n          {\n            excludedSections.length > 0 &&\n            <div className=\"excluded-section-container\">\n              {\n                excludedSections.map(section => (\n                  <span className=\"excluded-section\" key={section.id} onClick={() => includeSection(section)}>\n                    {section.id}\n                  </span>\n                ))\n              }\n            </div>\n          }\n        </div>\n      }\n    </div>\n  );\n}\n","import React from 'react';\nimport { classes } from '../../utils';\nimport { PALETTE } from '../../constants';\nimport './stylesheet.scss';\n\nexport function Palette({ className, color, onSelectColor, ...restProps }) {\n  return (\n    <div className={classes('Palette', className)} {...restProps}>\n      {PALETTE.map((colors, i) => (\n        <div className=\"palette-row\" key={i}>\n          {colors.map((paletteColor) => (\n            <div\n              className={classes('color', paletteColor === color && 'frame')}\n              key={paletteColor}\n              style={{ backgroundColor: paletteColor }}\n              onClick={() => onSelectColor(paletteColor)}\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n","import React, { useCallback, useContext } from 'react';\nimport { faBan, faInfoCircle, faThumbtack, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport {\n  classes,\n  isInstructionalMethodAttribute,\n  periodToString,\n  refineInstructionalMethodAttribute,\n} from '../../utils';\nimport { ActionRow } from '../';\nimport './stylesheet.scss';\nimport { OverlayCrnsContext, TermContext } from '../../contexts';\n\nexport function Section({ className, section, pinned, color }) {\n  const [\n    { term, pinnedCrns, excludedCrns },\n    { patchTermData },\n  ] = useContext(TermContext);\n  const [, setOverlayCrns] = useContext(OverlayCrnsContext);\n\n  const excludeSection = useCallback(section => {\n    patchTermData({\n      excludedCrns: [...excludedCrns, section.crn],\n      pinnedCrns: pinnedCrns.filter(crn => crn !== section.crn),\n    });\n  }, [pinnedCrns, excludedCrns, patchTermData]);\n\n  const pinSection = useCallback(section => {\n    if (pinnedCrns.includes(section.crn)) {\n      patchTermData({\n        pinnedCrns: pinnedCrns.filter(crn => crn !== section.crn),\n      });\n    } else {\n      patchTermData({\n        pinnedCrns: [...pinnedCrns, section.crn],\n        excludedCrns: excludedCrns.filter(crn => crn !== section.crn),\n      });\n    }\n  }, [pinnedCrns, excludedCrns, patchTermData]);\n\n  return (\n    <ActionRow label={section.id} className={classes('Section', className)}\n               onMouseEnter={() => setOverlayCrns([section.crn])}\n               onMouseLeave={() => setOverlayCrns([])} actions={[\n      { icon: pinned ? faTimes : faThumbtack, onClick: () => pinSection(section) },\n      {\n        icon: faInfoCircle,\n        href: `https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=${term}&crn_in=${section.crn}`,\n      },\n      { icon: faBan, onClick: () => excludeSection(section) },\n    ]} style={pinned ? { backgroundColor: color } : undefined}>\n      <div className=\"section-details\">\n        <div className=\"instructional-method\">\n          {\n            section.attributes\n              .filter(isInstructionalMethodAttribute)\n              .map(refineInstructionalMethodAttribute)\n              .join(', ')\n          }\n        </div>\n        <div className=\"meeting-container\">\n          {\n            section.meetings.map((meeting, i) => {\n              return (\n                <div className=\"meeting\" key={i}>\n                  <span className=\"days\">{meeting.days.join('')}</span>\n                  <span className=\"period\">{periodToString(meeting.period)}</span>\n                </div>\n              );\n            })\n          }\n        </div>\n      </div>\n    </ActionRow>\n  );\n}\n","import React, { useState } from 'react';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCaretDown } from '@fortawesome/free-solid-svg-icons/faCaretDown';\nimport { Button } from '../';\n\nexport function Select({ className, value, onChange, options }) {\n  const [opened, setOpened] = useState(false);\n\n  const selectedOption = options.find(option => option.value === value);\n  const label = selectedOption ? selectedOption.label : '-';\n\n  return (\n    <div className={classes('Button', 'Select', className)} onClick={() => setOpened(!opened)}>\n      <div className=\"text\">\n        {label}\n      </div>\n      <FontAwesomeIcon fixedWidth icon={faCaretDown}/>\n      {\n        opened &&\n        <div className=\"intercept\" onClick={() => setOpened(false)}/>\n      }\n      {\n        opened &&\n        <div className=\"option-container\">\n          {\n            options.map(({ value, label }) => (\n              <Button className=\"option\" key={value} onClick={() => onChange(value)}>\n                {label}\n              </Button>\n            ))\n          }\n        </div>\n      }\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { classes, getContentClassName, periodToString } from '../../utils';\nimport { CLOSE, OPEN } from '../../constants';\nimport './stylesheet.scss';\nimport { TermContext } from '../../contexts';\n\nexport function TimeBlocks({ className, crn, overlay, preview, capture }) {\n  const [{ oscar, colorMap }] = useContext(TermContext);\n\n  const section = oscar.findSection(crn);\n  const color = colorMap[section.course.id];\n  const contentClassName = getContentClassName(color);\n\n  return (\n    <div\n      className={classes(\n        'TimeBlocks',\n        capture && 'capture',\n        overlay && 'overlay',\n        className,\n      )}\n    >\n      {section.meetings.map(\n        (meeting, i) =>\n          meeting.period &&\n          meeting.days.map((day) => (\n            <div\n              className={classes('meeting', contentClassName, 'default', day)}\n              key={[i, day].join('-')}\n              style={{\n                top:\n                  ((meeting.period.start - OPEN) / (CLOSE - OPEN)) * 100 +\n                  '%',\n                height:\n                  ((meeting.period.end - meeting.period.start) /\n                    (CLOSE - OPEN)) *\n                  100 +\n                  '%',\n                backgroundColor: color,\n              }}\n            >\n              {\n                !preview && (\n                  <div className=\"meeting-wrapper\">\n                    <span className=\"ids\">\n                      <span className=\"course-id\">\n                        {section.course.id}\n                      </span>\n                      <span className=\"section-id\">\n                        &nbsp;{section.id}\n                      </span>\n                    </span>\n                    <span className=\"period\">\n                      {periodToString(meeting.period)}\n                    </span>\n                    <span className=\"where\">{meeting.where}</span>\n                    <span className=\"instructors\">\n                      {meeting.instructors.join(', ')}\n                    </span>\n                  </div>\n                )\n              }\n            </div>\n          )),\n      )}\n    </div>\n  );\n}\n","import { Course, SortingOption } from './';\nimport { hasConflictBetween, stringToTime } from '../utils';\n\nclass Oscar {\n  constructor(data) {\n    const { courses, caches, updatedAt } = data;\n\n    this.periods = caches.periods.map(period => {\n      if (period === 'TBA') {\n        return undefined;\n      }\n      return {\n        start: stringToTime(period.split(' - ')[0]),\n        end: stringToTime(period.split(' - ')[1]),\n      };\n    });\n    this.dateRanges = caches.dateRanges.map((dateRange) => {\n      const [from, to] = dateRange.split(' - ').map((v) => new Date(v));\n      from.setHours(0);\n      to.setHours(23, 59, 59, 999);\n      return { from, to };\n    });\n    this.scheduleTypes = caches.scheduleTypes;\n    this.campuses = caches.campuses;\n    this.attributes = caches.attributes;\n    this.gradeBases = caches.gradeBases;\n    this.updatedAt = new Date(updatedAt);\n    this.courses = Object.keys(courses).map(\n      (courseId) => new Course(this, courseId, courses[courseId]),\n    );\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach((course) => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach((section) => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n    this.sortingOptions = [\n      new SortingOption('Most Compact', (combination) => {\n        const { startMap, endMap } = combination;\n        const diffs = Object.keys(startMap).map(\n          (day) => endMap[day] - startMap[day],\n        );\n        const sum = diffs.reduce((sum, min) => sum + min, 0);\n        return +sum;\n      }),\n      new SortingOption('Earliest Ending', (combination) => {\n        const { endMap } = combination;\n        const ends = Object.values(endMap);\n        const sum = ends.reduce((sum, end) => sum + end, 0);\n        const avg = sum / ends.length;\n        return +avg;\n      }),\n      new SortingOption('Latest Beginning', (combination) => {\n        const { startMap } = combination;\n        const starts = Object.values(startMap);\n        const sum = starts.reduce((sum, min) => sum + min, 0);\n        const avg = sum / starts.length;\n        return -avg;\n      }),\n    ];\n  }\n\n  findCourse(courseId) {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn) {\n    return this.crnMap[crn];\n  }\n\n  searchCourses(keyword, attributes) {\n    const filterCoursesByKeyword = () => {\n      const results = /^([A-Z]+) ?((\\d.*)?)$/i.exec(keyword.toUpperCase());\n      if (!results) {\n        return [];\n      }\n      const [, subject, number] = results;\n      if (number) {\n        return this.courses.filter(course => course.subject === subject && course.number.startsWith(number));\n      } else {\n        return this.courses.filter(course => course.subject === subject);\n      }\n    };\n\n    const filteredCourses = filterCoursesByKeyword();\n\n    if (attributes.length === 0) {\n      return filteredCourses;\n    }\n\n    return filteredCourses.filter(course => {\n      return course.sections.some(section => {\n        return attributes.some(attribute => section.attributes.includes(attribute));\n      });\n    });\n  }\n\n  getCombinations(desiredCourses, pinnedCrns, excludedCrns) {\n    const crnsList = [];\n    const dfs = (courseIndex = 0, crns = []) => {\n      if (courseIndex === desiredCourses.length) {\n        crnsList.push(crns);\n        return;\n      }\n      const course = this.findCourse(desiredCourses[courseIndex]);\n      const isIncluded = (section) => !excludedCrns.includes(section.crn);\n      const isPinned = (section) => pinnedCrns.includes(section.crn);\n      const hasConflict = (section) =>\n        [...pinnedCrns, ...crns].some((crn) =>\n          hasConflictBetween(this.findSection(crn), section),\n        );\n      if (course.hasLab) {\n        const pinnedOnlyLecture = course.onlyLectures.find(isPinned);\n        const pinnedOnlyLab = course.onlyLabs.find(isPinned);\n        const pinnedAllInOne = course.allInOnes.find(isPinned);\n        if ((pinnedOnlyLecture && pinnedOnlyLab) || pinnedAllInOne) {\n          dfs(courseIndex + 1, crns);\n        } else if (pinnedOnlyLecture) {\n          pinnedOnlyLecture.associatedLabs.filter(isIncluded).forEach((lab) => {\n            if (hasConflict(lab)) return;\n            dfs(courseIndex + 1, [...crns, lab.crn]);\n          });\n        } else if (pinnedOnlyLab) {\n          pinnedOnlyLab.associatedLectures\n            .filter(isIncluded)\n            .forEach((lecture) => {\n              if (hasConflict(lecture)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn]);\n            });\n        } else {\n          course.onlyLectures.filter(isIncluded).forEach((lecture) => {\n            if (hasConflict(lecture)) return;\n            lecture.associatedLabs.filter(isIncluded).forEach((lab) => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn, lab.crn]);\n            });\n          });\n          course.allInOnes.filter(isIncluded).forEach((section) => {\n            if (hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      } else {\n        if (course.sections.some(isPinned)) {\n          dfs(courseIndex + 1, crns);\n        } else {\n          Object.values(course.sectionGroups).forEach((sectionGroup) => {\n            const section = sectionGroup.sections.find(isIncluded);\n            if (!section || hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      }\n    };\n    dfs();\n    return crnsList.map((crns) => {\n      const startMap = {};\n      const endMap = {};\n      this.iterateTimeBlocks([...pinnedCrns, ...crns], (day, period) => {\n        if (!(day in startMap) || startMap[day] > period.start)\n          startMap[day] = period.start;\n        if (!(day in endMap) || endMap[day] < period.end)\n          endMap[day] = period.end;\n      });\n      return {\n        crns,\n        startMap,\n        endMap,\n      };\n    });\n  }\n\n  sortCombinations(combinations, sortingOptionIndex) {\n    const sortingOption = this.sortingOptions[sortingOptionIndex];\n    return combinations\n      .map((combination) => ({\n        ...combination,\n        factor: sortingOption.calculateFactor(combination),\n      }))\n      .sort((a, b) => a.factor - b.factor);\n  }\n\n  iterateTimeBlocks(crns, callback) {\n    crns.forEach((crn) => {\n      this.findSection(crn).meetings.forEach(\n        (meeting) =>\n          meeting.period &&\n          meeting.days.forEach((day) => {\n            callback(day, meeting.period);\n          }),\n      );\n    });\n  }\n}\n\nexport default Oscar;\n","import { Section } from './';\nimport { hasConflictBetween, isLab, isLecture } from '../utils';\nimport axios from 'axios';\nimport cheerio from 'cheerio';\n\nclass Course {\n  constructor(oscar, courseId, data) {\n    const [title, sections] = data;\n\n    this.id = courseId;\n    [this.subject, this.number] = this.id.split(' ');\n    this.title = title;\n    this.sections = Object.keys(sections).map(\n      (sectionId) => new Section(oscar, this, sectionId, sections[sectionId]),\n    );\n\n    const onlyLectures = this.sections.filter(\n      (section) => isLecture(section) && !isLab(section),\n    );\n    const onlyLabs = this.sections.filter(\n      (section) => isLab(section) && !isLecture(section),\n    );\n    this.hasLab = onlyLectures.length && onlyLabs.length;\n    if (this.hasLab) {\n      onlyLectures.forEach(\n        (lecture) =>\n          (lecture.associatedLabs = onlyLabs.filter((lab) =>\n            lab.id.startsWith(lecture.id),\n          )),\n      );\n      onlyLabs.forEach(\n        (lab) =>\n          (lab.associatedLectures = onlyLectures.filter((lecture) =>\n            lab.id.startsWith(lecture.id),\n          )),\n      );\n      const lonelyLectures = onlyLectures.filter(\n        (lecture) => !lecture.associatedLabs.length,\n      );\n      const lonelyLabs = onlyLabs.filter(\n        (lab) => !lab.associatedLectures.length,\n      );\n      lonelyLectures.forEach(\n        (lecture) =>\n          (lecture.associatedLabs = lonelyLabs.filter(\n            (lab) => !hasConflictBetween(lecture, lab),\n          )),\n      );\n      lonelyLabs.forEach(\n        (lab) =>\n          (lab.associatedLectures = lonelyLectures.filter(\n            (lecture) => !hasConflictBetween(lecture, lab),\n          )),\n      );\n      this.onlyLectures = onlyLectures;\n      this.onlyLabs = onlyLabs;\n      this.allInOnes = this.sections.filter(\n        (section) => isLecture(section) && isLab(section),\n      );\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections) {\n    let groups = {};\n    sections.forEach((section) => {\n      const sectionGroupMeetings = section.meetings.map(({ days, period }) => ({\n        days,\n        period,\n      }));\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section],\n        };\n      }\n    });\n    return groups;\n  }\n\n  async fetchGpa() {\n    const url = `https://critique.gatech.edu/course.php?id=${encodeURIComponent(this.id)}`;\n    return await axios({\n      url: `https://cors-anywhere.herokuapp.com/${url}`,\n      method: 'get',\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'text/html',\n      },\n    }).then(response => {\n      const $ = cheerio.load(response.data);\n      const averageGpa = Number($('div.center-table > table.table > tbody > tr :nth-child(2)').text());\n      const gpaMap = { averageGpa };\n\n      $('table#dataTable > tbody > tr').each((i, element) => {\n        const instructor = $(element).find('td:nth-child(1)').text();\n        const [lastName, firstName] = instructor.split(', ');\n        const fullName = `${firstName} ${lastName}`;\n        gpaMap[fullName] = Number($(element).find('td:nth-child(3)').text());\n      });\n\n      return gpaMap;\n    });\n  };\n}\n\nexport default Course;\n","import { unique } from '../utils';\n\nclass Section {\n  constructor(oscar, course, sectionId, data) {\n    const [crn, meetings, credits, scheduleTypeIndex, campusIndex, attributeIndices, gradeBasisIndex] = data;\n\n    this.course = course;\n    this.id = sectionId;\n    this.crn = crn;\n    this.credits = credits;\n    this.scheduleType = oscar.scheduleTypes[scheduleTypeIndex];\n    this.campus = oscar.campuses[campusIndex];\n    this.attributes = attributeIndices.map(attributeIndex => oscar.attributes[attributeIndex]);\n    this.gradeBasis = oscar.gradeBases[gradeBasisIndex];\n    this.meetings = meetings.map(\n      ([periodIndex, days, where, instructors, dateRangeIndex]) => ({\n        period: oscar.periods[periodIndex],\n        days: days === '&nbsp;' ? [] : [...days],\n        where,\n        instructors: instructors.map((instructor) =>\n          instructor.replace(/ \\(P\\)$/, ''),\n        ),\n        dateRange: oscar.dateRanges[dateRangeIndex],\n      }),\n    );\n    this.instructors = unique(\n      this.meetings.reduce(\n        (instructors, meeting) => [...instructors, ...meeting.instructors],\n        [],\n      ),\n    );\n  }\n}\n\nexport default Section;\n","class SortingOption {\n  constructor(label, calculateFactor) {\n    this.label = label;\n    this.calculateFactor = calculateFactor;\n  }\n}\n\nexport default SortingOption;\n","import { useCallback, useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\n\nexport function useCookie(key, defaultValue) {\n  const [value, setValue] = useState(defaultValue);\n\n  const setCookieValue = useCallback(value => {\n    setValue(value);\n    Cookies.set(key, value);\n  }, [key, setValue]);\n\n  useEffect(() => {\n    let value;\n    if (key !== undefined) {\n      value = Cookies.get(key);\n    }\n    setValue(value === undefined ? defaultValue : value);\n  }, [key, defaultValue]);\n\n  return [value, setCookieValue];\n}\n","import React, { useEffect, useMemo, useState } from 'react';\nimport axios from 'axios';\nimport { classes, isMobile } from '../../utils';\nimport { Button, Calendar, CombinationContainer, CourseContainer, Header } from '../';\nimport { Oscar } from '../../beans';\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\nimport { useCookie, useJsonCookie } from '../../hooks';\nimport { OverlayCrnsContext, TermContext, TermsContext, ThemeContext } from '../../contexts';\n\nconst defaultTermData = {\n  desiredCourses: [],\n  pinnedCrns: [],\n  excludedCrns: [],\n  colorMap: {},\n  sortingOptionIndex: 0,\n};\n\nexport function App(props) {\n  const [theme, setTheme] = useCookie('theme', 'dark');\n  const [term, setTerm] = useCookie('term');\n  const [termData, patchTermData] = useJsonCookie(term, defaultTermData);\n  const [terms, setTerms] = useState([]);\n  const [oscar, setOscar] = useState(null);\n\n  const [tabIndex, setTabIndex] = useState(0);\n  const [mobile, setMobile] = useState(isMobile());\n  const [overlayCrns, setOverlayCrns] = useState([]);\n\n  const themeContextValue = useMemo(() => [\n    theme,\n    setTheme,\n  ], [theme, setTheme]);\n\n  const termsContextValue = useMemo(() => [\n    terms,\n    setTerms,\n  ], [terms, setTerms]);\n\n  const termContextValue = useMemo(() => [\n    { term, oscar, ...termData },\n    { setTerm, setOscar, patchTermData },\n  ], [term, oscar, termData, setTerm, setOscar, patchTermData]);\n\n  const overlayContextValue = useMemo(() => [\n    overlayCrns,\n    setOverlayCrns,\n  ], [overlayCrns, setOverlayCrns]);\n\n  useEffect(() => {\n    setOscar(null);\n    if (term) {\n      axios\n        .get(`https://jasonpark.me/gt-schedule-crawler/${term}.json`)\n        .then((res) => {\n          const oscar = new Oscar(res.data);\n          setOscar(oscar);\n        });\n    }\n  }, [term]);\n\n  useEffect(() => {\n    axios\n      .get('https://api.github.com/repos/64json/gt-schedule-crawler/contents?ref=gh-pages')\n      .then((res) => {\n        const terms = res.data\n          .map(content => content.name)\n          .filter(name => /\\d{6}\\.json/.test(name))\n          .map(name => name.replace(/\\.json$/, ''))\n          .sort()\n          .reverse();\n        setTerms(terms);\n      });\n  }, [setTerms]);\n\n  useEffect(() => {\n    if (!term) {\n      const [recentTerm] = terms;\n      setTerm(recentTerm);\n    }\n  }, [terms, term, setTerm]);\n\n  useEffect(() => {\n    const handleResize = (e) => {\n      const newMobile = isMobile();\n      if (mobile !== newMobile) {\n        setMobile(newMobile);\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [mobile]);\n\n  const className = classes('App', mobile && 'mobile', theme);\n\n  if (!oscar) {\n    return (\n      <div className={className}/>\n    );\n  }\n\n  return (\n    <ThemeContext.Provider value={themeContextValue}>\n      <TermsContext.Provider value={termsContextValue}>\n        <TermContext.Provider value={termContextValue}>\n          <OverlayCrnsContext.Provider value={overlayContextValue}>\n            <div className={className}>\n              <Header/>\n              {\n                mobile && (\n                  <div className=\"tab-container\">\n                    {['Courses', 'Combinations', 'Calendar'].map((tabTitle, i) => (\n                      <Button key={tabTitle}\n                              className={classes('tab', tabIndex === i && 'active')}\n                              onClick={() => setTabIndex(i)}>\n                        {tabTitle}\n                      </Button>\n                    ))}\n                  </div>\n                )\n              }\n              <div className=\"main\">\n                {\n                  (!mobile || tabIndex === 0) &&\n                  <CourseContainer/>\n                }\n                {\n                  (!mobile || tabIndex === 1) &&\n                  <CombinationContainer/>\n                }\n                {\n                  (!mobile || tabIndex === 2) &&\n                  <div className=\"calendar-container\">\n                    <Calendar className=\"calendar\" overlayCrns={overlayCrns}/>\n                  </div>\n                }\n              </div>\n            </div>\n          </OverlayCrnsContext.Provider>\n        </TermContext.Provider>\n      </TermsContext.Provider>\n    </ThemeContext.Provider>\n  );\n}\n","import { useCallback, useMemo } from 'react';\nimport { useCookie } from './';\n\nexport function useJsonCookie(key, defaultValue) {\n  const [rawValue, setRawValue] = useCookie(key);\n\n  const value = useMemo(() => {\n    if (rawValue !== undefined) {\n      const parsedValue = JSON.parse(rawValue);\n      return {\n        ...defaultValue,\n        ...parsedValue,\n      };\n    }\n    return defaultValue;\n  }, [rawValue, defaultValue]);\n\n  const patchValue = useCallback(patch => {\n    const rawValue = JSON.stringify({\n      ...value,\n      ...patch,\n    });\n    setRawValue(rawValue);\n  }, [value, setRawValue]);\n\n  return [value, patchValue];\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/App';\nimport 'normalize.css';\nimport './stylesheet.scss';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}